\section{等可能概型}
在实际问题中，具体找出符合概率公理化定义的集合函数\(P\)，
再计算出事件\(A\)的概率\(P(A)\)通常是不容易的.
但在等可能概型下，\(P(A)\)的计算却十分简单.

等可能概型是指一个试验中所有的样本点都等可能出现的概率模型.
\subsection{古典概型}
\begin{definition}
若一个随机试验具有以下两个特点：
\begin{enumerate}
	\item 试验只有有限个可能结果，
	即\begin{equation*}
		\Omega = \{\omega_1, \omega_2, \dotsc, \omega_n\};
	\end{equation*}

	\item 每个可能结果在试验中出现的可能性相等，
	即\begin{equation*}
		P\{\omega_1\} = P\{\omega_2\} = \dotsb = P\{\omega_n\},
	\end{equation*}
\end{enumerate}
这样的随机试验的概率模型称为\DefineConcept{古典概率模型}，
简称\DefineConcept{古典概型}.
\end{definition}

因为\(\Omega = \{\omega_1\}\cup\{\omega_2\}\cup\dotsb\cup\{\omega_n\}\)，
且基本事件是两两互斥的，
从而有\begin{equation*}
	1 = P(\Omega) = P\{\omega_1, \omega_2, \dotsc, \omega_n\}
	= \sum_{i=1}^n P\{\omega_i\}
	= n P\{\omega_1\},
\end{equation*}
得到\begin{equation*}
	P\{\omega_1\} = P\{\omega_2\} = \dotsb = P\{\omega_n\} = \frac{1}{n}.
\end{equation*}

对任一事件\(A\)，为不失一般性，
\(A\)总可表为\begin{equation*}
	A = \{\omega_{i_1},\omega_{i_2},\dotsc,\omega_{i_k}\}
	= \{\omega_{i_1}\}\cup\{\omega_{i_2}\}\cup\dotsb\cup\{\omega_{i_k}\},
\end{equation*}
于是有\begin{equation*}
	P(A) = P\{\omega_{i_1}\} + P\{\omega_{i_2}\} + \dotsb + P\{\omega_{i_k}\}
	= \frac{k}{n} = \frac{A \text{中的样本点总数}}{\Omega \text{中的样本点总数}}.
\end{equation*}

这样的概率称为\DefineConcept{古典概率}.

计算古典概率时，
应选取适当的随机试验以及样本空间，
使其符合古典概率的两个特点.
比如掷一均匀硬币两次，考察出现的面（记正面为T，反面为H），
样本空间为\(\Omega_1 = \{ HH, HT, TH, TT \}\)，
四个基本事件出现的概率都是\(1/4\).
但若考察正面出现的次数，
则样本空间为\(\Omega_2 = \{ 0,1,2 \}\)，
这便不是古典概型，
因为出现“0次正面”相当于第一个试验出现“TT”，其概率为\(1/4\)；
而出现“1次正面”相当于第一个试验出现“HT”或“TH”，其概率为\(1/2\).

\begin{example}
设一个袋中有\(N\)个编号不同的小球.
从袋中\DefineConcept{有放回地}抽取\(r\)次，
每次一球，这时样本点总数为\(N^r\).
\end{example}

\begin{example}
设一个袋中有\(N\)个编号不同的小球.
从袋中\DefineConcept{不放回地}抽取\(r\)次，
每次一球，
这时样本点总数为\begin{equation*}
	A_N^r = N(N-1)\dotsb(N-r+1) = \frac{N!}{(N-r)!},
	\quad
	r \leq N.
\end{equation*}
\end{example}

\begin{example}
设一个袋中有\(N\)个球，其中\(m\)个红球，余下是白球.
从袋中一次取\(n\)个球.这样抽取到的\(n\)个球是无序的，
总的抽取结果有\(C_N^n\)种，
而取出的\(n\)个球中恰有\(k\ (k=0,1,\dotsc,m)\)个红球的样本点总数为\(C_m^k C_{N-m}^{n-k}\)种.
从而取出\(n\)个球中恰有\(k\)个红球的概率为\begin{equation*}
	p_k = \frac{C_m^k C_{N-m}^{n-k}}{C_N^n},
	\quad k=0,1,\dotsc,m.
\end{equation*}
这个概率\(p_k\)称为\DefineConcept{超几何概率}.
\end{example}

\begin{example}[投球问题]\label{example:概率论基础.古典概型.投球问题}
有\(n\)个不同的球，将它们投入到\(N\ (n \leq N)\)个箱子内.
假设任意一个球被投入任意一个箱子的概率是\(\frac{1}{N}\)，
且任意一个箱子可以容纳全部\(n\)个球.
求以下事件的概率：
\begin{enumerate}
	\item 设\(A\)表示“指定\(n\)个箱子，每个箱子里各有一球”；
	\item 设\(B\)表示“恰有\(n\)个箱子，其中各有一球”；
	\item 设\(C\)表示“指定某个箱子，其中恰有\(m\ (m \leq n)\)个球”；
	\item 设\(D\)表示“恰有\(k\)个箱子，其中有\(m\)个球”.
\end{enumerate}
\begin{solution}
由于每一个球有\(N\)种可能投法，所以样本点总数为\(N^n\).
\begin{enumerate}
	\item
	指定的\(n\)的箱子中各有一个球，即\(n\)个球分配在\(N\)箱子中的不同排列数共有\(n!\)种，所以\begin{equation*}
		P(A) = \frac{n!}{N^n}.
	\end{equation*}

	\item
	由于未确定是哪几个箱子，而从\(N\)个箱子中选出\(n\)个箱子的方法有\(C_N^n\)种，
	对于按这种方法选定的\(n\)个箱子，\(n\)个球投入其中且每个箱子各有一个球的投球方式共有\(n!\)种，
	所以事件\(B\)所包含的样本点数为\(C_N^n n!\)，从而\begin{equation*}
		P(B) = \frac{C_N^n n!}{N^n} = \frac{A_N^n}{N^n}.
	\end{equation*}

	\item
	这个指定的箱子中有\(m\)个球须从\(n\)个球中选出，共有\(C_n^m\)种选法；
	其余\(n-m\)个球可以任意投到其余的\(N-1\)个箱子中，共有\((N-1)^{n-m}\)种投法，
	所以事件\(C\)所包含的样本点数为\(C_n^m (N-1)^{n-m}\)，从而\begin{equation*}
		P(C) = \frac{C_n^m (N-1)^{n-m}}{N^n}
		= C_n^m \left(\frac{1}{N}\right)^m \left(1-\frac{1}{N}\right)^{n-m}.
	\end{equation*}

	\item
	“恰有\(k\)个箱子”是从\(N\)个箱子中任意选取的，有\(C_N^k\)种选法；
	而\(m\)个球是从\(n\)个球中任意选出的，有\(C_n^m\)种选法；
	由于选出的\(m\)个球中任意一个球都可投入到刚刚选出的\(k\)个箱子中的任意一个箱子中去，
	所以事件\(D\)包含的样本点数为\(C_N^k C_n^m k^m\)，从而\begin{equation*}
		P(D) = \frac{C_N^k C_n^m k^m}{N^n}.
	\end{equation*}
\end{enumerate}
\end{solution}
\end{example}

\begin{example}\label{example:概率论基础.古典概型.座位问题}
假设有\(n\)个人随机地坐在礼堂第1排的\(N\)个座位上，试求下列事件的概率：
\begin{enumerate}
	\item \(A=\{\text{任何人都没有邻座}\}\)；
	\item \(B=\{\text{每人恰好有一个邻座}\}\)；
	\item \(C=\{\text{排在中央对称的两个座位至少有一个空着}\}\).
\end{enumerate}
{\small\it
这里要注意发现本例中对“座位”的描述
和在\cref{example:概率论基础.古典概型.投球问题} 中对“箱子”的描述的差异.
投球问题并没有强调\(N\)个“箱子”有区别；
而在本例中，“座位”是依顺序排列摆放的、有区别的.
}
\begin{solution}
\(n\)个人随机地坐在礼堂第1排的\(N\)个座位上
共有\(A_N^n\)种不同坐法，
故样本点总数为\(A_N^n\).
\begin{enumerate}
	\item
	若任何人都没有邻座，则第1排至少得有\(n+n-1=2n-1\)个座位.
	故当\(2n-1>N\)时，即\(n>(N+1)/2\)时，\(P(A)=0\).
	当\(n\leq(N+1)/2\)时，要使任何人均无邻座，可以按以下方式安排他们的座位：
	先从\(N\)个座位中搬走\(n-1\)个，然后将\(n\)个人随意安排在\(N-(n-1)\)个座位上，
	再在每两个人之间插入\(1\)个座位；
	从而事件\(A\)包含的样本点数为\(A_{N-n+1}^n\).
	因此\begin{equation*}
		P(A) = \left\{ \begin{array}{cl}
			\frac{A_{N-n+1}^n}{A_N^n}, & n\leq\frac{N+1}{2} \\
			0, & n>\frac{N+1}{2}.
		\end{array} \right.
	\end{equation*}

	\item
	要使每人恰好只有一个邻座，
	那么\(n\)必须是偶数，
	且\(N
	\geq n + \frac{n}{2} - 1
	= \frac{3n}{2} - 1\)；
	也就是说，当\(N < \frac{3n}{2} - 1\)时，
	或当\(n\)是奇数时，\(P(B) = 0\).
	当\(N \geq \frac{3n}{2} - 1\)，
	且\(n\)是偶数时，
	可以按以下方式安排他们的座位：
	先从\(N\)个座位中搬走\(2\left(\frac{n}{2}-1\right) = n-2\)个座位，
	然后从\(n\)个人中随意地选出\(\frac{n}{2}\)个人并随意地安排在\(N-n+2\)个座位上，
	从而有\(C_n^{n/2} A_{N-n+2}^{n/2}\)种放法；
	继而再将搬走\(n-2\)个座位两个两个地插入每相邻的两人之间，
	最后将剩下的\(\frac{n}{2}\)个人随机地安排到已经坐下的人的身边，
	共有\((n/2)!\)种放法；
	所以，将\(n\)个人随机安排在一排\(N\)个座位上，
	且要求每个人只有一个邻座，
	共有\(C_n^{n/2} A_{N-n+2}^{n/2} (n/2)!\)种放法；
	从而事件\(B\)包含的样本点数为\([C_n^{n/2} (n/2)!] A_{N-n+2}^{n/2}
	= A_n^{n/2} A_{N-n+2}^{n/2}\).
	因此\begin{equation*}
		P(B) = \left\{ \def\arraystretch{1.5} \begin{array}{cl}
			\frac{A_n^{n/2} A_{N-n+2}^{n/2}}{A_N^n},
				& n\ \text{是偶数} \land N\geq\frac{3n}{2}-1, \\
			0, & n\ \text{是奇数} \lor N<\frac{3n}{2}-1.
		\end{array} \right.
	\end{equation*}

	\item
	当\(N\)为偶数时，
	将这一排座位看作一条线段，
	沿着它的垂直平分线将它对折重叠起来，
	然后在其中一侧的\(\frac{N}{2}\)个座位上随机安排\(n\)个人
	（假设一侧的座位足够\(n\)个人坐下，
	即\(\frac{N}{2} \geq n\)），
	共有\(A_{N/2}^n\)种方法.
	而每人又可视为在重叠起来的线段的上面一个或下面一个座位上，
	故对每个人的安排都有两种方式，
	于是\(n\)个人就有\(2^n\)种不同方式.
	所以当\(N\)为偶数时，
	事件\(C\)包含的样本点数为\(2^n A_{N/2}^n\).

	当\(N\)为奇数时，还是将这一排座位折叠起来，
	特别地将位于这一排正中央的座位（折叠后变成半个座位了）视作一个完整的座位，
	然后在垂直平分线一侧的座位（包括正中央的座位）上，
	即在\(1+\frac{N-1}{2}\)个座位上，
	随机地安排\(n\)个人.
	当中央位置不安排人时，
	共有\(2^n A_{(N-1)/2}^n\)种放法；
	当中央位置安排指定的一个人时，
	共有\(n 2^{n-1} A_{(N-1)/2}^{n-1}\)种放法.
	所以当\(N\)为奇数时，
	事件\(C\)包含的样本点数为
	\(2^n A_{(N-1)/2}^n + n 2^{n-1} A_{(N-1)/2}^{n-1}\).
	因此\begin{equation*}
		P(C) = \left\{ \def\arraystretch{1.5} \begin{array}{cl}
			\frac{2^n A_{N/2}^n}{A_N^n},
				& N\ \text{是偶数}, \\
			\frac{2^n A_{(N-1)/2}^n + n 2^{n-1} A_{(N-1)/2}^{n-1}}{A_N^n},
				& N\ \text{是奇数}.
		\end{array} \right.
	\end{equation*}
\end{enumerate}
\end{solution}
\end{example}

\begin{example}[抽签问题]\label{example:概率论基础.抽签问题}
袋中有\(m\)个白球，\(n\)个黑球，
现从中不放回地依次取球，
求第\(k\)次（\(1 \leq k \leq m+n\)）取出的球是白球的概率.
\begin{solution}
设想将第\(i\)次取出的球放入第\(i\)号（\(i=1,2,\dotsc,m+n\)）格子，
则所求概率是第\(k\)号格子放白球的概率.
所有\(m+n\)个格子放球的方式有\((m+n)!\)种，
而当第\(k\)号格子放白球时，
不妨先放第\(k\)号格子，
再放余下\(m+n-1\)个格子，
即共有放球方式\(m(m+n-1)!\)种，
于是所求概率为\begin{equation*}
	p = \frac{m (m+n-1)!}{(m+n)!} = \frac{m}{m+n}.
\end{equation*}
\end{solution}
\end{example}

\hyperref[example:概率论基础.抽签问题]{抽签问题}表明：
抽签的结果与抽签的顺序无关.

\begin{example}[得分问题]
甲、乙两人进行一场比赛，
他们赢得比赛需要的分数分别为\(m\)与\(n\).
在每一局比赛里，他们各自得一分的概率分别为\(p\)和\(q\)，
其中\(p+q=1\).
胜利属于首先取得满分的人.
求每个人得胜的概率.
\begin{solution}
设恰好在\(m+r\)局中，
甲胜了，
要做到这一点，
他必须胜最后一局以及前面\(m+r-1\)局中的\(m-1\)局，
于是他的胜出方式有\(C_{m+r-1}^{m-1} p^m q^r\)种.

甲、乙之间的这场比赛的输赢必然在\(m+n-1\)局内就能决定.
这就是说，
甲可以恰好在\(m\)局中胜出\(m\)局，
或在\(m+1\)局中胜出\(m\)局，...，
或在\(m+n-1\)局中胜出\(m\)局，
所以我们可知甲赢得这一场比赛的概率为\begin{equation*}
	p^m \sum_{r=0}^{n-1} C_{m+r-1}^{m-1} q^r.
\end{equation*}

同理，乙赢得这一场比赛的概率为\begin{equation*}
	q^n \sum_{r=0}^{m-1} C_{n+r-1}^{n-1} p^r.
\end{equation*}
\end{solution}
\end{example}

\begin{example}
30只元件中有27只一等品，3只二等品.
随即将这30只元件均分装入三盒，
求：\begin{enumerate}
	\item 每盒有一只二等品的概率；
	\item 有一盒有三只二等品的概率.
\end{enumerate}
\begin{solution}
30只元件平均分到三盒的总分法有
\(C_{30}^{10} C_{20}^{10} C_{10}^{10} = \frac{30!}{10! 10! 10!}\)种.
\begin{enumerate}
	\item 三只二等品均分到三个盒子的分法有\(3!\)种，
	再将27只一等品均分到三个盒子的分法有
	\(C_{27}^9 C_{18}^9 C_9^9 = \frac{27!}{9! 9! 9!}\)种，
	则\begin{equation*}
		P(\text{每盒有一只二等品})
		=\frac{3! \cdot 27!}{9! 9! 9!} \bigg/ \frac{30!}{10! 10! 10!} \approx 0.2463.
	\end{equation*}

	\item 指定一个盒子并将三只二等品装入这个盒子的指定方式有\(3\)种，
	其余27只一等品的分法（二等品所在盒7只，另外两盒各10只）
	有\(C_{27}^7 C_{20}^{10} C_{10}^{10} = \frac{27!}{7! 10! 10!}\)种，
	则\begin{equation*}
		P(\text{有一盒有三只二等品})
		= \frac{3 \cdot 27!}{7! 10! 10!} \bigg/ \frac{30!}{10! 10! 10!} \approx 0.0887.
	\end{equation*}
\end{enumerate}
\end{solution}
在本例中，我们反复利用以下结果：

将\(n\)个球分成\(k\)组，
第\(i\)组恰有\(n_i\)个球（\(i=1,2,\dotsc,k\)）
且\(n_1+n_2+\dotsb+n_k=n\)，
则所有的分法总数为\begin{equation}
	C_n^{n_1} C_{n-n_1}^{n_2} \dotsm C_{n-(n_1+n_2+\dotsb+n_{k-1})}^{n_k}
	= \frac{n!}{n_1! n_2! \dotsm n_k!}.
\end{equation}
\end{example}

\subsection{几何概型}
\begin{definition}
一个随机试验，若其所有可能结果“等可能”地出现在一个有界的欧氏区域\(\Omega\)内，
则称这个试验的概率模型为\DefineConcept{几何概型}.
\end{definition}
这时所有可能结果构成一个无限集，
从而不能用计数的方法计算事件的概率.

\begin{definition}
如果把\(\Omega\)作为一般的欧氏区域，
\(m(A)\)作为\(A\)的度量（一维为长度，二维为面积，三维为体积……），
就得到几何概型下，一般事件\(A\)的概率计算公式：\begin{equation*}
	P(A) = \frac{m(A)}{m(\Omega)},
\end{equation*}
称这个概率为\DefineConcept{几何概率}.
\end{definition}
由几何概率的定义，
若事件\(B\)的度量为0，
则\(B\)的几何概率\(P(B)=0\).
但\(B\)不一定是不可能事件.

\begin{example}
随机地在单位圆内掷一点\(M\)，
求点\(M\)到原点距离小于\(1/4\)的概率.
\begin{solution}
因为点\(M\)“等可能”地出现在单位圆内，
于是\(M\)出现在单位圆内任何一个面积相等的小区域\(A\)内
因概率相等而与\(A\)的形态与位置无关.
而且\(A\)的概率\(P(A)\)因与\(A\)的面积\(m(A)\)成正比，
即\(P(A)=\lambda m(A)\).
但是\(1 = P(\Omega) = \lambda m(\Omega)\)，
从而有\(\lambda = 1/m(\Omega)\)，
于是得到\(P(A) = m(A)/m(\Omega)\).
这样，\(M\)到原点距离小于\(1/4\)的概率为\begin{equation*}
	p = \frac{\pi (1/4)^2}{\pi \times 1^2} = \frac{1}{16}.
\end{equation*}
\end{solution}
\end{example}

\begin{example}[会面问题]
甲、乙两人约定在早上7点到8点之间在某处会面，
并约定先到者应等候另一人15~min，
过时即离去，求两人能会面的概率.
\begin{solution}
以\(x\)和\(y\)分别表示甲、乙两人到达约会地点的时间
（从7点开始计时，单位：min），
则两人所有可能到达时间为\begin{equation*}
	\Omega = \Set{ (x,y) \given 0 \leq x \leq 60, 0 \leq y \leq 60 }.
\end{equation*}

设事件\(A\)表示两人能会面，
则\begin{equation*}
	A = \Set{ (x,y)\in\Omega \given \abs{x-y} \leq 15 }.
\end{equation*}

那么\begin{equation*}
	P(A) = \frac{m(A)}{m(\Omega)}
	= \frac{60^2 - 45^2}{60^2}
	= \frac{7}{16}.
\end{equation*}
\end{solution}
\end{example}

\begin{example}[布冯投针问题]
%@see: https://mathworld.wolfram.com/BuffonsNeedleProblem.html
设平面上有等距离的平行线.平行线的距离为\(a\).
向平面任意投掷一枚长为\(l\ (l<a)\)的针，
试求针与平行线相交的概率.
\begin{solution}
以\(x\)表示针的中点与最近一条平行线的距离，
又以\(\phi\)表示针与直线间的夹角，
则有\begin{equation*}
	\Omega = \Set{ (\phi,x) \given 0 \leq \phi \leq \pi, 0 \leq x \leq a/2 }.
\end{equation*}
令\(A\)为“针与平行线相交”，
则\begin{equation*}
	A = \Set*{ (\phi,x)\in\Omega \given x \leq \frac{l}{2} \sin\phi },
\end{equation*}
从而\begin{equation*}
	m(A) = \int_0^\pi\frac{l}{2} \sin\phi \dd{\phi},
\end{equation*}\begin{equation*}
	m(\Omega) = \pi \cdot \frac{a}{2},
\end{equation*}
于是\begin{equation*}
	P(A)
	= \frac{m(A)}{m(\Omega)}
	= \frac{2l}{\pi a}.
\end{equation*}
\end{solution}
\end{example}
