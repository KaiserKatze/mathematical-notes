\section{仿射几何}
\subsection{陪集的交与联}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P435
设\(V\)是域\(F\)上的一个线性空间，
\(\{S_i\}_{i \in I}\)是一个有标集族.
如果\begin{equation*}
	(\forall i \in I)
	(\exists W \AlgebraSubstructure V)
	[
		\text{$S_i$是$W$的一个陪集}
	],
\end{equation*}
则称“\(\{S_i\}_{i \in I}\)是\(V\)的一个\DefineConcept{陪集族}”.

\begin{proposition}
设\(\{S_i\}_{i \in I}\)是域\(F\)上线性空间\(V\)的一个陪集族，
则\(V\)是包含\(\bigcup_{i \in I} S_i\)的一个陪集.
\begin{proof}
因为\(V\)是一个陪集，
并且\((\forall i \in I)[V \supseteq S_i]\)，
所以\(V \supseteq \bigcup_{i \in I} S_i\).
\end{proof}
\end{proposition}

\begin{lemma}\label{theorem:线性空间.商空间.陪集.线性空间中全体陪集对联运算封闭}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P438 定理10.2.1(1)
设\(V\)是域\(F\)上的一个线性空间，
\(W_1,W_2\)是\(V\)的两个子空间，
向量\(\alpha_1,\alpha_2 \in V\)，
则\begin{equation*}
	\Gamma
	\defeq
	\bigcap\Set{
		X
		\given
		X \supseteq (\alpha_1 + W_1) \cup (\alpha_2 + W_2),
		\text{$X$是一个陪集}
	}
\end{equation*}
是陪集.
\begin{proof}
设陪集\(\beta + U\)满足\(\beta + U \supseteq (\alpha_1 + W_1) \cup (\alpha_2 + W_2)\).
由\(\beta + U \supseteq \alpha_1 + W_1\)
可得\(\alpha_1 - \beta \in U\)和\(W_1 \subseteq U\)，
即\(\Span\{\alpha_1 - \beta\} + W_1 \subseteq U\).
由\(\beta + U \supseteq \alpha_2 + W_2\)
可得\(\alpha_2 - \beta \in U\)和\(W_2 \subseteq U\)，
即\(\Span\{\alpha_2 - \beta\} + W_2 \subseteq U\).
%\cref{equation:集合论.集合代数公式6-8}
于是有\begin{equation*}
	\Span\{\alpha_1 - \beta,\alpha_2 - \beta\} + W_1 + W_2 \subseteq U.
\end{equation*}
令\(U_0 \defeq \Span\{\alpha_1 - \alpha_2\} + W_1 + W_2\).
由于\(
	\alpha_1 - \alpha_2
	= (\alpha_1 - \beta) - (\alpha_2 - \beta)
	\in \Span\{\alpha_1 - \beta,\alpha_2 - \beta\}
\)，
所以\(
	\Span\{\alpha_1 - \alpha_2\}
	\subseteq
	\Span\{\alpha_1 - \beta,\alpha_2 - \beta\}
\)，
从而有\(U \supseteq U_0\).
因此\(
	\alpha_1 + U_0
	\subseteq
	\alpha_1 + U
	= \beta + U
\)，
这就说明\(\alpha_1 + U_0\)是包含\((\alpha_1 + W_1) \cup (\alpha_2 + W_2)\)的每一个陪集的子集，
于是由\cref{equation:集合论.集合代数公式6-9}
可知\begin{equation*}
	\alpha_1 + U_0
	\subseteq
	\Gamma.
\end{equation*}

由\(U_0 \supseteq W_1\)
可得\(\alpha_1 + W_1 \subseteq \alpha_1 + U_0\).
由\(U_0 \supseteq \Span\{\alpha_1 - \alpha_2\}\)
可得\(
	\alpha_2
	= \alpha_1 - (\alpha_1 - \alpha_2)
	\in \alpha_1 + \Span\{\alpha_1 - \alpha_2\}
	\subseteq \alpha_1 + U_0
\).
由\(\alpha_2 \in \alpha_1 + U_0\)
可得\(\alpha_2 + U_0 = \alpha_1 + U_0\).
由\(U_0 \supseteq W_2\)
可得\(
	\alpha_2 + W_2
	\subseteq
	\alpha_2 + U_0
	= \alpha_1 + U_0
\).
因此\begin{equation*}
	(\alpha_1 + W_1) \cup (\alpha_2 + W_2)
	\subseteq
	\alpha_1 + U_0.
\end{equation*}
由上可知\(\alpha_1 + U_0\)是包含\((\alpha_1 + W_1) \cup (\alpha_2 + W_2)\)的一个陪集，
即\begin{equation*}
	\alpha_1 + U_0
	\in
	\Set{
		X
		\given
		X \supseteq (\alpha_1 + W_1) \cup (\alpha_2 + W_2),
		\text{$X$是一个陪集}
	},
\end{equation*}
于是由\cref{equation:集合论.集合代数公式6-5}
可知\begin{equation*}
	\Gamma
	\subseteq
	\bigcap\{\alpha_1 + U_0\}
	=
	\alpha_1 + U_0.
\end{equation*}

综上所述，\(\Gamma = \alpha_1 + U_0\).
\end{proof}
\end{lemma}

\begin{definition}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P436
设\(S_1\)和\(S_2\)是\(V\)中两个陪集.
把包含\(\mathscr{S} \defeq S_1 \cup S_2\)的所有陪集之交\begin{equation*}
	\bigcap\Set{
		X
		\given
		X \supseteq \mathscr{S},
		\text{$X$是一个陪集}
	}
\end{equation*}
称为“陪集\(S_1\)和\(S_2\)的\DefineConcept{联}”，
记作\(S_1 \vee S_2\).
\end{definition}

\begin{definition}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P436 定义10.1.1
设\(\{S_i\}_{i \in I}\)是\(V\)中一个陪集族.
把包含\(\mathscr{S} \defeq \bigcup_{i \in I} S_i\)的所有陪集之交\begin{equation*}
	\bigcap\Set{
		X
		\given
		X \supseteq \mathscr{S},
		\text{$X$是一个陪集}
	}
\end{equation*}
称为“陪集族\(\{S_i\}_{i \in I}\)的\DefineConcept{联}”，
记作\(\bigvee_{i \in I} S_i\).
\end{definition}

\cref{theorem:线性空间.商空间.陪集.线性空间中全体陪集对联运算封闭} 说明：
线性空间\(V\)中全体陪集\(
	\mathscr{C}
	\defeq
	\Set{
		\alpha + W
		\given
		\alpha \in V,
		W \AlgebraSubstructure V
	}
\)对“陪集的联”运算封闭.

\cref{theorem:线性空间.商空间.陪集.线性空间中全体陪集对联运算封闭} 还说明：\begin{align}
	\bigvee_{i=1}^2 (\alpha_i + W_i)
	&= \alpha_1 + \Span\{\alpha_1 - \alpha_2\} + W_1 + W_2,
		\label{equation:仿射几何.两个陪集的联}
		\\
	\bigvee_{i=1}^3 (\alpha_i + W_i)
	&= \alpha_1 + \Span\{\alpha_1 - \alpha_2,\alpha_1 - \alpha_3\} + W_1 + W_2 + W_3,
		% \label{equation:仿射几何.三个陪集的联}
		\\
	\bigvee_{i=1}^n (\alpha_i + W_i)
	&= \alpha_1 + \Span\{\alpha_1 - \alpha_2,\dotsc,\alpha_1 - \alpha_n\}
		+ \sum_{i=1}^n W_i.
		% \label{equation:仿射几何.n个陪集的联}
\end{align}

\begin{property}
陪集的联运算适合交换律，即对于任意陪集\(x,y\)，成立\begin{equation}
	x \vee y = y \vee z.
\end{equation}
\begin{proof}
显然\(
	x \vee y
	= \bigcap\Set{
		c \in \mathscr{C}
		\given
		c \supseteq x \cup y
	}
	= \bigcap\Set{
		c \in \mathscr{C}
		\given
		c \supseteq y \cup x
	}
	= y \vee x
\).
\end{proof}
\end{property}

\begin{property}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P436
陪集的联运算适合结合律，即对于任意陪集\(x,y,z\)，成立\begin{equation}
	(x \vee y) \vee z = x \vee (y \vee z).
\end{equation}
\begin{proof}
任取\(x,y,z \in \mathscr{C}\).
由定义可知\(
	x \vee y
	\supseteq
	x \cup y
\)，
于是，对于任意\(c \in \mathscr{C}\)，
当\(c \supseteq (x \vee y) \cup z\)时，
必有\(c \supseteq (x \cup y) \cup z\).
因此\begin{equation*}
	(x \vee y) \vee z
	= \bigcap\Set{
		c \in \mathscr{C}
		\given
		c \supseteq (x \vee y) \cup z
	}
	\supseteq
	\bigcap\Set{
		c \in \mathscr{C}
		\given
		c \supseteq (x \cup y) \cup z
	}.
\end{equation*}
与此同时，由\(x \cup y \subseteq (x \cup y) \cup z\)可知，
包含\((x \cup y) \cup z\)的任意一个陪集\(c\)必定包含\(x \cup y\)，
由定义可知这样的\(c\)必定包含\(x \vee y\).
于是当\(c \supseteq (x \cup y) \cup z\)时，
必有\(c \supseteq (x \vee y) \cup z\).
因此\begin{equation*}
	(x \vee y) \vee z
	= \bigcap\Set{
		c \in \mathscr{C}
		\given
		c \supseteq (x \vee y) \cup z
	}
	\subseteq
	\bigcap\Set{
		c \in \mathscr{C}
		\given
		c \supseteq (x \cup y) \cup z
	}.
\end{equation*}
综上所述\begin{equation*}
	(x \vee y) \vee z
	= \bigcap\Set{
		c \in \mathscr{C}
		\given
		c \supseteq (x \cup y) \cup z
	}.
\end{equation*}
利用对称性可得\begin{equation*}
	x \vee (y \vee z)
	= \bigcap\Set{
		c \in \mathscr{C}
		\given
		c \supseteq x \cup (y \cup z)
	},
\end{equation*}
于是\((x \vee y) \vee z = x \vee (y \vee z)\).
\end{proof}
\end{property}

通过下面的例子可以看出“陪集的联”这个运算的几何意义.
\begin{example}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P436 例10.1
设\(P,Q\)是几何空间\(V \defeq \mathbb{R}^3\)中的两个点，它们的坐标向量分别是\(\alpha,\beta\).
显然\(\{\alpha\}\)是以\(\alpha\)为代表的零空间的陪集，
\(\{\beta\}\)是以\(\beta\)为代表的零空间的陪集.
假设\(V\)的子空间\(W\)满足\(
	\{\alpha\} \vee \{\beta\}
	= \alpha + W
	= \beta + W
\)，
那么\(\alpha - \beta \in W\).
显然\(U \defeq \Span\{\alpha - \beta\}\)是\(V\)的一个子空间，
并且\(\alpha + U = \beta + U\)就是包含\(\alpha\)和\(\beta\)的一个陪集，
因此\(W = U\).
这表明\(\{\alpha\} \vee \{\beta\}\)是过\(P,Q\)两点的直线.
\end{example}

\begin{example}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P436 例10.2
%@see: https://math.stackexchange.com/q/5086322/591741
在几何空间\(V \defeq \mathbb{R}^3\)中，
取两个陪集\(
	S_1 \defeq \alpha + 0,
	S_2 \defeq \beta + U
\)，
其中\(U\)是\(V\)的一个1维子空间，
且向量\(\alpha,\beta \in V\)，
但\(\alpha \notin S_2\).
显然\(S_1\)是一个点，\(S_2\)是一条直线.
假设\(V\)的子空间\(W_1\)满足\(
	S_1 \vee S_2
	= \alpha + W_1
	= \beta + W_1
\)，
那么\(\alpha - \beta \in W_1\)
且\(U \subseteq W_1\)，
于是\(
	W_2
	\allowbreak
	\defeq \Span\{\alpha - \beta\} + U
	\allowbreak
	\subseteq W_1
\).
显然\(\alpha + W_2 = \beta + W_2\)是包含\(S_1\)和\(S_2\)的一个陪集，
因此\(W_2 = W_1\).
由于\(\alpha \notin S_2\)，
所以\(\alpha - \beta \notin U\)，
因此\(\dim W_1 = 2\).
这表明\(S_1 \vee S_2\)是过点\(S_1\)与直线\(S_2\)的平面.
\end{example}

\begin{example}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P437 习题 2.
设\(V\)是域\(F\)上的一个线性空间，\(W\)是\(V\)的一个子空间，
向量\(\alpha \in W\).
证明：\((\alpha + W) \vee \{0\} = \Span\{\alpha\} + W\).
%TODO proof
\end{example}

\subsection{陪集的维数}
\begin{definition}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P437 定义10.1.2
设\(V\)是域\(F\)上的一个线性空间，\(W\)是\(V\)的一个子空间，
向量\(\alpha \in V\).
定义：\begin{equation}
	\dim(\alpha + W)
	\defeq
	\dim W,
\end{equation}
称之为“陪集\(\alpha + W\)的\DefineConcept{维数}（the \emph{dimension} of \(\alpha + W\)）”.
\end{definition}

\begin{example}
零陪集（即域\(F\)上线性空间\(V\)中以零向量\(0\)为代表的零子空间\(0\)的陪集\(0 \defeq 0+0\)）的
维数为\(\dim 0 = 0\).
\end{example}

\subsection{仿射几何}
\begin{definition}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P437 定义10.1.3
设\(V\)是域\(F\)上的一个线性空间，
\(S\)是\(V\)中一个陪集.
把\(S\)中全体陪集\begin{equation*}
	\Set{
		\alpha + W
		\given
		\alpha \in V,
		W \AlgebraSubstructure V,
		\alpha + W \subseteq S
	}
\end{equation*}
称为“（域\(F\)上线性空间\(V\)中）陪集\(S\)上的\DefineConcept{仿射几何}（affine geometry）”，
记作\(\mathcal{A}(S)\)；
把陪集\(S\)的维数\(\dim S\)
称为“\(\mathcal{A}(S)\)的\DefineConcept{维数}”，
记作\(\dim\mathcal{A}(S)\)；
将\(\mathcal{A}(S)\)中\(0\)维元素称为\DefineConcept{点}；
将\(\mathcal{A}(S)\)中\(1\)维元素称为\DefineConcept{直线}；
将\(\mathcal{A}(S)\)中\(2\)维元素称为\DefineConcept{平面}；
将\(\mathcal{A}(S)\)中\(\dim S-1\)维元素称为\DefineConcept{超平面}.
\end{definition}
\begin{remark}
应该注意到，“线性空间\(V\)中某个陪集的仿射几何”
与“线性空间\(V\)对于某个子空间的商空间”是完全不同的两个概念.
\end{remark}

\begin{definition}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P437 定义10.1.3
设\(V\)是域\(F\)上的一个线性空间，
\(R\)和\(S\)是\(V\)中两个陪集.
如果\(R\)是\(S\)的子集，
则称“\(\mathcal{A}(R)\)是\(\mathcal{A}(S)\)的\DefineConcept{子几何}”.
\end{definition}

\subsection{仿射空间}
\begin{definition}
%@see: 《基础代数（第二卷）》（席南华） P161 定义4.1
设\(A\)是一个非空集合，
\(V\)是域\(F\)上的一个线性空间.
若映射\(f\colon A \times V \to A\)满足\begin{gather*}
	(\forall p \in A)
	(\forall x,y \in V)
	[
		f(f(p,x),y)
		= f(p,x+y)
	], \\
	(\forall p \in A)
	[
		0 \in V
		\implies
		f(p,0) = p
	], \\
	(\forall p,q \in A)
	(\exists! x \in V)
	[
		f(p,x) = q
	],
\end{gather*}
则称“\((A,f)\)是与线性空间\(V\)关联的\DefineConcept{仿射空间}”.
把\(A\)中的每一个元素称为“仿射空间\(A\)中的一个\DefineConcept{点}”.
对于\(A\)中任意两点\(p,q\)，把满足\(p + x = q\)的向量\(x \in V\)
称为“连接点\(p\)和点\(q\)的\DefineConcept{向量}”，记作\(\vec{pq}\)或\(q - p\).
把线性空间\(V\)的维数\(\dim V\)称为“仿射空间\(A\)的\DefineConcept{维数}”，记为\(\dim A\).
\end{definition}

\begin{example}
%@see: 《基础代数（第二卷）》（席南华） P162 例4.2
设\(V\)是域\(F\)上的一个线性空间.
证明：\(V\)是一个仿射空间.
%TODO proof
\end{example}

\begin{example}
%@see: 《基础代数（第二卷）》（席南华） P162 例4.3
设\(\mathcal{A}(S)\)是域\(F\)上线性空间\(V\)中陪集\(S\)上的仿射几何.
证明：\(\mathcal{A}(S)\)中的每一个元素都是一个仿射空间.
\begin{proof}
设\(S' \in \mathcal{A}(S)\)，
那么存在\(\alpha \in V\)，存在\(W \AlgebraSubstructure V\)，
使得\(S' = \alpha + W \subseteq S\).
任意取定\(p,q \in S'\)，
则存在\(w_1,w_2 \in W\)
使得\(p = \alpha + w_1, q = \alpha + w_2\).
对于任意\(x,y \in W\)，
显然有\begin{gather*}
	% 向量加法的结合律
	(p + x) + y
	= ((\alpha + w_1) + x) + y
	= (\alpha + w_1) + (x + y)
	= p + (x + y),
	\\
	p + 0
	= (\alpha + w_1) + 0
	= \alpha + w_1
	= p.
\end{gather*}
同时，我们还有\begin{equation*}
	p + x = q
	\iff
	(\alpha + w_1) + x = \alpha + w_2
	\iff
	x = w_2 - w_1 \in W,
\end{equation*}
这就说明\(
	(\exists! x \in W)
	[
		f(p,x) = q
	]
\).
综上所述，\((S',+)\)是与\(W\)关联的仿射空间.
\end{proof}
\end{example}

\subsection{仿射映射}
\begin{definition}
%@see: 《基础代数（第二卷）》（席南华） P162
设\(A\)是与线性空间\(V\)关联的仿射空间，
向量\(\alpha \in V\)，
把映射\begin{equation*}
	\tau_\alpha\colon A \to A,
	p \mapsto p + \alpha
\end{equation*}
称为“（仿射空间\(A\)上）由向量\(\alpha\)决定的\DefineConcept{平移变换}”.
\end{definition}

\begin{theorem}
%@see: 《基础代数（第二卷）》（席南华） P162
设\(V\)是域\(F\)上的一个线性空间，
\(A\)是与线性空间\(V\)关联的仿射空间，
\(\alpha,\beta \in V\)，
\(\tau_\alpha,\tau_\beta\)分别是\(A\)上由\(\alpha,\beta\)决定的平移变换，
\(I\)是\(A\)上的恒等映射，
则\begin{gather*}
	\tau_\alpha \tau_\beta = \tau_{\alpha + \beta}, \\
	\tau_{-\alpha} \tau_\alpha = I.
\end{gather*}
\end{theorem}
\begin{remark}
%@see: 《基础代数（第二卷）》（席南华） P162
上述定理说明：
两个平移的复合还是平移，
平移的逆映射也是平移.
全体平移对复合成群，它同构于线性空间\(V\)的加法群.
不难验证：
对于任意\(x,y \in F\)，
如果令\begin{equation*}
	x \tau_\alpha + y \tau_\beta
	\defeq \tau_{x \alpha + y \beta},
\end{equation*}
则\(A\)的全体平移就成为一个线性空间（记作\(A^\sharp\)），它与\(V\)同构.
\end{remark}

\begin{definition}
%@see: 《基础代数（第二卷）》（席南华） P163 例4.6
设\(V\)是域\(F\)上的一个线性空间，
\(A\)是与线性空间\(V\)关联的仿射空间，
\(o\)是\(A\)中的一个点，
数\(\lambda \in F\)，
把映射\begin{equation*}
	\delta_\lambda\colon A \to A,
	p \mapsto o + \lambda\vec{op}
\end{equation*}
称为“（仿射空间\(A\)上）以点\(o\)为中心、\(\lambda\)为伸缩率的\DefineConcept{伸缩变换}（dilatation）”.
\end{definition}

\begin{definition}
%@see: 《基础代数（第二卷）》（席南华） P163 定义4.4
设\(V,V'\)都是域\(F\)上的线性空间，
\(A,A'\)分别是与线性空间\(V,V'\)关联的仿射空间.
如果存在线性映射\(g \in \Hom(V,V')\)
使得映射\(f\colon A \to A'\)满足\begin{equation*}
%@see: 《基础代数（第二卷）》（席南华） P163 (4.1.1)
	(\forall p \in A)
	(\forall v \in V)
	[
		f(p + v)
		= f(p) + g(v)
	],
\end{equation*}
则称“\(f\)是从\(A\)到\(A'\)的一个\DefineConcept{仿射映射}”；
把\(g\)称为“仿射映射\(f\)的\DefineConcept{线性部分}”
或“仿射映射\(f\)的\DefineConcept{微分}”，
记作\(\dd{f}\).
\end{definition}

\begin{proposition}\label{theorem:仿射空间.仿射映射的微分的唯一性}
%@see: 《基础代数（第二卷）》（席南华） P163
设\(A,A'\)都是域\(F\)上的仿射空间，
\(p,q\)是\(A\)中两点，
\(f\)是从\(A\)到\(A'\)的一个仿射映射，
则\(
%@see: 《基础代数（第二卷）》（席南华） P163 (4.1.2)
	\vec{f(p) f(q)}
	= \dd{f}(\vec{pq})
\).
\end{proposition}
\begin{remark}
由\cref{theorem:仿射空间.仿射映射的微分的唯一性} 可以看出，
仿射映射的微分存在且唯一.
\end{remark}

\subsection{陪集之间的相交关系}
\begin{definition}
设\(V\)是域\(F\)上的一个线性空间，
\(U\)和\(W\)是\(V\)的两个子空间，
向量\(\alpha,\beta \in V\).
\begin{itemize}
	\item 如果\((\alpha + U) \cap (\beta + W) \neq \emptyset\)，
	则称“陪集\(\alpha + U\)与\(\beta + W\) \DefineConcept{相交}”.

	\item 反之，如果\((\alpha + U) \cap (\beta + W) = \emptyset\)，
	则称“陪集\(\alpha + U\)与\(\beta + W\) \DefineConcept{不相交}”.
\end{itemize}
\end{definition}

\begin{property}
陪集之间的相交关系具有自反性，
即对于线性空间\(V\)中任意一个陪集\(x\)，
有\(x\)与\(x\)相交.
\end{property}

\begin{property}
陪集之间的相交关系具有对称性，
即对于线性空间\(V\)中任意两个陪集\(x\)和\(y\)，
当\(x\)与\(y\)相交时，必有\(y\)与\(x\)相交.
\end{property}

\begin{property}
陪集之间的相交关系不具有传递性.
\begin{proof}
设\(V \defeq \mathbb{R}^2\).
取\begin{gather*}
	\alpha_1 \defeq (1,0)^T,
	\qquad
	\alpha_2 \defeq (0,1)^T,
	\qquad
	W_1 \defeq \Span\{\alpha_1\},
	\qquad
	W_2 \defeq \Span\{\alpha_2\}, \\
	S_1 \defeq 0 + W_1,
	\qquad
	S_2 \defeq 0 + W_2,
	\qquad
	S_3 \defeq \alpha_1 + W_1,
\end{gather*}
则\(S_1\)与\(S_2\)相交，\(S_1\)也与\(S_3\)相交，
但是\(S_2\)与\(S_2\)不相交.
\end{proof}
\end{property}

\subsection{陪集之间的平行关系}
\begin{definition}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P437 定义10.2.1
设\(V\)是域\(F\)上的一个线性空间，
\(U\)和\(W\)是\(V\)的两个子空间，
向量\(\alpha,\beta \in V\).
如果\(U \subseteq W\)或\(W \subseteq U\)，
则称“陪集\(\alpha + U\)与\(\beta + W\) \DefineConcept{平行}”，
记作\((\alpha + U) \parallel (\beta + W)\)；
反之，称“陪集\(\alpha + U\)与\(\beta + W\) \DefineConcept{不平行}”，
记作\((\alpha + U) \nparallel (\beta + W)\).
\end{definition}

\begin{property}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P437
陪集之间的平行关系具有自反性，
即对于线性空间\(V\)中任意一个陪集\(x\)，
有\(x \parallel x\).
\end{property}

\begin{property}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P437
陪集之间的平行关系具有对称性，
即对于线性空间\(V\)中任意两个陪集\(x\)和\(y\)，
当\(x \parallel y\)时，必有\(y \parallel x\).
\end{property}

\begin{property}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P438
陪集之间的平行关系不具有传递性.
\begin{proof}
设\(V \defeq \mathbb{R}^3\).
取\begin{gather*}
	\alpha_1 \defeq (0,0,1)^T,
	\qquad
	\alpha_2 \defeq (0,0,2)^T, \\
	W_1 \defeq \Span\{(1,0,0)^T\},
	\qquad
	W_2 \defeq \Span\{(0,1,0)^T\},
	\qquad
	W \defeq W_1 + W_2, \\
	S_1 \defeq \alpha_1 + W_1,
	\qquad
	S_2 \defeq \alpha_2 + W_2,
	\qquad
	S_3 \defeq W,
\end{gather*}
则有\(
	S_1 \parallel S_3,
	S_2 \parallel S_3
\)，
但是\(S_1 \nparallel S_2\).
\end{proof}
\end{property}

%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P440
既不平行、又不相交的两条直线称为\DefineConcept{交错直线}或\DefineConcept{异面直线}.

\subsection{仿射性质}
\begin{definition}
设\(\AutoTuple{S}{n}\)是仿射几何\(\mathcal{A}(V)\)中的\(n\ (n\geq2)\)个陪集，
记\(S \defeq \bigvee_{i=1}^n S_i\).
\begin{itemize}
	\item 如果\(\dim S \leq 1\)，
	则称“陪集\(\AutoTuple{S}{n}\) \DefineConcept{共线}（collinear）”.

	\item 如果\(\dim S \leq 2\)，
	则称“陪集\(\AutoTuple{S}{n}\) \DefineConcept{共面}（coplanar）”.
\end{itemize}
\end{definition}

\begin{theorem}\label{theorem:仿射几何.陪集的交非空的充分必要条件1}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P438 定理10.2.1(2)
设\(V\)是域\(F\)上的一个线性空间，
\(U\)和\(W\)是\(V\)的两个子空间，
向量\(\alpha,\beta \in V\)，
则\((\alpha + U) \cap (\beta + W) \neq \emptyset\)
当且仅当\(\alpha - \beta \in U + W\).
\begin{proof}
\((\alpha + U) \cap (\beta + W) \neq \emptyset\)
当且仅当存在\(\gamma \in U\)和\(\delta \in W\)，
使得\(\alpha + \gamma = \beta + \delta\)，
即\(\beta - \alpha = \gamma - \delta \in U + W\).
\end{proof}
\end{theorem}

\begin{theorem}\label{theorem:仿射几何.陪集的交为空的充分必要条件1}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P438 定理10.2.1(3)
设\(V\)是域\(F\)上的一个线性空间，
\(U\)和\(W\)是\(V\)的两个子空间，
向量\(\alpha,\beta \in V\)，
则\((\alpha + U) \cap (\beta + W) = \emptyset\)
当且仅当\(\dim((\alpha + U) \vee (\beta + W)) = \dim(U + W) + 1\).
\begin{proof}
由\cref{theorem:仿射几何.陪集的交非空的充分必要条件1} 可知
\((\alpha + U) \cap (\beta + W) = \emptyset\)
当且仅当\(\alpha - \beta \notin U + W\)，
即\(\Span\{\alpha - \beta\}\)与\(U + W\)的交集是零子空间.
再由 \hyperref[equation:仿射几何.两个陪集的联]{\(
	(\alpha + U) \vee (\beta + W)
	= \alpha + \Span\{\alpha - \beta\} + U + W
\)}、
陪集的维数的定义\(
	\dim(\alpha + \Span\{\alpha - \beta\} + U + W)
	= \dim(\Span\{\alpha - \beta\} + U + W)
\)
以及\hyperref[theorem:线性空间.子空间.子空间的维数公式]{子空间的维数公式}\begin{align*}
	\dim(\Span\{\alpha - \beta\} + U + W)
	&= \dim\Span\{\alpha - \beta\} + \dim(U + W) \\
	&\hspace{20pt}
		- \dim(\Span\{\alpha - \beta\} \cap (U + W)) \\
	&= \dim\Span\{\alpha - \beta\} + \dim(U + W) \\
	&= 1 + \dim(U + W)
\end{align*}
可知\(
	\dim((\alpha + U) \vee (\beta + W))
	= \dim(U + W) + 1
\).
\end{proof}
\end{theorem}

\begin{theorem}\label{theorem:商空间.陪集之间成立包含关系的必要条件2}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P439 定理10.2.2(1)
设\(V\)是域\(F\)上的一个线性空间，
\(U\)和\(W\)是\(V\)的两个子空间，
向量\(\alpha,\beta \in V\).
如果\(\alpha + U \subseteq \beta + W\)，
则\(\dim(\alpha + U) \leq \dim(\beta + W)\).
\begin{proof}
假设\(\alpha + U \subseteq \beta + W\).
由\cref{theorem:商空间.陪集之间成立包含关系的必要条件1}
可知\(U \subseteq W\).
由\cref{theorem:子空间.同一线性空间的两个子空间成立包含关系的必要条件}
可知\(U\)是\(W\)的一个子空间.
由\cref{theorem:线性空间.线性空间及其子空间的维数序关系}
可知\(\dim U \leq \dim W\).
于是\(
	\dim(\alpha + U)
	= \dim U
	\leq \dim W
	= \dim(\beta + W)
\).
\end{proof}
%\cref{theorem:向量空间.两个非零子空间的关系1}
\end{theorem}

\begin{theorem}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P439 定理10.2.2(1)
设\(V\)是域\(F\)上的一个线性空间，
\(U\)和\(W\)是\(V\)的两个子空间，
向量\(\alpha,\beta \in V\).
如果\(\alpha + U \subseteq \beta + W\)，
且\(\dim(\alpha + U) = \dim(\beta + W)\)，
则\(\alpha + U = \beta + W\).
\begin{proof}
假设\(\alpha + U \subseteq \beta + W\)，
那么从\cref{theorem:商空间.陪集之间成立包含关系的必要条件2} 的证明过程中可以看出
\(U\)是\(W\)的一个子空间.
假设\(\dim(\alpha + U) = \dim(\beta + W)\)，
那么由\(
	\dim(\alpha + U) = \dim U,
	\dim(\beta + W) = \dim W
\)
可知\(\dim U = \dim W\).
再由\cref{theorem:子空间.与线性空间维数相等的子空间}
可知\(U = W\).
于是\(\alpha + U = \alpha + W \subseteq \beta + W\).
由\cref{theorem:商空间.陪集之间成立包含关系的必要条件1}
可知\(\alpha - \beta \in W\).
最后由\cref{theorem:商空间.陪集之间成立包含关系的等价条件1}
可知\(\alpha + U = \beta + W\).
\end{proof}
%\cref{theorem:向量空间.两个非零子空间的关系2}
\end{theorem}

\begin{theorem}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P439 定理10.2.2(2)
设\(V\)是域\(F\)上的一个线性空间，
\(U\)和\(W\)是\(V\)的两个子空间，
向量\(\alpha,\beta \in V\).
如果\((\alpha + U) \cap (\beta + W) \neq \emptyset\)，
则\begin{equation*}
	\dim((\alpha + U) \vee (\beta + W))
	+ \dim((\alpha + U) \cap (\beta + W))
	= \dim(\alpha + U)
	+ \dim(\beta + W).
\end{equation*}
\begin{proof}
假设\((\alpha + U) \cap (\beta + W) \neq \emptyset\).
任意取定\(\gamma \in (\alpha + U) \cap (\beta + W)\)，
那么有\(\gamma \in \alpha + U\)和\(\gamma \in \beta + W\)同时成立.
由\cref{theorem:商空间.陪集的元素的性质,theorem:商空间.子空间相同的两个陪集相等的等价条件}
可知\(\alpha + U = \gamma + U\)且\(\beta + W = \gamma + W\).
由\cref{theorem:商空间.代表相同的两个陪集的交}
可知\begin{equation*}
	(\alpha + U) \cap (\beta + W)
	= (\gamma + U) \cap (\gamma + W) \\
	= \gamma + (U \cap W).
\end{equation*}
由\cref{equation:仿射几何.两个陪集的联}
可知\begin{equation*}
	(\alpha + U) \vee (\beta + W)
	= (\gamma + U) \vee (\gamma + W)
	= \gamma + (U + W).
\end{equation*}
最后由\hyperref[theorem:线性空间.子空间.子空间的维数公式]{子空间的维数公式}可知\begin{align*}
	&\hspace{-20pt}
	\dim((\alpha + U) \vee (\beta + W))
		+ \dim((\alpha + U) \cap (\beta + W)) \\
	&= \dim(\gamma + (U \cap W))
		+ \dim(\gamma + (U + W)) \\
	&= \dim(U + W)
		+ \dim(U \cap W)
	= \dim U + \dim W \\
	&= \dim(\alpha + U) + \dim(\beta + W).
	\qedhere
\end{align*}
\end{proof}
\end{theorem}
\begin{remark}
公式\(
	\dim((\alpha + U) \vee (\beta + W))
	+ \dim((\alpha + U) \cap (\beta + W))
	= \dim(\alpha + U)
	+ \dim(\beta + W)
\)
在形式上
与\hyperref[theorem:线性空间.子空间.子空间的维数公式]{子空间的维数公式}
\(
	\dim(U + W)
	+ \dim(U \cap W)
	= \dim U + \dim W
\)高度相似.
\end{remark}

\begin{theorem}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P439 定理10.2.2(3)
设\(V\)是域\(F\)上的一个线性空间，
\(U\)和\(W\)是\(V\)的两个子空间，
向量\(\alpha,\beta \in V\).
如果\((\alpha + U) \cap (\beta + W) \neq \emptyset\)，
则\((\alpha + U) \parallel (\beta + W)\)
当且仅当\(\alpha + U \subseteq \beta + W\)
或\(\alpha + U \supseteq \beta + W\).
\begin{proof}
假设\((\alpha + U) \cap (\beta + W) \neq \emptyset\).
任意取定\(\gamma \in (\alpha + U) \cap (\beta + W)\)，
那么有\(\gamma \in \alpha + U\)和\(\gamma \in \beta + W\)同时成立.
由\cref{theorem:商空间.陪集的元素的性质,theorem:商空间.子空间相同的两个陪集相等的等价条件}
可知\(\alpha + U = \gamma + U\)且\(\beta + W = \gamma + W\).
这时\begin{align*}
	&\hspace{-20pt}
	(\alpha + U) \parallel (\beta + W)
	\iff (U \subseteq W) \lor (U \supseteq W)
		\tag{陪集平行的定义} \\
	&\iff (\gamma + U \subseteq \gamma + W) \lor (\gamma + U \supseteq \gamma + W)
		\tag{\cref{theorem:商空间.陪集之间成立包含关系的等价条件1}} \\
	&\iff (\alpha + U \subseteq \beta + W) \lor (\alpha + U \supseteq \beta + W).
	\tag*\qedhere
\end{align*}
\end{proof}
\end{theorem}

\begin{theorem}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P439 定理10.2.2(3)
设\(V\)是域\(F\)上的一个线性空间，
\(U\)和\(W\)是\(V\)的两个子空间，
向量\(\alpha,\beta \in V\).
如果\((\alpha + U) \cap (\beta + W) = \emptyset\)，
则\((\alpha + U) \parallel (\beta + W)\)
当且仅当\begin{equation*}
	\dim((\alpha + U) \vee (\beta + W))
	= \max\{\dim(\alpha + U),\dim(\beta + W)\} + 1.
\end{equation*}
\begin{proof}
假设\((\alpha + U) \cap (\beta + W) = \emptyset\)，
那么由\cref{theorem:仿射几何.陪集的交为空的充分必要条件1}
可知\begin{equation*}
	\dim((\alpha + U) \vee (\beta + W)) = \dim(U + W) + 1.
\end{equation*}
由\cref{theorem:线性空间.子空间.子空间的维数公式}
可知\begin{equation*}
	\dim(U + W)
	=  \dim U + \dim W - \dim(U \cap W).
\end{equation*}
于是\begin{align*}
	&\hspace{-20pt}
	\dim((\alpha + U) \vee (\beta + W))
	= \max\{\dim(\alpha + U),\dim(\beta + W)\} + 1 \\
	&\iff
	\dim(U + W)
	% 比较上式和待证的等式可得
	= \max\{\dim(\alpha + U),\dim(\beta + W)\} \\
	&\iff
	\dim(U + W)
	= \max\{\dim U,\dim W\}
		\tag{陪集的维数的定义} \\
	&\iff
	(U \subseteq W) \lor (U \supseteq W)
		\tag{\cref{theorem:子空间.子空间的和的维数等于最大子空间维数的等价条件}} \\
	&\iff	% 陪集平行的定义
	(\alpha + U) \parallel (\beta + W).
	\tag*\qedhere
\end{align*}
\end{proof}
\end{theorem}
\begin{remark}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P440 推论1
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P440 推论2
从上述定理可以看出：
在2维仿射几何中，
两个不同点的联是一条直线，
两条非平行直线的交是一个点；
在3维仿射几何中，
两个不同点的联是一条直线，
两个非平行平面的交是一条直线，
交于一点的两条直线的联是一个平面，
两条共面的非平行直线的交是一个点，
两条不同的平行直线的联是一个平面，
一个点与不包含它的一条直线的联是一个平面，
一个平面与一个不平行于它的直线的交是一个点.
\end{remark}

\begin{example}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P441 习题 2.(1)
设\(x\)和\(y\)是3维仿射几何中两条异面直线.
试证：存在唯一的平面\(p\)使得\(x \subseteq p\)且\(y \parallel p\).
%TODO proof
\end{example}

\begin{example}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P441 习题 2.(2)
设\(x\)和\(y\)是3维仿射几何中两条异面直线.
试证：存在唯一的平面\(p\)使得\(y \subseteq p\)且\(x \parallel p\).
%TODO proof
\end{example}

\begin{example}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P441 习题 2.(3)
设\(x\)和\(y\)是3维仿射几何中两条异面直线，
平面\(p_x\)满足\(x \subseteq p_x\)且\(y \parallel p_x\)，
平面\(p_y\)满足\(y \subseteq p_y\)且\(x \parallel p_y\).
试证：\(p_x \parallel p_y\).
%TODO proof
\end{example}

\subsection{仿射同构}
如同线性空间一样，在仿射几何之间也有同构关系.
两个同构的仿射几何具有相同的性质与结构，
在某种程度上，可以视为同一个仿射几何.

\begin{definition}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P441 定义10.3.1
设\(A\)与\(A'\)都是仿射几何，
\(\sigma\)是从\(A\)到\(A'\)的一个双射.
如果\begin{equation*}
	(\forall S_1,S_2 \in A)
	[
		\sigma(S_1) \subseteq \sigma(S_2)
		\iff
		S_1 \subseteq S_2
	],
\end{equation*}
那么称“\(\sigma\)是从\(A\)到\(A'\)的一个\DefineConcept{同构}（isomorphism）”
“\(A\)到\(A'\)同构（\(A\) is \emph{isomorphic} to \(A'\)）”，
记作\(A \Isomorphism A'\).
\end{definition}

\begin{definition}
设\(A\)都是仿射几何，
\(\sigma\)是从\(A\)到\(A\)的一个双射.
如果\begin{equation*}
	(\forall S_1,S_2 \in A)
	[
		\sigma(S_1) \subseteq \sigma(S_2)
		\iff
		S_1 \subseteq S_2
	],
\end{equation*}
那么称“\(\sigma\)是\(A\)上的一个\DefineConcept{自同构}（automorphism）”.
\end{definition}

%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P441
显然，仿射几何的同构关系是一个等价关系.

\begin{property}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P441 性质1
仿射几何的同构保持交的运算，即\begin{equation*}
	\sigma\left( \bigcap_i S_i \right)
	= \bigcap_i \sigma(S_i).
\end{equation*}
\end{property}

\begin{property}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P441 性质2
仿射几何的同构保持联的运算，即\begin{equation*}
	\sigma\left( \bigvee_i S_i \right)
	= \bigcap_i \sigma(S_i).
\end{equation*}
\end{property}

\begin{property}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P441 性质3
仿射几何的同构保持维数不变，即\begin{equation*}
	\dim\sigma(S) = \dim S.
\end{equation*}
\begin{proof}
给定陪集\(S\)，
我们可以构造一个陪集族\(\{S_n\}\)，
使得\begin{equation}
	S \supseteq S_1 \supseteq S_2 \supseteq \dotsb \supseteq S_k,
\end{equation}
其中\(\dim S_i = \dim S - i\).
显然\(k = \dim S\)，并且\begin{equation*}
	\sigma(S) \supseteq \sigma(S_1) \supseteq \sigma(S_2) \supseteq \dotsb \supseteq \sigma(S_k).
\end{equation*}
因而由\(\dim \sigma(S_i) > \dim \sigma(S_{i+1})\)可知\(\dim S \leq \dim \sigma(S)\).
反过来，由于\(\sigma^{-1}\)是从\(A'\)到\(A\)的同构，
所以\(
	\dim \sigma(S) \leq \dim \sigma^{-1}(\sigma(S)) = \dim S.
\)
\end{proof}
\end{property}

\begin{property}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P441 性质4
仿射几何的同构保持平行关系，即\begin{equation*}
	\sigma(S_1) \parallel \sigma(S_2)
	\iff
	S_1 \parallel S_2.
\end{equation*}
\end{property}

\begin{theorem}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P442 定理10.3.1
设\(V_1\)和\(V_2\)是域\(F\)上的两个线性空间，
\(S_1\)是\(V_1\)中一个陪集，
\(S_2\)是\(V_2\)中一个陪集，
\(\mathcal{A}(S_1)\)是\(S_1\)上的仿射几何，
\(\mathcal{A}(S_2)\)是\(S_2\)上的仿射几何，
则\(\mathcal{A}(S_1) \Isomorphism \mathcal{A}(S_2)\)的充分必要条件是
\(\dim\mathcal{A}(S_1) = \dim\mathcal{A}(S_2)\).
%TODO proof
\end{theorem}

\begin{example}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P443 例10.4
设\(V\)是域\(F\)上的一个线性空间，
向量\(\alpha \in V\)，
变换\(
	\tau_\alpha\colon \mathcal{A}(V) \to \mathcal{A}(V),
	x \mapsto \alpha + x
\)是由\(\alpha\)决定的平移变换.
%TODO 定义“由某个向量决定的平移”
证明：\(\tau_\alpha\)是\(\mathcal{A}(V)\)上的自同构.
\begin{proof}
设\(W_1,W_2\)是\(V\)的两个子空间，
向量\(\beta_1,\beta_2 \in V\)，
则\begin{align*}
	\beta_1 + W_1 \subseteq \beta_2 + W_2
	&\iff \beta_1 - \beta_2 \in W_2, W_1 \subseteq W_2
		\tag{\cref{theorem:商空间.陪集之间成立包含关系的等价条件1}} \\
	&\iff (\alpha + \beta_1) - (\alpha + \beta_2) \in W_2, W_1 \subseteq W_2 \\
	&\iff \alpha + \beta_1 + W_1 \subseteq \alpha + \beta_2 + W_2 \\
	&\iff \tau_\alpha(\beta_1 + W_1) \subseteq \tau_\alpha(\beta_2 + W_2).
		\tag{变换\(\tau_\alpha\)的定义}
\end{align*}
因此\(\tau_\alpha\)是\(\mathcal{A}(V)\)上的自同构.
\end{proof}
\end{example}

\begin{example}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P443 例10.5
设\(V\)是域\(F\)上的一个线性空间.
证明：对于\(V\)上的任意一个可逆线性变换\(f\)，
变换\begin{equation*}
	\hat{f}\colon \mathcal{A}(V) \to \mathcal{A}(V),
	\alpha + W \mapsto f(\alpha) + f(W)
\end{equation*}
一定是\(\mathcal{A}(V)\)上的自同构.
\begin{proof}
设\(W_1,W_2\)是\(V\)的两个子空间，
向量\(\alpha_1,\alpha_2 \in V\)，
则\begin{align*}
	&\hspace{-20pt}
		\alpha_1 + W_1 \subseteq \alpha_2 + W_2 \\
	&\iff \alpha_1 - \alpha_2 \in W_2, W_1 \subseteq W_2
		\tag{\cref{theorem:商空间.陪集之间成立包含关系的等价条件1}} \\
	&\iff f(\alpha_1 - \alpha_2) \in f(W_2),
			f(W_1) \subseteq f(W_2)
		\tag{\cref{example:线性映射.可逆线性变换保持向量与子空间的所属关系,example:线性映射.可逆线性变换保持子空间之间的包含关系}} \\
	&\iff f(\alpha_1) - f(\alpha_2) \in f(W_2),
			f(W_1) \subseteq f(W_2)
		\tag{\hyperref[definition:线性映射.线性映射]{线性映射的可加性}} \\
	&\iff f(\alpha_1) + f(W_1) \subseteq f(\alpha_2) + f(W_2)
		\tag{\cref{theorem:商空间.陪集之间成立包含关系的等价条件1}} \\
	&\iff \hat{f}(\alpha_1 + W_1) \subseteq \hat{f}(\alpha_2 + W_2).
		\tag{变换\(\hat{f}\)的定义}
\end{align*}
因此\(\hat{f}\)是\(\mathcal{A}(V)\)上的自同构.
\end{proof}
\end{example}

\subsection{仿射变换}
\begin{definition}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P443 定义10.3.2
设\(V,V'\)都是域\(F\)上的线性空间.
对于\(V\)的任意一个子空间\(W\)，
\(V'\)的任意一个子空间\(W'\)，
任意向量\(\alpha \in V\)，
任意向量\(\alpha' \in V'\)，
以及从\(W\)到\(W'\)的任意一个同构\(\sigma\)，
把\begin{equation*}
	\tau_{\alpha'} ~ \sigma ~ \tau_{-\alpha}
\end{equation*}
称为“从仿射几何\(\mathcal{A}(\alpha + W)\)
到仿射几何\(\mathcal{A}(\alpha' + W')\)的一个\DefineConcept{仿射变换}”.
\end{definition}

\begin{definition}
设\(V\)都是域\(F\)上的线性空间.
对于\(V\)的任意一个子空间\(W\)，
任意向量\(\alpha \in V\)，
以及\(W\)上的任意一个自同构\(\sigma\)，
把\begin{equation*}
	\tau_\alpha ~ \sigma ~ \tau_{-\alpha}
\end{equation*}
称为“仿射几何\(\mathcal{A}(\alpha + W)\)上的一个\DefineConcept{仿射变换}”.
\end{definition}

\begin{property}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P443
设\(V,V'\)都是域\(F\)上的线性空间，
\(W\)是\(V\)的一个子空间，
\(W'\)是\(V'\)的一个子空间，
向量\(\alpha \in V\)，
向量\(\alpha' \in V'\)，
\(\sigma\)是从\(W\)到\(W'\)的一个同构，
记\(\hat{\sigma} \defeq \tau_{\alpha'} \sigma \tau_{-\alpha}\)，
那么对于任意向量\(\beta \in \alpha + W\)，
有\(
	\sigma = \tau_{-\hat{\sigma}(\beta)} \hat{\sigma} \tau_\beta
\).
%TODO proof
\end{property}

\begin{property}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P443
设\(V,V'\)都是域\(F\)上的线性空间，
\(W\)是\(V\)的一个子空间，
\(W'\)是\(V'\)的一个子空间，
向量\(\alpha \in V\)，
向量\(\alpha' \in V'\)，
\(\sigma\)是从\(W\)到\(W'\)的一个同构，
记\(\hat{\sigma} \defeq \tau_{\alpha'} \sigma \tau_{-\alpha}\)，
那么\((\hat{\sigma})^{-1}\)是
从\(\mathcal{A}(\alpha' + W')\)到\(\mathcal{A}(\alpha + W)\)的一个仿射变换.
%TODO proof
\end{property}

\begin{property}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P444
设\(\hat{\sigma}_1\colon \mathcal{A}(S_1) \to \mathcal{A}(S_2)\)
和\(\hat{\sigma}_2\colon \mathcal{A}(S_2) \to \mathcal{A}(S_3)\)都是仿射变换，
则\(\hat{\sigma}_2 \hat{\sigma}_1\)是
从\(\mathcal{A}(S_1)\)到\(\mathcal{A}(S_3)\)的一个仿射变换.
%TODO proof
\end{property}

\begin{definition}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P444 定义10.3.3
设\(A\)是\(n\ (n\geq1)\)维仿射几何，
\(O,\AutoTuple{P}{n}\)是\(n+1\)个点，
且\begin{equation*}
	\dim\left( \bigvee_{i=1}^n P_i \vee O \right) = n,
\end{equation*}
则称\([O;\AutoTuple{P}{n}]\)是
“仿射几何\(A\)的（以\(O\)为原点的）\DefineConcept{标架}”.
\end{definition}
%TODO \DefineConcept{标准标架}

\begin{theorem}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P444 定理10.3.2
设\([O;\AutoTuple{P}{n}]\)和\([O';\AutoTuple{P'}{n}]\)分别是仿射几何\(A\)和\(A'\)的标架，
那么存在从\(A\)到\(A'\)的唯一的仿射变换\(f\)使得\begin{equation*}
	f(P_i) = P'_i
	\ (i=1,2,\dotsc,n);
	\qquad
	f(O) = O'.
\end{equation*}
%TODO proof
\end{theorem}

\begin{definition}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P445 定义10.3.4
设\(A\)是域\(F\)上的\(n\)维仿射几何，
把从\(A\)到\(\mathcal{A}(F^n)\)的每一个仿射变换
称为“仿射几何\(A\)的一个\DefineConcept{仿射坐标系}”.
\end{definition}

\begin{example}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P445 习题 2.
设\(f\colon \mathcal{A}(S) \to \mathcal{A}(S')\)是一个仿射变换，
陪集\(T \subseteq S\).
证明：\(f\)在\(\mathcal{A}(T)\)上的限制\(f \SetRestrict \mathcal{A}(T)\)也是一个仿射变换.
%TODO proof
\end{example}

\begin{example}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P445 习题 3.
设\(V\)都是域\(F\)上的线性空间.
\(W\)是\(V\)的一个子空间，
向量\(\alpha \in V\)，
\(\sigma\)是\(W\)上的一个自同构，
记\(\hat{\sigma} \defeq \tau_\alpha \sigma \tau_{-\alpha}\).
证明：\begin{equation*}
	(\forall S \in \mathcal{A}(\alpha + W))
	[
		f(S) \parallel S
	]
	\iff
	(\forall U \AlgebraSubstructure W)
	[
		f(U) = U
	].
\end{equation*}
%TODO proof
\end{example}

\subsection{仿射几何基本定理}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P445
设\(\mathcal{A}(V)\)是域\(F\)上的一个\(n\ (n\geq3)\)维仿射几何.
对于\(\mathcal{A}(V)\)中任意一个不含零向量的平面\(S\)，
\(S\)中的每一点对应\(V\)的某个非零向量.
设\([O;\AutoTuple{P}{n}]\)是\(\mathcal{A}(V)\)的标架.
对于\(\mathcal{A}(V)\)中任意一点\(P\)，
直线\(OP \defeq O \vee P\)是\(V\)的一个1维子空间.
我们把\(OP\)中的每一个非零向量\(p\)
称为“对于点\(P\)的一个\DefineConcept{齐性向量}（homogeneous vector）”.

\begin{property}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P445
向量\(p\)是对于点\(P\)的一个齐性向量，
当且仅当直线\(OP\)等于由\(p\)生成的子空间.
\end{property}

\begin{property}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P445
设\(\mathcal{A}(V)\)是域\(F\)上的一个\(3\)维仿射几何，
\(O\)是原点，
\(W\)是\(V\)的一个\(2\)维子空间，
\(\alpha \in V - W\)是一个非零向量，
% \(\alpha \in V - W\)可以保证平面\(S\)一定不经过原点\(O\)
陪集\(S \defeq \alpha + W\)，
记\(  % 通过\(O\)但是与\(S\)不平行的全体直线
	L
	\defeq
	\Set{
		U \AlgebraSubstructure V
		\given
		\dim U = 1,
		U \nparallel S
	}
\)，
那么映射\(
	f\colon S \to L,
	P \mapsto OP
\)是双射.
\begin{proof}
%@credit: {gemini}
对于任意向量\(w \in W\)，
集合\(\{\alpha + w\}\)成为平面\(S\)上的一个点，
那么由题意有\begin{equation*}
	f(\{\alpha + w\})
	= \{0\} \vee \{\alpha + w\}
	= \Span\{\alpha + w\}.
\end{equation*}

首先证明\(f\)的值域\(\ran f = f(S)\)是\(f\)的陪域\(L\)的子集，即\(f(S) \subseteq L\).
用反证法.
在平面\(S\)上任意取定一点\(P \defeq \{\alpha + w\}\ (w \in W)\)，
假设直线\(OP\)不属于直线系\(L\)，
即\((O \vee P) \notin L\)，
即\(\Span\{\alpha + w\} \parallel S\)，
即\(\Span\{\alpha + w\} \subseteq W\)（\(W\)不可能包含于\(\Span\{\alpha + w\}\)），
即\(\alpha + w \in W\)，
即\(\alpha \in W\)，
与\(\alpha \in V - W\)矛盾！
因此，对于平面\(S\)上任意一点\(P\)，总有\(OP \in L\)，从而有\(f(S) \subseteq L\).

然后证明\(f\)的单射性.
在平面\(S\)上任意取定两点\(P_1 \defeq \{\alpha + w_1\}\)和\(P_2 \defeq \{\alpha + w_2\}\)，
其中\(w_1,w_2 \in W\).
假设\(f(P_1) = f(P_2)\)，
那么\(\Span\{\alpha + w_1\} = \Span\{\alpha + w_2\}\).
% 注意到\(\alpha \notin W\)，那么对于任意\(w \in W\)总有\(\alpha + w \neq 0\).
于是，存在常数\(k \in F\)，使得\(\alpha + w_1 = k (\alpha + w_2)\)，
移项得\((k-1) \alpha = w_1 - k w_2\)，
从而有\((k-1) \alpha \in W\).
鉴于\(\alpha \notin W\)，
要想\((k-1) \alpha \in W\)成立，
必有\(k = 1\)，
从而\(\alpha + w_1 = \alpha + w_2\)，
即\(P_1 = P_2\).
这就证明\(f\)是单射.

最后证明\(f\)的满射性.
在直线系\(L\)中任意取定一条直线\(OP \defeq \Span\{\beta\}\ (\beta\neq0)\).
由\(L\)的定义可知\(OP \nparallel S\)，
即\(\Span\{\beta\} \nsubseteq W\)，
即\(\beta \notin W\).
要证\(f\)是满射，
只需证平面\(S\)上存在一点\(P \defeq \{\alpha + w\}\ (w \in W)\)
使得\(\Span\{\alpha + w\} = \Span\{\beta\}\)，
即证存在\(k \in F\)
使得\(\alpha + w = k \beta\)，
即证存在\(k \in F\)
使得\(k \beta - \alpha \in W\)，
即证存在\(k \in F\)
使得\(k \beta - \alpha\)可以由\(W\)的一个基\(w_1,w_2\)线性表出，
即证\(\alpha\)可以由\(\beta,w_1,w_2\)线性表出.
因为\(\beta \notin W\)，
所以\(\Span\{\beta\} \cap W = 0\)，
从而\(
	\dim(\Span\{\beta\} \cap W) = 0
\)，
于是\(
	\dim(\Span\{\beta\} + W)
	= \dim\Span\{\beta\}
	+ \dim W
	= 3
	= \dim V
\)，
这就说明\(V\)是\(\Span\{\beta\}\)与\(W\)的直和，
\(V\)中任意一个向量（包括\(\alpha\)）均可由\(W\)的一个基\(w_1,w_2\)和\(\beta\)线性表出.
这就证明\(f\)是满射.
\end{proof}
\end{property}
\begin{remark}
上述性质阐述了一个几何事实：
在3维空间中，远离原点的任意一个平面上的每一个点都与经过原点且不与该平面平行的每一个直线一一对应.
但是，如果仿射几何\(\mathcal{A}(V)\)的维数大于\(3\)，
那么上述映射\(f\)就无法保持其满射性.
例如，取\(V \defeq \mathbb{R}^4\)的一个标准基\(
	e_1 \defeq (1,0,0,0)^T,
	e_2 \defeq (0,1,0,0)^T,
	e_3 \defeq (0,0,1,0)^T,
	e_4 \defeq (0,0,0,1)^T
\)，
令\(W \defeq \Span\{e_1,e_2\}\)，
令\(\alpha \defeq e_3\)，
从而\(S = e_3 + \Span\{e_1,e_2\}\)，
显然\(\Span\{e_4\}\)是通过原点\(O\)但是与\(S\)不平行的一条直线，
但是\(S\)上不存在点\(P\)使得\(OP = \Span\{e_4\}\).
不过，只要对直线系的定义稍加修改，
令\(  % \(\Span\{\alpha\} + W\)中，通过\(O\)但是与\(S\)不平行的全体直线
	L
	\defeq
	\Set{
		U \AlgebraSubstructure (\Span\{\alpha\} + W)
		\given
		\dim U = 1,
		U \nparallel S
	}
\)，
那么\(f\colon S \to L, P \mapsto OP\)仍然是一个双射.
\end{remark}

\begin{property}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P445
平面\(S\)上三点\(P,Q,R\)共线，
当且仅当直线\(OP,OQ,OR\)共面.
\end{property}

\begin{lemma}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P446 引理10.4.1
设\(P,Q,R\)是域\(F\)上仿射几何\(\mathcal{A}(V)\)中三个异于\(O\)的点，
\(OP,OQ,OR\)共面，
\(OQ \neq OR\)，
\(p\)是对于点\(P\)的齐性向量，
则对于任意\(x,y \in F - \{0\}\)，
存在对于点\(Q\)的齐性向量\(q\)和对于\(R\)的齐性向量\(r\)（其中之一可能为\(0\)），
使得\(p = x q + y r\).
\begin{proof}
设\(q_0\)是对于点\(Q\)的齐性向量，
\(r_0\)是对于\(R\)的齐性向量.
因为\(OP,OQ,OR\)共面，
于是\(p,q_0,r_0\)线性相关.
又因为\(OQ \neq OR\)，
所以\(q_0,r_0\)线性无关.
因此存在\(x_0,y_0 \in F\)，
使得\(
	p = x_0 q_0 + y_0 r_0
	= x \left( \frac{x_0}{x} q_0 \right)
	+ y \left( \frac{y_0}{y} r_0 \right)
\)，
因此只要取\(
	q \defeq \frac{x_0}{x} q_0,
	r \defeq \frac{y_0}{y} r_0
\)即可.
\end{proof}
\end{lemma}

% %@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P446 推论1
% %@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P446 推论2

\begin{definition}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P446 定义10.4.1
设\(A,B,C\)三点不共线.
把\begin{equation*}
	\bigcup\{
		A,B,C
		A \vee B,
		B \vee C,
		C \vee A
	\}
\end{equation*}
称为“以\(A,B,C\)为顶点的\DefineConcept{三角形}（triangle）”，
记作\(\triangle ABC\).
\end{definition}

\begin{definition}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P447 定义10.4.2
设\(P,A,B,C,A',B',C'\)是7个不同点，
\(A,B,C\)三点不共线，
\(A',B',C'\)三点不共线.
如果\(AA' \cap BB' \cap CC' = P\)，
则称“\(\triangle ABC\)与\(\triangle A'B'C'\)是从点\(P\) \DefineConcept{透射的}（\(\triangle ABC\) and \(\triangle A'B'C'\) are \emph{perspective} from \(P\)）”
或“\(\triangle ABC\)与\(\triangle A'B'C'\)是\DefineConcept{同调的}（homologic）”；
把点\(P\)称为\DefineConcept{透射中心}（perspective center，perspector，pole）
或\DefineConcept{同调中心}（homology center）.
%@see: https://mathworld.wolfram.com/PerspectiveTriangles.html
%@see: https://mathworld.wolfram.com/Perspector.html
\end{definition}

\begin{definition}
设\(P,A,B,C,A',B',C'\)是7个不同点，
\(A,B,C\)三点不共线，
\(A',B',C'\)三点不共线，
记\(
	L \defeq AB \cap A'B',
	M \defeq BC \cap B'C',
	N \defeq CA \cap C'A'
\).
如果\(L,M,N\)是共线三点，
则称“\(\triangle ABC\)与\(\triangle A'B'C'\)是从直线\(MN\) \DefineConcept{透射的}（\(\triangle ABC\) and \(\triangle A'B'C'\) are \emph{perspective} from \(MN\)）”；
把直线\(MN\)称为\DefineConcept{透视轴}（perspective axis，perspectrix）
或\DefineConcept{同调轴}（homology axis）.
%@see: https://mathworld.wolfram.com/Perspectrix.html
\end{definition}

\begin{definition}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P447 定义10.4.2
设\(A,B,C,A',B',C'\)是6个不同点，
\(A,B,C\)三点不共线，
\(A',B',C'\)三点不共线，
且\(AA',BB',CC'\)两两平行，
则称“\(\triangle ABC\)与\(\triangle A'B'C'\)是\DefineConcept{平行透射的}”.
\end{definition}

\begin{theorem}\label{theorem:仿射几何基本定理.德萨格定理}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P447 定理10.4.1（Desargues）
设\(\triangle ABC\)与\(\triangle A'B'C'\)时两个共面的透射三角形.
\begin{itemize}
	\item 若\(
		AB \cap A'B' = L,
		BC \cap B'C' = M,
		CA \cap C'A' = N
	\)，
	则\(L,M,N\)共线.

	\item 若\(
		BC \parallel B'C',
		CA \parallel C'A'
	\)，
	则\(AB \parallel A'B'\).
\end{itemize}
%TODO proof
%@see: https://mathworld.wolfram.com/DesarguesTheorem.html
\end{theorem}

我们把\cref{theorem:仿射几何基本定理.德萨格定理}
称为\DefineConcept{德萨格定理}（Desargues' Theorem）.

德萨格定理说明：如果两个三角形是从某个点透射的，那么它们也是从某条直线透射的.

\begin{theorem}\label{theorem:仿射几何基本定理.帕普斯六边形定理}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P448 定理10.4.2（Pappus）
设\(A,B,C\)与\(A',B',C'\)分别在两条不同的共面直线上（这两条直线可以相交，也可以平行）.
\begin{itemize}
	\item 记\(
		L \defeq AB' \cap A'B,
		M \defeq BC' \cap B'C,
		N \defeq CA' \cap C'A
	\)，
	则\(L,M,N\)共线.

	\item 若\(
		AB' \parallel A'B,
		AC' \parallel A'C
	\)，
	则\(BC' \parallel B'C\).
\end{itemize}
%TODO proof
%@see: https://mathworld.wolfram.com/PappussHexagonTheorem.html
\end{theorem}

我们把\cref{theorem:仿射几何基本定理.帕普斯六边形定理}
称为\DefineConcept{帕普斯六边形定理}（Pappus's Hexagon Theorem）.

\begin{theorem}\label{theorem:仿射几何基本定理.帕普斯调和定理}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P449 定理10.4.3（调和结构）
设\(A,B\)是平面\(S\)上不同两点，点\(G\)在\(AB\)上，\(C\)在\(S\)上但不在\(AB\)上，
\(D\)在\(CG\)上但不同于\(C,G\)，
记\begin{equation*}
	E \defeq AD \cap BC,
	\qquad
	F \defeq BD \cap CA,
	\qquad
	H \defeq EF \cap AB,
\end{equation*}
则\(H\)与\(C,D\)的选择无关.
%TODO proof
%@see: https://mathworld.wolfram.com/PappussHarmonicTheorem.html
\end{theorem}

我们把\cref{theorem:仿射几何基本定理.帕普斯调和定理}
称为\DefineConcept{帕普斯调和定理}（Pappus's Harmonic Theorem）.

\begin{definition}
%@see: 《高等代数与解析几何（第三版 下册）》（孟道骥） P450 定义10.4.3
设\(A,B,C,D\)四点共线，且满足\begin{equation*}
	\frac{\LineSegmentLength{AC}}{\LineSegmentLength{BC}}
	= \frac{\LineSegmentLength{AD}}{\LineSegmentLength{BD}},
\end{equation*}
则称“\((A,B,C,D)\)构成一个\DefineConcept{调和点列}（\(A,C,B,D\) form a \emph{harmonic range}）”；
把\(C\)、\(D\)称为“\(A\)与\(B\)的\DefineConcept{调和共轭点}（harmonic conjugate）”.
%@see: https://mathworld.wolfram.com/HarmonicRange.html
%@see: https://mathworld.wolfram.com/HarmonicConjugate.html
\end{definition}

借助调和点列、调和共轭点的概念，
我们可以将\hyperref[theorem:仿射几何基本定理.帕普斯调和定理]{帕普斯调和定理}的结论重新表述为：
“\(A,G,\allowbreak B,H\)构成一个调和点列”或者“\(G,H\)是\(A,B\)的调和共轭点”.
