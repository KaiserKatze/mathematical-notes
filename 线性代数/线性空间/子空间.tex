\section{子空间及其运算}
数域\(K\)上\(n\)元齐次线性方程组\(A X = 0\)的解空间\(W\)是\(K^n\)的子空间，
意思是齐次线性方程组的解集\(W\)对于有序数组的加法与数量乘法封闭.

数域\(K\)上全体\(n\)阶矩阵\(M_n(K)\)对于矩阵的加法与数量乘法形成\(K\)上的一个线性空间.
\(K\)上全体\(n\)阶对称矩阵\(V\)对于矩阵的加法与数量乘法也形成一个线性空间.
显然\(V\)是\(M_n(K)\)的子集，
并且\(V\)的加法就是\(M_n(K)\)的加法，
\(V\)的数量乘法就是\(M_n(K)\)的数量乘法.
我们自然地希望把\(V\)叫做\(M_n(K)\)的一个子空间.

本节将介绍任意线性空间的子空间的概念、子空间的运算，以及研究如何利用子空间来探索线性空间的结构.

\subsection{子空间}
\begin{definition}
%@see: 《高等代数（第三版 下册）》（丘维声） P82 定义1
%@see: 《Linear Algebra and Its Applications (Second Edition)》（Peter D. Lax） P4 Definition
设\(V\)是域\(F\)上的一个线性空间，
\(\emptyset\neq U\subseteq V\).
如果\(U\)对于\(V\)的加法及纯量乘法运算
也形成\(F\)上的线性空间，
则称“\(U\)是\(V\)的一个\DefineConcept{子空间}（subspace）”.
% A subset \(U\) of a linear space \(V\) is called a \emph{subspace} if sums and scalar multiples of elements of \(U\) belong to \(U\).
\end{definition}

%@see: 《Linear Algebra and Its Applications (Second Edition)》（Peter D. Lax） P4 Exercise 8.
显然\(\{0\}\)是\(V\)的一个子空间，
称其为“\(V\)的\DefineConcept{零子空间}”，
也记作\(0\).
另外，\(V\)显然也是\(V\)的一个子空间.
我们把\(0\)和\(V\)统称为“\(V\)的\DefineConcept{平凡子空间}（trivial subspace）\footnote{
	有的书仅仅将\emph{平凡子空间}定义为零子空间.
}”，
把\(V\)的其余子空间称为它的\DefineConcept{非平凡子空间}.

\begin{theorem}\label{theorem:线性空间.子空间的判定}
%@see: 《高等代数（第三版 下册）》（丘维声） P82 定理1
域\(F\)上线性空间\(V\)的非空子集\(U\)是\(V\)的一个子空间
当且仅当\(U\)对于\(V\)的加法与纯量乘法都封闭，
即\begin{itemize}
	\item \((\forall u_1,u_2\in U)[u_1+u_2 \in U]\)；
	\item \((\forall u\in U)(\forall k\in F)[ku\in U]\).
\end{itemize}
\begin{proof}
必要性已由子空间的定义直接给出.
下面证明充分性.

由已知条件可知，\(V\)的加法与纯量乘法都是\(U\)的运算.
由于\(V\)是线性空间，
因此\(U\)的加法满足\hyperref[definition:线性空间.运算法则1]{交换律}、\hyperref[definition:线性空间.运算法则2]{结合律}，
\(U\)的纯量乘法满足 \labelcref{definition:线性空间.运算法则5,definition:线性空间.运算法则6,definition:线性空间.运算法则7,definition:线性空间.运算法则8} 这4条运算法则.

% \cref{definition:线性空间.运算法则3}
由于\(U\)是非空集，
因此存在\(u \in U\).
由已知条件得\(0 u \in U\).
由于\(V\)是线性空间，因此\(0 u = 0\).
从而\(0 \in U\)，
于是\(V\)的零元也是\(U\)的零元.

% \cref{definition:线性空间.运算法则4}
任取\(\alpha \in U\)，
由已知条件得\((-1) \alpha \in U\).
由于\(V\)是线性空间，
因此\((-1) \alpha = -\alpha\)，
从而\(-\alpha \in U\)，
于是\(\alpha\)在\(V\)中的负元\(-\alpha\)也是\(\alpha\)在\(U\)中的负元.

综上所述，
\(U\)的加法、纯量乘法满足线性空间定义所要求的全部运算法则，
\(U\)是\(F\)上一个线性空间，
从而\(U\)是\(V\)的一个子空间.
\end{proof}
\end{theorem}

\begin{example}
%@see: 《高等代数（第三版 下册）》（丘维声） P83 例1
数域\(K\)上所有次数小于\(n\)的一元多项式组成的集合\(K[x]_n\)
是\(K[x]\)的一个子空间.
\begin{proof}
显然\(K[x]_n\)非空集.
由于两个次数小于\(n\)的一元多项式之和的次数仍小于\(n\)，
且任一数\(k\)与一个次数小于\(n\)的一元多项式的乘积的次数仍小于\(n\)，
因此\(K[x]_n\)对于多项式的加法与数量乘法都封闭，
从而\(K[x]_n\)是\(K[x]\)的一个子空间.
\end{proof}
\end{example}

\begin{proposition}
%@see: 《高等代数（第三版 下册）》（丘维声） P83 命题2
设\(U\)是域\(F\)上\(n\)维线性空间\(V\)的一个子空间，
则\(\dim U\leq\dim V\).
\begin{proof}
由于\(n\)维线性空间\(V\)中任意\(n+1\)个向量都线性相关，
因此\(U\)的一个基所含向量的个数一定小于或等于\(n\)，
从而\(\dim U\leq\dim V\).
\end{proof}
\end{proposition}

\begin{proposition}
%@see: 《高等代数（第三版 下册）》（丘维声） P83 命题3
设\(U\)是域\(F\)上\(n\)维线性空间\(V\)的一个子空间.
如果\(\dim U=\dim V\)，
则\(U=V\).
\begin{proof}
由于\(\dim U=\dim V=n\)，
因此\(U\)的一个基\(\AutoTuple{\delta}{n}\)就是\(V\)的一个基，
从而\(V\)中任一向量\(\alpha=a_1\delta_1+\dotsb+a_n\delta_n\in U\)，
因此\(V\subseteq U\).
又因为\(U\subseteq V\)，
所以\(U=V\).
\end{proof}
\end{proposition}

\begin{proposition}
%@see: 《高等代数（第三版 下册）》（丘维声） P83 命题4
设\(U\)是域\(F\)上\(n\)维线性空间\(V\)的一个子空间，
则\(U\)的一个基可以扩充成\(V\)的一个基.
\begin{proof}
设\(\AutoTuple{\alpha}{s}\)是\(U\)的一个基，则\(s\leq n\).
如果\(s=n\)，则\(\AutoTuple{\alpha}{n}\)是\(V\)的一个基.
下面设\(s<n\).
此时\(\AutoTuple{\alpha}{s}\)不是\(V\)的一个基，
于是\(V\)中至少有一个向量\(\beta_1\)
不能由\(\AutoTuple{\alpha}{s}\)线性表出，
从而\(\AutoTuple{\alpha}{s},\beta_1\)线性无关.
如果\(s+1=n\)，
则已得到\(V\)的一个基.
如果\(s+1<n\)，
则同理有\(\beta_2\in V\)，
使得\(\AutoTuple{\alpha}{s},\beta_1,\beta_2\)线性无关.
依次递推，总能得到\(n\)个线性无关的向量
\(\AutoTuple{\alpha}{s},\AutoTuple{\beta}{r}\)，
其中\(s+r=n\)，
这就是\(V\)的一个基.
\end{proof}
\end{proposition}

\subsection{生成子空间}
如何构造域\(F\)上线性空间\(V\)的子空间？
在\(V\)中给了向量组\(\AutoTuple{\alpha}{s}\)，
由它们的所有线性组合组成的集合\[
	U
	\defeq
	\Set{
		k_1\alpha_1+\dotsb+k_s\alpha_s
		\given
		\AutoTuple{k}{s}\in F
	}
\]是\(V\)的一个子空间，
称“\(U\)是由向量组\(\AutoTuple{\alpha}{s}\)生成的子空间
%@see: 《Linear Algebra and Its Applications (Second Edition)》（Peter D. Lax） P4 Exercise 9.
（\(U\) is the subspace \emph{spanned by} \(\AutoTuple{\alpha}{s}\)）”
“向量组\(\AutoTuple{\alpha}{s}\)可以生成空间\(U\)
（\(\AutoTuple{\alpha}{s}\) \emph{span} \(U\)）”，
记作\(\opair{\AutoTuple{\alpha}{s}}\)
或\(\Span\{\AutoTuple{\alpha}{s}\}\).

可以证明，由\(\AutoTuple{\alpha}{s}\)生成的子空间\(\opair{\AutoTuple{\alpha}{s}}\)
是包含\(\AutoTuple{\alpha}{s}\)的最小子空间.

\begin{theorem}
%@see: 《高等代数（第三版 下册）》（丘维声） P84 定理5
在域\(F\)上的线性空间\(V\)中，
如果\(U=\opair{\AutoTuple{\alpha}{s}}\)，
则向量组\(\AutoTuple{\alpha}{s}\)的一个极大线性无关组是\(U\)的一个基，
从而\(\dim U=\rank\{\AutoTuple{\alpha}{s}\}\).
\end{theorem}

从基的定义容易看出，
如果\(\AutoTuple{\delta}{r}\)是\(V\)的子空间\(U\)的一个基，
则\(U=\opair{\AutoTuple{\delta}{r}}\).
由此看出，\(V\)的任一有限维子空间都是由向量组生成的子空间.

\begin{theorem}
%@see: 《Linear Algebra and Its Applications (Second Edition)》（Peter D. Lax） P6 Theorem 4.
域\(F\)上有限维线性空间\(V\)中的每一个线性无关向量组可以扩充为\(V\)的基.
\begin{proof}
设\(\AutoTuple{\alpha}{s}\)是域\(F\)上有限维线性空间\(V\)中的一个线性无关向量组.
如果\(\AutoTuple{\alpha}{s}\)不可以生成空间\(V\)，
那么存在向量\(\beta_1\)，不可以由\(\AutoTuple{\alpha}{s}\)线性表出.
记\(\alpha_{s+1} = \beta_1\).
如果\(\AutoTuple{\alpha}{s+1}\)不可以生成空间\(V\)，
那么存在向量\(\beta_2\)，不可以由\(\AutoTuple{\alpha}{s+1}\)线性表出.
记\(\alpha_{s+2} = \beta_2\).
循此往复，最终必定有\(\AutoTuple{\alpha}{n}\)可以生成空间\(V\)，
其中\(n = \dim V\).
\end{proof}
\end{theorem}

\begin{theorem}
%@see: 《Linear Algebra and Its Applications (Second Edition)》（Peter D. Lax） P6 Theorem 5.(a)
有限维线性空间的任意一个子空间都是有限维的.
%TODO proof
\end{theorem}

\subsection{子空间的交}
在几何空间\(V\)中，给定两个过原点的平面\(V_1,V_2\)，
易知它们都是\(V\)的子空间，
它们的交线\(L = V_1 \cap V_2\)也是\(V\)的一个子空间.
于是我们大胆推测，在任意一个线性空间中，任意两个子空间的交集也是一个子空间.
\begin{theorem}
%@see: 《高等代数（第三版 下册）》（丘维声） P84 定理6
%@see: 《Linear Algebra and Its Applications (Second Edition)》（Peter D. Lax） P4 Definition
设\(V_1,V_2\)都是域\(F\)上线性空间\(V\)的子空间，
则\(V_1 \cap V_2\)也是\(V\)的子空间.
\begin{proof}
因为\(0\in V_1 \cap V_2\)，
所以\(V_1 \cap v_2\)非空集.
设\(\alpha,\beta\in V_1 \cap V_2\)，
则\(\alpha,\beta\in V_1\)且\(\alpha,\beta\in V_2\).
于是\(\alpha+\beta\in V_1\)且\(\alpha+\beta\in V_2\)，
因此\(\alpha+\beta\in V_1 \cap V_2\)，
\(V_1 \cap V_2\)对加法封闭.
同理可证\(V_1 \cap V_2\)对纯量乘法封闭.
综上所述\(V_1 \cap V_2\)是\(V\)的子空间.
\end{proof}
\end{theorem}

子空间的交适合交换律、结合律，
即\[
	V_1 \cap V_2
	=V_2 \cap V_1, \qquad
	(V_1 \cap V_2) \cap V_3
	=V_1 \cap (V_2 \cap V_3).
\]
由结合律，我们知道\(V\)的若干个子空间的交
\(\bigcap_{i=1}^s V_i\)也是\(V\)的一个子空间.

\subsection{子空间的和}
现在我们想知道，在任意一个线性空间中，任意两个子空间的并集是不是子空间.
从上述几何空间的例子看出，
如果向量\(\alpha_1\)属于子空间\(V_1\)，
向量\(\alpha_2\)属于子空间\(V_2\)，
且两个向量都不属于交线\(L\)，
则虽然\(\alpha_1,\alpha_2 \in V_1 \cup V_2\)，
但是\(\alpha_1 + \alpha_2\)可能不属于\(V_1 \cup V_2\)，
或者说\(V_1 \cup V_2\)可能对加法不封闭，
因此\(V_1 \cup V_2\)不是\(V\)的子空间.
下面我们给出严格证明.
\begin{proposition}
设\(V_1,V_2\)都是域\(F\)上线性空间\(V\)的子空间，
则\(V_1 \cup V_2\)不一定是\(V\)的子空间.
\begin{proof}
显然\(V_1=\opair{(1,0,0),(0,1,0)}\)
和\(V_2=\opair{(0,1,0),(0,0,1)}\)
都是几何空间\(V\)的子空间.
我们取\(\alpha=(1,1,0)\in V_1\)，
再取\(\beta=(0,1,1)\in V_2\)，
容易看出\(\alpha+\beta=(1,2,1)\)
虽然属于\(V\)，
但是不属于\(\opair{(1,0,0),(0,1,0)}\)，
也不属于\(\opair{(0,1,0),(0,0,1)}\)，
即\(\alpha+\beta\notin V_1 \cup V_2\)，
这就说明
\(V_1 \cup V_2\)对加法不封闭，
从而说明
\(V_1 \cup V_2\)不是\(V\)的子空间.
\end{proof}
\end{proposition}
那么，如果我们想构造一个包含\(V_1 \cup V_2\)的子空间，
这个子空间就应当含有\(V_1\)中任一向量\(\alpha_1\)与\(V_2\)中任一向量\(\alpha_2\)之和.
受此启发，我们应当考虑集合
\(\Set{ \alpha_1 + \alpha_2 \given \alpha_1 \in V_1,\alpha_2 \in V_2 }\).

\begin{definition}
%@see: 《高等代数（第三版 下册）》（丘维声） P84 定理7
%@see: 《Linear Algebra and Its Applications (Second Edition)》（Peter D. Lax） P4 Definition
设\(V_1,V_2\)都是域\(F\)上线性空间\(V\)的子空间，
把\[
%@see: 《高等代数（第三版 下册）》（丘维声） P84 (1)
	\Set{ \alpha_1+\alpha_2 \given \alpha_1\in V_1,\alpha_2\in V_2 }
\]称为“\(V_1\)与\(V_2\)的\DefineConcept{和}（sum）”，
记作\(V_1+V_2\).
\end{definition}
\begin{theorem}
%@see: 《高等代数（第三版 下册）》（丘维声） P84 定理7
设\(V_1,V_2\)都是域\(F\)上线性空间\(V\)的子空间，
则\(V_1+V_2\)是\(V\)的一个子空间.
\begin{proof}
由于\(0+0=0\)，
所以\(0\in V_1+V_2\).
在\(V_1+V_2\)中任取两个向量\(\alpha,\beta\)，
则\[
	\alpha=\alpha_1+\alpha_2, \qquad
	\beta=\beta_1+\beta_2,
\]
其中\(\alpha_1,\beta_1\in V_1,
\alpha_2,\beta_2\in V_2\).
于是\(\alpha_1+\beta_1\in V_1,
\alpha_2+\beta_2\in V_2\).
因此\[
	\alpha+\beta
	=(\alpha_1+\alpha_2)+(\beta_1+\beta_2)
	=(\alpha_1+\beta_1)+(\alpha_2+\beta_2)
	\in V_1+V_2,
\]
即\(V_1+V_2\)对于\(V\)的加法封闭.
同理可证\(V_1+V_2\)对于\(V\)的纯量乘法封闭，
因此\(V_1+V_2\)是\(V\)的一个子空间.
\end{proof}
\end{theorem}

\begin{proposition}
%@see: 《高等代数（第三版 下册）》（丘维声） P85
\(V_1+V_2\)是\(V\)中包含\(V_1 \cup V_2\)的最小子空间.
\begin{proof}
%@credit: {855486ab-2fcf-40c1-b774-09956dfb4012},{9fe3a491-385e-41e9-97cc-e0e3bc5c3b5b},{3d3dd0d4-9945-42ae-8a73-520c7170c8ac},{0e766461-e697-4ed8-95dd-e744fdd3194f},{a84f055e-f32d-418a-8d8c-0b72a4b2df78}
设\(U\)是\(V\)的子空间，
且\(U \supseteq V_1 \cup V_2\)，
那么\[
	(\forall \alpha_1 \in V_1)
	(\forall \alpha_2 \in V_2)
	[
		\alpha_1 \in U
		\land
		\alpha_2 \in U
	].
	\eqno(1)
\]
因为\(U\)是子空间，对加法封闭，
所以由(1)可得\[
	(\forall \alpha_1 \in V_1)
	(\forall \alpha_2 \in V_2)
	[
		\alpha_1 + \alpha_2 \in U
	].
	\eqno(2)
\]
根据定义有\[
	(\forall \alpha \in V_1+V_2)
	(\exists \alpha_1 \in V_1)
	(\exists \alpha_2 \in V_2)
	[
		\alpha = \alpha_1 + \alpha_2
	].
	\eqno(3)
\]
由(2)(3)可知\[
	(\forall \alpha \in V_1+V_2)
	[
		\alpha \in U
	],
\]
则\(U \supseteq V_1+V_2\).
\end{proof}
\end{proposition}

%@see: 《高等代数（第三版 下册）》（丘维声） P85
子空间的和适合交换律、结合律，
即\[
	V_1 + V_2
	=V_2 + V_1, \qquad
	(V_1 + V_2) + V_3
	=V_1 + (V_2 + V_3).
\]
由结合律，我们知道\(V\)的有限个子空间之和\[
%@see: 《高等代数（第三版 下册）》（丘维声） P85 (2)
	\sum_{i=1}^s V_i
	\defeq
	V_1 + \dotsb + V_s
	= \Set{
		\alpha_1 + \dotsb + \alpha_s
		\given
		\alpha_i \in V_i,
		i=1,2,\dotsc,s
	}
\]也是\(V\)的一个子空间.

\begin{proposition}
%@see: 《高等代数（第三版 下册）》（丘维声） P85 命题8
设\(\AutoTuple{\alpha}{s}\)与\(\AutoTuple{\beta}{r}\)
是域\(F\)上线性空间\(V\)的两个向量组，
则\[
	\opair{\AutoTuple{\alpha}{s}}
	+\opair{\AutoTuple{\beta}{r}}
	=\opair{\AutoTuple{\alpha}{s},\AutoTuple{\beta}{r}}.
\]
\begin{proof}
根据向量组生成的子空间的定义，以及子空间的和的定义，
得到\begin{align*}
	&\opair{\AutoTuple{\alpha}{s}}
	+\opair{\AutoTuple{\beta}{r}} \\
	&=\Set{
		(k_1\alpha_1+\dotsb+k_s\alpha_s)
		+(l_1\beta_1+\dotsb+l_r\beta_r)
		\given
		k_i,l_j\in F,
		1\leq i\leq s,
		1\leq j\leq r
	} \\
	&=\opair{\AutoTuple{\alpha}{s},\AutoTuple{\beta}{r}}.
	\qedhere
\end{align*}
\end{proof}
\end{proposition}

\subsection{子空间的维数公式}
在几何空间\(V\)中，两个相交平面\(V_1,V_2\)的维数为\(\dim V_1 = \dim V_2 = 2\)，
它们的交线的维数为\(\dim(V_1 \cap V_2) = 1\)，
它们的和恰好就是\(V\)，从而有\(\dim(V_1 + V_2) = 3\)，
于是成立\[
	\dim V_1 + \dim V_2
	= \dim(V_1 + V_2) + \dim(V_1 \cap V_2).
\]
这就让人不禁好奇，对于任意一个\(n\)维线性空间，上式是否成立？
回答是肯定的.
\begin{theorem}[子空间的维数公式]\label{theorem:线性空间.子空间.子空间的维数公式}
%@see: 《高等代数（第三版 下册）》（丘维声） P85 定理9
设\(V_1,V_2\)都是域\(F\)上线性空间\(V\)的有限维子空间，
则\(V_1 \cap V_2,V_1+V_2\)也都是有限维的子空间，
并且\[
%@see: 《高等代数（第三版 下册）》（丘维声） P85 (3)
	\dim V_1+\dim V_2
	=\dim(V_1+V_2)
	+\dim(V_1 \cap V_2).
\]
\begin{proof}
由于\(V_1 \cap V_2 \subseteq V_1\)，
因此\(\dim(V_1 \cap V_2) \leq \dim V_1\).
设\[
	\dim V_1=n_1, \qquad
	\dim V_2=n_2, \qquad
	\dim(V_1 \cap V_2)=m.
\]
在\(V_1 \cap V_2\)中取一个基\(\AutoTuple{\alpha}{m}\)，
把它分别扩充成\(V_1,V_2\)的一个基：\[
	\AutoTuple{\alpha}{m},\AutoTuple{\beta}{n_1-m}, \qquad
	\AutoTuple{\alpha}{m},\AutoTuple{\gamma}{n_2-m},
\]
于是\begin{align*}
	V_1+V_2
	&=\opair{\AutoTuple{\alpha}{m},\AutoTuple{\beta}{n_1-m}}
	+\opair{\AutoTuple{\alpha}{m},\AutoTuple{\gamma}{n_2-m}} \\
	&=\opair{
		\AutoTuple{\alpha}{m},
		\AutoTuple{\beta}{n_1-m},
		\AutoTuple{\gamma}{n_2-m}
	}.
\end{align*}
我们希望证明
\(\AutoTuple{\alpha}{m},
\AutoTuple{\beta}{n_1-m},
\AutoTuple{\gamma}{n_2-m}\)
是\(V_1+V_2\)的一个基，
从而得出\begin{align*}
	\dim(V_1+V_2)
	&=m+(n_1-m)+(n_2-m) \\
	&=n_1+n_2-m \\
	&=\dim V_1+\dim V_2-\dim(V_1 \cap V_2).
\end{align*}
假设等式\[
%@see: 《高等代数（第三版 下册）》（丘维声） P86 (4)
	k_1\alpha_1+\dotsb+k_m\alpha_m
	+p_1\beta_1+\dotsb+p_{n_1-m}\beta_{n_1-m}
	+q_1\gamma_1+\dotsb+q_{n_2-m}\gamma_{n_2-m}
	=0
	\eqno(1)
\]成立，
则\[
%@see: 《高等代数（第三版 下册）》（丘维声） P86 (5)
	q_1\gamma_1+\dotsb+q_{n_2-m}\gamma_{n_2-m}
	=-k_1\alpha_1-\dotsb-k_m\alpha_m
	-p_1\beta_1-\dotsb-p_{n_1-m}\beta_{n_1-m}.
\]
注意到上式左边的向量属于\(V_2\)，
右边的向量属于\(V_1\)，
从而左边的向量属于\(V_1 \cap V_2\)，
因此它可由\(\AutoTuple{\alpha}{m}\)线性表出：\[
	q_1\gamma_1+\dotsb+q_{n_2-m}\gamma_{n_2-m}
	=l_1\alpha_1+\dotsb+l_m\alpha_m,
\]
移项得\[
%@see: 《高等代数（第三版 下册）》（丘维声） P86 (6)
	l_1\alpha_1+\dotsb+l_m\alpha_m
	-q_1\gamma_1-\dotsb-q_{n_2-m}\gamma_{n_2-m}
	=0.
\]
由于\(\AutoTuple{\alpha}{m},\AutoTuple{\gamma}{n_2-m}\)是\(V_2\)的一个基，
因此从上式得出\[
	l_1=\dotsb=l_m=0, \qquad
	q_1=\dotsb=q_{n_2-m}=0.
\]
代入(1)式，得\[
	k_1\alpha_1+\dotsb+k_m\alpha_m
	+p_1\beta_1+\dotsb+p_{n_1-m}\beta_{n_1-m}
	=0.
\]
同理可得\[
	k_1=\dotsb=k_m=0, \qquad
	p_1=\dotsb=p_{n_1-m}=0.
\]
因此
\(\AutoTuple{\alpha}{m},
\AutoTuple{\beta}{n_1-m},
\AutoTuple{\gamma}{n_2-m}\)
线性无关.
\end{proof}
\end{theorem}

\begin{corollary}\label{theorem:线性空间.子空间.子空间的维数公式.推论1}
%@see: 《高等代数（第三版 下册）》（丘维声） P86 推论10
设\(V_1,V_2\)都是域\(F\)上\(n\)维线性空间\(V\)的子空间，
则\[
	\dim(V_1+V_2)=\dim V_1+\dim V_2
	\iff
	V_1 \cap V_2=0.
\]
\end{corollary}

\begin{definition}
%@see: 《Linear Algebra and Its Applications (Second Edition)》（Peter D. Lax） P7 Definition
\(n\)维线性空间\(V\)的每一个\(n-1\)维子空间，
都称为“\(V\)中的一个\DefineConcept{超平面}（hyperplane）”.
\end{definition}

\subsection{子空间的直和、补空间}
假设在几何空间\(V\)中，\(V_1\)是过原点的一个平面，\(V_2\)是过原点的一条直线，
且直线\(V_2\)不在平面\(V_1\)上.
容易看出\(V_1 + V_2 = V\)，
且\(V_1 + V_2\)中的每一个向量\(\alpha\)
都能被唯一地表示成\[
	\alpha = \alpha_1 + \alpha_2,
	\quad
	\alpha_1 \in V_1,
	\alpha_2 \in V_2.
\]
受此启发，引出以下概念.
\begin{definition}
%@see: 《高等代数（第三版 下册）》（丘维声） P86 定义2
%@see: 《Linear Algebra and Its Applications (Second Edition)》（Peter D. Lax） P6 Definition
设\(V_1,V_2\)是域\(F\)上线性空间\(V\)的子空间，
\(U = V_1 + V_2\).
如果\[
	(\forall\alpha\in U)
	(\exists!\alpha_1\in V_1)
	(\exists!\alpha_2\in V_2)
	[\alpha=\alpha_1+\alpha_2],
\]
则称“\(U\)是\(V_1\)和\(V_2\)的\DefineConcept{直和}%
（\(U\) is the \emph{direct sum} of \(V_1\) and \(V_2\)）”，
记作\(U = V_1 \DirectSum V_2\).
\end{definition}

\begin{example}\label{example:线性空间.子空间.直和.例1}
在实数域上的线性空间\(\mathbb{R}^2\)中，
记\(V_1=\opair{(1,0)},
V_2=\opair{(0,1)},
V_3=\opair{(1,1)}\)，
显然\(V_1+V_2\)和\(V_1+V_3\)都是直和.
这也说明：给定一个子空间\(V_1\)，
满足条件“\(V_1+V_2\)是直和”的\(V_2\)不是唯一的.
\end{example}

\begin{theorem}
%@see: 《高等代数（第三版 下册）》（丘维声） P86 定理11
设\(V_1,V_2\)是域\(F\)上线性空间\(V\)的有限维子空间，
则下列命题互相等价：\begin{itemize}
	\item \(V_1+V_2\)是直和；
	\item \(V_1+V_2\)中零向量的表示法唯一；
	\item \(V_1 \cap V_2=0\)；
	% \(V_1 \cap V_2=0\)中的\(0\)是零子空间
	\item \(\dim(V_1+V_2)=\dim V_1+\dim V_2\)；
	\item \(V_1\)的一个基与\(V_2\)的一个基 合起来是\(V_1+V_2\)的一个基.
\end{itemize}
\begin{proof}
% (i) => (ii)
“\(V_1+V_2\)是直和”显然是“\(V_1+V_2\)中零向量的表示法唯一”的充分条件.
%TODO 还不理解
% 假设\(0\)有两种表示方法：\begin{gather*}
% 	0 = \alpha_1 + \alpha_2,
% 	\quad \alpha_1 \in V_1,
% 	\alpha_2 \in V_2, \\
% 	0 = \beta_1 + \beta_2,
% 	\quad \beta_1 \in V_1,
% 	\beta_1 \in V_2,
% \end{gather*}

% (ii) => (iii)
下面证明“\(V_1+V_2\)中零向量的表示法唯一”是“\(V_1 \cap V_2=0\)”的充分条件.
任取\(\alpha \in V_1 \cap V_2\)，
于是零向量可以表示成\[
	0 = \alpha + (-\alpha),
	\quad
	\alpha \in V_1,
	-\alpha \in V_2.
\]
由已知条件得\(\alpha = 0\).
因此\(V_1 \cap V_2 = 0\).

% (iii) => (i)
下面证明“\(V_1 \cap V_2=0\)”是“\(V_1+V_2\)是直和”的充分条件.
任取\(\alpha \in V_1 + V_2\)，
假设\(\alpha\)有两种表示方法：\begin{gather*}
	\alpha = \alpha_1 + \alpha_2,
	\quad \alpha_1 \in V_1,
	\alpha_2 \in V_2, \\
	\alpha = \beta_1 + \beta_2,
	\quad \beta_1 \in V_1,
	\beta_2 \in V_2,
\end{gather*}
则\(\alpha_1 + \alpha_2
= \beta_1 + \beta_2\)，
从而得到\(\alpha_1 - \beta_1
= \beta_2 - \alpha_2
\in V_1 \cap V_2\).
由于\(V_1 \cap V_2 = 0\)，
因此\(\alpha_1 = \beta_1,
\alpha_2 = \beta_2\)，
从而\(V_1 + V_2\)是直和.

% (iii) <=> (iv)
下面证明“\(V_1 \cap V_2=0\)”是“\(\dim(V_1+V_2)=\dim V_1+\dim V_2\)”的充分必要条件.
由\cref{theorem:线性空间.子空间.子空间的维数公式.推论1} 立即可得.

% (iv) => (v)
下面证明“\(\dim(V_1+V_2)=\dim V_1+\dim V_2\)”是“\(V_1\)的一个基与\(V_2\)的一个基 合起来是\(V_1+V_2\)的一个基”的充分条件.
设\(\AutoTuple{\alpha}{s}\)是\(V_1\)的一个基，
\(\AutoTuple{\beta}{r}\)是\(V_2\)的一个基，
则\begin{align*}
	V_1 + V_2
	&= \opair{\AutoTuple{\alpha}{s}} + \opair{\AutoTuple{\beta}{r}} \\
	&= \opair{\AutoTuple{\alpha}{s},\AutoTuple{\beta}{r}}.
\end{align*}
因为\(\dim(V_1 + V_2)
= \dim V_1 + \dim V_2
= s + r\)，
且\(V_1 + V_2\)的每一个向量均可由\(\AutoTuple{\alpha}{s},\AutoTuple{\beta}{r}\)线性表出，
所以由\cref{example:线性空间.生成子空间等于线性空间的向量组就是基} 可知
\(\AutoTuple{\alpha}{s},\AutoTuple{\beta}{r}\)是由\(V_1 + V_2\)的一个基.

% (v) => (iv)
“\(\dim(V_1+V_2)=\dim V_1+\dim V_2\)”显然是“\(V_1\)的一个基与\(V_2\)的一个基 合起来是\(V_1+V_2\)的一个基”的必要条件.
\end{proof}
\end{theorem}

\begin{definition}
%@see: 《高等代数（第三版 下册）》（丘维声） P87
设\(V_1,V_2\)都是线性空间\(V\)的子空间，
如果\(V_1 \DirectSum V_2 = V\)，
则称“\(V_1\)是\(V_2\)在\(V\)中的一个\DefineConcept{补空间}%
（\(V_1\) is a \emph{complement} of \(V_2\) in \(V\)）”
“\(V_2\)是\(V_1\)在\(V\)中的一个{补空间}”
或“\(V_1,V_2\)互为{补空间}（\(V_1,V_2\) are complements of each other）”，
记\(V=V_1 \DirectSum V_2\).
\end{definition}

\begin{proposition}
%@see: 《高等代数（第三版 下册）》（丘维声） P87 命题12
%@see: 《Linear Algebra and Its Applications (Second Edition)》（Peter D. Lax） P6 Theorem 5.(b)
设\(V\)是域\(F\)上\(n\)维线性空间，
则\(V\)的每一个子空间\(U\)都有补空间.
\begin{proof}
从\(U\)中取一个基\(\AutoTuple{\alpha}{m}\)，
把它扩充成\(V\)的一个基\(\AutoTuple{\alpha}{m},
\AutoTuple{\alpha}[m+1]{n}\)，
则\[
	V=\opair{\AutoTuple{\alpha}{m},\AutoTuple{\alpha}[m+1]{n}}
	=\opair{\AutoTuple{\alpha}{m}}+\opair{\AutoTuple{\alpha}[m+1]{n}}
	=U+W,
\]
其中\(W=\opair{\AutoTuple{\alpha}[m+1]{n}}\).
由于\(U\)的一个基与\(W\)的一个基合起来是\(V\)的一个基，
因此\(U+W\)是直和，
从\(V=U \DirectSum W\).
于是\(W\)是\(U\)的一个补空间.
\end{proof}
\end{proposition}

\begin{example}
%@see: 《高等代数（第三版 下册）》（丘维声） P88 例2
设\(V=M_n(K)\)，
其中\(K\)是数域.
分别用\(V_1,V_2\)表示\(K\)上所有\(n\)阶对称矩阵、反对称矩阵组成的子空间.
证明：\(V_1 \DirectSum V_2=V\).
\begin{proof}
首先证明\(V_1+V_2=V\).
显然有\(V_1+V_2\subseteq V\).
现在来证\(V\subseteq V_1+V_2\).
任取\(A\in V\)，
有\[
	A=\frac{A+A^T}2+\frac{A-A^T}2.
\]
容易验证\(\frac{A+A^T}2\)是对称矩阵，
\(\frac{A-A^T}2\)是反对称矩阵，
因此\(A\in V_1+V_2\).
从而\(V\subseteq V_1+V_2\)，
所以\(V_1+V_2=V\).

然后证\(V_1+V_2\)是直和，
为此只要证\(V_1 \cap V_2=0\).
任取\(B \in V_1 \cap V_2\)，
则\(B^T = B = -B\)，
从而\(B = 0\).
因此\(V_1 \cap V_2=0\).

综上所述，\(V=V_1 \DirectSum V_2\).
\end{proof}
\end{example}

子空间的直和的概念可以推广到多个子空间的情形.
\begin{definition}
%@see: 《高等代数（第三版 下册）》（丘维声） P88 定义3
%@see: 《Linear Algebra and Its Applications (Second Edition)》（Peter D. Lax） P6 Definition
设\(\AutoTuple{V}{s}\)都是域\(F\)上线性空间\(V\)的子空间，
\(U\)也是\(V\)的一个子空间.
如果\(U\)中每一个向量\(\alpha\)可唯一地表示成\[
	\alpha = \alpha_1+\dotsb+\alpha_s,
	\quad \alpha_i \in V_i,
\]
则称“\(U\)是\(\AutoTuple{V}{s}\)的\DefineConcept{直和}%
（\(U\) is the \emph{direct sum} of \(\AutoTuple{V}{s}\)）”，
记作\(U = \bigoplus_{i=1}^s V_i\).
\end{definition}

\begin{theorem}
%@see: 《高等代数（第三版 下册）》（丘维声） P88 定理13
设\(\AutoTuple{V}{s}\)都是域\(F\)上线性空间\(V\)的有限维子空间，
则下列命题互相等价：\begin{itemize}
	\item \(\sum_{i=1}^s V_i\)是直和；
	\item \(\sum_{i=1}^s V_i\)中零向量的表示法唯一；
	\item \(V_i \cap \sum_{j\neq i} V_j=0\ (i=1,2,\dotsc,s)\)；
	\item \(\dim\sum_{i=1}^s V_i=\sum_{i=1}^s\dim V_i\)；
	\item \(V_i\ (i=1,2,\dotsc,s)\)的一个基 合起来是\(\sum_{i=1}^s V_i\)的一个基.
\end{itemize}
\end{theorem}

\begin{corollary}
%@see: 《高等代数（第三版 下册）》（丘维声） P88 推论14
设\(\AutoTuple{V}{s}\)都是域\(F\)上\(n\)维线性空间\(V\)的子空间，
则\[
	V=\bigoplus_{i=1}^s V_i
	\iff
	\text{\(V_i\ (i=1,2,\dotsc,s)\)的一个基，合起来是\(V\)的一个基}.
\]
\end{corollary}

这个推论让我们可以利用子空间的运算来研究线性空间的结构，
它是研究线性空间的结构的第二条途径.

\begin{example}
%@see: 《高等代数（第三版 下册）》（丘维声） P89 例3
设\(V=K^4,
V_1=\opair{\AutoTuple\a3},
V_2=\opair{\AutoTuple\b2}\)，
其中\[
	\alpha_1=\begin{bmatrix} 1 \\ 2 \\ 1 \\ 0 \end{bmatrix},
	\alpha_2=\begin{bmatrix} -1 \\ 1 \\ 1 \\ 1 \end{bmatrix},
	\alpha_3=\begin{bmatrix} 0 \\ 3 \\ 2 \\ 1 \end{bmatrix},
	\beta_1=\begin{bmatrix} 2 \\ -1 \\ 0 \\ 1 \end{bmatrix},
	\beta_2=\begin{bmatrix} 1 \\ -1 \\ 3 \\ 7 \end{bmatrix},
\]
分别求\(V_1+V_2,V_1 \cap V_2\)的一个基和维数.
\begin{solution}
因为\[
	V_1+V_2
	=\opair{\AutoTuple\a3}+\opair{\AutoTuple\b2}
	=\opair{\AutoTuple\a3,\AutoTuple\b2},
\]
所以向量组\(\AutoTuple\a3,\AutoTuple\b2\)的一个极大线性无关组就是\(V_1+V_2\)的一个基，
这个向量组的秩就是\(V_1+V_2\)的维数.
令\(A=(\AutoTuple\a3,\AutoTuple\b2)\).
对\(A\)作一系列初等行变换，得到\[
	A=\begin{bmatrix}
		1 & -1 & 0 & 2 & 1 \\
		2 & 1 & 3 & -1 & -3 \\
		1 & 1 & 2 & 0 & 3 \\
		0 & 1 & 1 & 1 & 7
	\end{bmatrix}
	\to \begin{bmatrix}
		1 & 0 & 1 & 0 & -1 \\
		0 & 1 & 1 & 0 & 4 \\
		0 & 0 & 0 & 1 & 3 \\
		0 & 0 & 0 & 0 & 0
	\end{bmatrix}.
\]
由此得出，\(\alpha_1,\alpha_2,\beta_1\)是\(V_1+V_2\)的一个基，
\(\dim(V_1+V_2)=3\).
同时也知道，\(\beta_2\)可由\(\alpha_1,\alpha_2,\beta_1\)线性表出，
其系数是线性方程组\(x_1\alpha_1+x_2\alpha_2+x_3\beta_1=\beta_2\)的解\((-1,4,3)^T\)，
即\(\beta_2=-\alpha_1+4\alpha_2+3\beta_1\).
从而\(\alpha_1-4\alpha_2=3\beta_1-\beta_2\in V_1 \cap V_2\).
又因为\(\dim V_1=2,
\dim V_2=2\)，
所以由子空间的维数公式有
\(\dim(V_1 \cap V_2)
=\dim V_1+\dim V_2-\dim(V_1+V_2)
=2+2-3=1\)，
于是\(\alpha_1-4\alpha_2=(5,-2,-3,-4)^T\)是\(V_1 \cap V_2\)的一个基.
\end{solution}
\end{example}

从上例可以看出，
只要对矩阵\(A\)作一系列初等行变换，
把它化为若尔当阶梯形矩阵，
就可以得到子空间的基和维数等信息.
