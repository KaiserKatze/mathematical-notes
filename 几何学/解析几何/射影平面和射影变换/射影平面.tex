\section{射影平面，齐次坐标}
\subsection{以点为中心的把，扩充欧氏平面}
%@see: 《解析几何》（丘维声） P252
本节研究一个平面上的各个几何元素之间的关联关系.
由\cref{theorem:欧氏几何.定理2}
可知过一条直线\(l\)和不在\(l\)上的一点\(P\)，有且仅有一个平面（记为\(\pi\)）.
于是平面\(\pi\)就可以看成是一些点和直线的集合.
用同样的观点来看点\(O\)，那么我们看到的就是：
所有与点\(O\)关联的平面\(\lambda\)和直线\(p\).
今后我们将与一个点\(O\)关联的所有平面和直线的集合
称为“以点\(O\)为中心的\DefineConcept{把}”.

接下来，继续按这个观点，考察中心投影的构成.
我们会发现，把与平面之间存在简单而且自然的对应关系.
设点\(O\)不在平面\(\pi\)上，则平面\(\pi\)上的每一个点\(P\)决定把\(O\)中的一条直线\(OP\)；
平面\(\pi\)上的每一条直线\(l\)决定把\(O\)中的一个平面\(Ol\).
这样就得到一个从平面\(\pi\)到把\(O\)的一个映射，
称为“平面\(\pi\)在把\(O\)上的\DefineConcept{射影}”.
反过来，从把\(O\)到平面\(\pi\)也有一个对应关系.
把\(O\)中的每一个平面\(\lambda\)与平面\(\pi\)交于一条直线（用\(\pi\lambda\)表示），
把\(O\)中的每一条直线\(p\)与平面\(\pi\)交于一个点（用\(\pi p\)表示）.
我们将这个对应关系称为“把\(O\)在平面\(\pi\)上的\DefineConcept{截影}”.

容易看出，经过射影和截影，关联关系是不变的.

我们还可以看出，中心投影可以分解成射影、截影两个步骤：
从平面\(\pi_0\)到\(\pi_1\)、以点\(O\)为中心的中心投影，
实际上就是\(\pi_0\)在把\(O\)上的射影，
与把\(O\)在\(\pi_1\)上的截影，
这两个映射的复合.
在\cref{figure:解析几何.射影平面和射影变换.中心射影} 中，
平面\(\pi_0\)上的点\(M\)在中心投影下没有像，
这是因为把\(O\)的直线\(OM\)在截影下没有像；
平面\(\pi_1\)上的点\(N\)在中心投影下没有原像，
这是因为把\(O\)的直线\(ON\)在射影下没有原像.
为什么把\(O\)中有的直线在截影下没有像，
有的直线在射影下没有原像，
其原因就在于欧几里得平面的结构与把的结构是不同的.
弥补这一缺陷的方法，应当是将把作为模型，对欧几里得平面加以扩充.

现在我们就将把\(O\)作为模型，来扩充欧几里得平面，
使得射影和截影能够成为它们之间的、保持关联关系不变的双射.
取一个欧几里得平面\(\pi_0\)，使点\(O\)不在\(\pi_0\)上.
过点\(O\)，有且仅有一个平面\(\pi_0'\)与\(\pi_0\)平行.
容易看出，在从\(\pi_0\)到把\(O\)的射影下，
\(\pi_0'\)以及\(\pi_0'\)上的每一条直线都没有原像；
而在从把\(O\)到\(\pi_0\)的截影下，
\(\pi_0'\)以及\(\pi_0'\)上的每一条直线都没有像.
为了使射影和截影都成为双射，
就应当在\(\pi_0\)上加进一条“直线”，让它和把\(O\)中的平面\(\pi_0'\)对应，
还应当在\(\pi_0\)上添上一些“点”，让它们和把\(O\)中的平面\(\pi_0'\)上的直线对应，
而且像这样添加了新的元素（“直线”和“点”）以后，
应该让射影和截影仍旧保持关联关系不变.
为此，采取如下的扩充方法：
考虑到\(\pi_0\)上的每一条直线\(l\)在把\(O\)中的对应平面\(Ol\)
与\(\pi_0'\)有唯一的交线\(l'\)（如\cref{figure:解析几何.射影平面和射影变换.无穷远点} 所示），
规定在\(\pi_0\)的每一条直线\(l\)上加进唯一的一个“点”，来与\(l'\)相对应.
我们将新添加的这个与\(l'\)对应的“点”称为\DefineConcept{无穷远点}.
%TODO 与\DefineConcept{灭点}（vanishing point）
相对地，为了以示区别，我们将原有的、不是无穷远点的那些点称为\DefineConcept{通常点}.
今后我们把通常点和无穷远点统称为\DefineConcept{点}.
由于\(\pi_0\)上平行的直线在把\(O\)中的对应平面与\(\pi_0'\)的交线都相同
% （与\(l\)平行的直线\(m\)在把\(O\)中对应平面\(Om\)与\(\pi_0'\)的交线还是\(l'\)），
而\(\pi_0\)上不平行的直线在把\(O\)中的对应平面与\(\pi_0'\)的交线都不同，
因此规定：
\(\pi_0\)上平行的直线有相同的无穷远点，
\(\pi_0\)上不平行的直线有不同的无穷远点.
最后，为了与把\(O\)中的平面\(\pi_0'\)对应，
我们在\(\pi_0\)上还要加进一条“直线”作为\(\pi_0\)与\(\pi_0'\)的“交线”.
我们将新添加的这条“直线”称为\DefineConcept{无穷远直线}.
于是无穷远直线对应于把\(O\)中的平面\(\pi_0'\).
由于无穷远点所对应的把\(O\)中的直线都在\(\pi_0'\)上，
因此规定无穷远点都在无穷远直线上.

\begin{figure}[hbt]
%@see: 《解析几何》（丘维声） P254 图7.2
	\centering
	\begin{tikzpicture}
		\draw(0,0)--(4,0)--++(1,{sqrt(3)})node[below left]{$\pi_0'$}--++(-4,0)--(0,0);
		\draw(.6,0)coordinate(l1a)--(3,{sqrt(3)})coordinate(l1b)node[above]{$l'$};
		\fill($.7*(l1a) + .3*(l1b)$)coordinate(O)circle(2pt)node[above left]{$O$};
		\pgfmathsetmacro{\kp}{1.2}
		\pgfmathsetmacro{\yp}{-2.8}
		\draw(-1.5,\yp)coordinate(p0a)
			--++(6,0)coordinate(p0b)node[above left]{$\pi_0$}
			--++(1.2,{\kp*sqrt(3)})coordinate(p0c);
		\draw($(p0c) + (p0a) - (p0b)$)coordinate(p0d)--(p0a);
		\draw[name path=l1al2a](l1a)--(-.5,\yp)coordinate(l2a);
		\draw[name path=lal1a](l1a)--(1.5,\yp)coordinate(la);
		\draw(la)--($(la) + \kp*(l1b) - \kp*(l1a)$)coordinate(lb)node[pos=.7,below]{$l$};
		\path[name path=l2](l2a)--($(l2a) + \kp*(l1b) - \kp*(l1a)$)coordinate(l2b);
		\draw[dashed](l1b)--(l2b);
		\draw(l1b)--(lb);
		\draw(p0c)--(lb);
		\path[name path=p0cd](p0c)--(p0d);
		\begin{scope}[name intersections={of=p0cd and l1al2a}]
			\draw[dashed](intersection-1)--(lb);
			\draw(intersection-1)--(p0d);
		\end{scope}
		\begin{scope}[name intersections={of=lal1a and l2}]
			% \fill[color=red](intersection-1)circle(2pt);
			\draw(l2a)--(intersection-1)node[midway,above]{$m$};
			\draw[dashed](intersection-1)--(l2b);
		\end{scope}
	\end{tikzpicture}
	\caption{}
	\label{figure:解析几何.射影平面和射影变换.无穷远点}
\end{figure}

把上面的讨论总结一下：
对于欧几里得平面\(\pi_0\)，
在它的每一条直线上都加进了一个无穷远点\(P_\infty\)，
平行的直线有相同的无穷远点，
不平行的直线有不同的无穷远点
（这样一来，与每个无穷远点对应的是一个完全确定的方向），
所有无穷远点组成一条无穷远直线\(l_\infty\).
补充了这样一些无穷远点和一条无穷远直线的欧几里得平面\(\pi_0\)，
就称为一个\DefineConcept{扩充欧几里得平面}，
记作\(\overline{\pi_0}\)，
即\(
	\overline{\pi_0}
	\defeq
	\pi_0 \cup l_\infty
\).

显然，扩充欧氏平面\(\overline{\pi_0}\)
与把\(O\)之间的射影和截影都是保持关联关系不变的双射，
也就是说：
\(\overline{\pi_0}\)上的所有点
与把\(O\)中的所有直线一一对应；
\(\overline{\pi_0}\)上的所有直线
与把\(O\)中的所有平面一一对应；
\(\overline{\pi_0}\)上一点\(P\)与一直线\(l\)关联，
当且仅当把\(O\)中与\(P\)对应的直线\(OP\)和与\(l\)对应的平面\(Ol\)关联.
因此，当我们只考虑基本几何元素之间的关联关系时，
扩充欧氏平面的结构与把的结构在本质上是一样的.
由此我们抽象出射影平面的概念.

\subsection{射影平面的定义和几何模型}
下面我们首先给出“射影平面”的一个粗糙的定义，
建立起对这个概念的感性认知.

%@see: 《解析几何》（丘维声） P255 定义1.1
由两类分别称为“点”和“直线”的元素所构成的集合\(S\)，
如果在其中的“点”和“直线”之间规定了某种名为“关联”的关系，
并且\(S\)中所有“点”和所有“直线”
可以分别与欧氏空间中的一个把\(O\)中的所有直线和所有平面建立一一对应关系，
使得对应关系保持关联性，
则称\(S\)是一个“射影平面”.

下面我们给出几个例子：\begin{enumerate}
	\item
	%@see: 《解析几何》（丘维声） P255 例1.1
	对于几何空间中的任意一个把\(O\)，
	如果将其中的直线称为“点”，将其中平面称为“直线”，
	那么它就是一个射影平面.
	%TODO 无穷远直线在哪里？是不是可以任意取定一条直线，将它视作无穷远直线？

	\item
	%@see: 《解析几何》（丘维声） P255 例1.2
	扩充欧氏平面\(\overline{\pi_0}\)是一个射影平面.

	\item
	%@see: 《解析几何》（丘维声） P255 例1.3
	取定一个球面，球心为\(O\).
	将球面上每一对{对径点}（即位于直径两端的两个点）看成一个“点”.
	将球面上每一个大圆（即球面与过球面的平面的交线）看成一条“直线”.
	如果一对对径点在一个大圆上，那么我们说“点”在“直线”上.
	这样我们就得到一个射影平面.
	%TODO 无穷远直线在哪里？是不是可以任意取定一条直线，将它视作无穷远直线？
\end{enumerate}

%@see: 《解析几何》（丘维声） P256
任意两个射影平面，由于它们的“点”“直线”分别有一一对应关系，且该对应保持关联性，
因此它们的有关“点”和“直线”的关联关系方面的性质是相同的.
于是，我们在研究这方面的性质时，
只要取一个射影平面作为代表来研究就可以了.
今后我们常常取把\(O\)或者扩充欧氏平面\(\overline{\pi_0}\)作为代表，
这是因为把\(O\)中“点”和“直线”的关联关系非常直观，
并且由于把\(O\)在几何空间中，
这样我们可以运用几何空间的有关知识来研究把\(O\)的性质；
至于扩充欧氏平面\(\overline{\pi_0}\)，
由于它是由欧氏平面扩充得到的，
所以可以通过\(\overline{\pi_0}\)来解决欧氏平面上的一些问题.

现在我们就利用把\(O\)来研究射影平面上点与直线的关联关系.
从把\(O\)看，两条不同的直线唯一地决定一个经过它们的平面；
反过来，两个不同的平面相交于唯一的一条直线.
所以，在射影平面上有以下两条性质：
\begin{enumerate}
	\item 两个点必与唯一一条直线关联；
	\item 两条直线必与唯一一个点关联.
\end{enumerate}

接着我们在扩充欧氏平面\(\overline{\pi_0}\)上检验一下上述事实.
欧氏平面上的一条直线（简称\DefineConcept{欧氏直线}）加进一个无穷远点后
就成为扩充欧氏平面上的一条直线，
这样的直线称为扩充欧氏平面上的\DefineConcept{射影直线}.
%TODO 欧氏直线、射影直线的定义需要澄清.
%TODO 无穷远直线是不是射影直线？
如上所述，\(\overline{\pi_0}\)上的一条射影直线是由\(\pi_0\)的一条欧氏直线唯一确定的，
从而在\(\overline{\pi_0}\)的全体射影直线与\(\pi_0\)的全体直线之间存在一个一一对应关系.
但是要注意，\(\overline{\pi_0}\)上除了射影直线外，还有一条无穷远直线.

下面来看\(\overline{\pi_0}\)上两个不同的点必与唯一一条直线关联的意义.
如果这两个点都是\(\pi_0\)上的通常点，
则它们决定一条欧氏直线，
从而决定了一条射影直线.
如果这两个点中有一个是通常点，另一个是无穷远点，
那么它们也决定一条欧氏直线
（就是经过这个通常点，而与给定的无穷远点所对应的方向平行的直线），
因而它们也就决定了一条射影直线.
如果这两个点都是无穷远点，
则它们决定了唯一一条无穷远直线.

再看\(\overline{\pi_0}\)上两条不同的直线必与唯一一个点关联的意义.
两条不同的射影直线，
要么交于一个通常点（它们对应的两条欧氏直线不平行）
要么交于一个无穷远点（它们对应的两条欧氏直线平行）；
一条射影直线和无穷远直线交于一个无穷远点.

由此可见，平行的概念在射影平面上是没有意义的，因为射影平面上任意两条直线总相交.

射影平面与欧氏平面还有一些不同之处.
例如，射影平面上的直线是封闭的，好比圆周一样.
从按照把的模型引进无穷远点的规定可以直观地看出这一点：
考虑\(\overline{\pi_0}\)上两个通常点在一条直线\(l\)上沿着相反的方向跑向无穷远处，
在把\(O\)中与这两个点对应的两条直线都将趋于把\(O\)中与\(l\)平行的那条唯一的直线，
这说明\(\overline{\pi_0}\)上两个点在一条直线上沿着相反的方向远离时将达到同一个无穷远点.
又如，在欧氏平面\(\pi_0\)上，一条直线将平面分成两部分，
但是射影平面\(\overline{\pi_0}\)上的一条直线不能分割射影平面.
譬如，在\(\overline{\pi_0}\)上把无穷远直线去掉，
亦即除掉所有的无穷远点，
我们得到的是一个欧氏平面\(\pi_0\)，
可见无穷远直线并没有把\(\overline{\pi_0}\)分成两块.
由于从把的结构上看，
射影平面上的无穷远直线与其他直线并无本质的不同，
因此\(\overline{\pi_0}\)上的任意一条直线都不能把\(\overline{\pi_0}\)分成两块.

%@see: 《解析几何》（丘维声） P257
几何空间是由所有点组成的集合，
也可看成以定点\(O\)为起点的所有定位向量组成的集合.
把几何空间看成后者，则它是实数域\(\mathbb{R}\)上的三维线性空间，
经过点\(O\)的直线是它的一维子空间，
经过点\(O\)的平面是它的二维子空间，
于是，把\(O\)中的直线就是几何空间的一维子空间，把\(O\)中的平面就是几何空间的二维子空间.
由于把\(O\)本身就是一个射影平面，
于是受此启发，我们考虑下述几何模型.

设\(V\)是实数域\(\mathbb{R}\)上的三维线性空间，
将\(V\)的每一个一维子空间称为“点”，
将\(V\)的每一个二维子空间称为“直线”，
并且规定若向量\(\alpha\)生成的一维子空间\(\Span\{\alpha\}\)
包含于向量\(\beta,\gamma\)生成的二维子空间\(\Span\{\beta,\gamma\}\)，
则称“点”\(\Span\{\alpha\}\)与“直线”\(\Span\{\beta,\gamma\}\)关联，
那么由这样的“点”和“直线”构成的集合，记作\(\mathcal{P}(\mathbb{R}^2)\).
由于\(V\)和几何空间都是实数域\(\mathbb{R}\)上的三维线性空间，
因此它们同构，从而\(V\)的每一个一维子空间与几何空间中经过点\(O\)的直线，
即把\(O\)中的直线有一个一一对应，
\(V\)的每一个二维子空间与几何空间中经过点\(O\)的平面，
即把\(O\)中的平面也有一个一一对应，
并且当\(V\)中\(\Span\{\alpha\} \subseteq \Span\{\beta,\gamma\}\)，
则\(\Span\{\alpha\}\)对应的把\(O\)中的直线
与\(\Span\{\beta,\gamma\}\)对应的把\(O\)中的平面关联.
于是，根据射影平面的定义，\(\mathcal{P}(\mathbb{R}^2)\)是一个射影平面，
我们称其为\DefineConcept{实射影平面}.

我们来探索实射影平面\(\mathcal{P}(\mathbb{R}^2)\)的性质.

\begin{property}
%@see: 《解析几何》（丘维声） P258 性质1
任意给定实射影平面\(\mathcal{P}(\mathbb{R}^2)\)中两个不同的点，
有且仅有一条直线与这两个点关联.
%TODO proof
\end{property}

\begin{property}
%@see: 《解析几何》（丘维声） P258 性质2
任意给定实射影平面\(\mathcal{P}(\mathbb{R}^2)\)中两条不同的直线，
有且仅有一个点与这两条直线关联.
%TODO proof
\end{property}

\begin{property}
%@see: 《解析几何》（丘维声） P258 性质3
实射影平面\(\mathcal{P}(\mathbb{R}^2)\)中
存在四个不同的点，其中任意三点都不与一条直线关联.
%TODO proof
\end{property}

从\(\mathcal{P}(\mathbb{R}^2)\)的上述性质受到启发，我们可以抽象出下述概念，
建立起对“射影平面”的理性认知.

\begin{definition}
%@see: 《解析几何》（丘维声） P259 定义1.2
设\(V\)和\(\mathscr{B}\)是两个不相交的集合（即\(V \cap \mathscr{B} = \emptyset\)），
取二元关系\(I \subseteq V \times \mathscr{B}\)，
则称“\((V,\mathscr{B},I)\)是一个\DefineConcept{关联结构}”，
把\(V\)的元素称为\DefineConcept{点}，
把\(\mathscr{B}\)的元素称为\DefineConcept{区组}.
若\((P,B) \in I\)，
则称“点\(P\)与区组\(B\) \DefineConcept{关联}”
“点\(P\)在区组\(B\)上”
或“区组\(B\)经过点\(P\)”.
\end{definition}

\begin{definition}\label{definition:射影平面.射影平面}
%@see: 《解析几何》（丘维声） P259 定义1.3
如果关联结构\(\mathscr{D} \defeq (V,\mathscr{B},I)\)满足\begin{enumerate}
	\item 任给两个不同的点，它们恰好在一个区组上；
	\item 任给两个不同的区组，它们相交于唯一一个点；
	\item 存在四个不同的点，其中任意三点都不在一个区组上，
\end{enumerate}
那么称“\(\mathscr{D}\)是一个\DefineConcept{射影平面}”.
\end{definition}

现在我们建立了\hyperref[definition:射影平面.射影平面]{射影平面}的严格定义，
%@see: 《解析几何》（丘维声） P259
显然\(\mathcal{P}(\mathbb{R}^2)\)具有上述三个性质，
那么根据定义，它是一个射影平面.

在几何空间中，对于所有经过点\(O\)的直线构成的集合和所有经过点\(O\)的平面构成的集合，
若经过点\(O\)的直线\(l\)在经过点\(O\)的平面\(\pi\)上，
则称\(l\)与\(\pi\)关联，
那么按照\cref{definition:射影平面.射影平面} 这个关联结构也是一个射影平面，
所以几何空间中的任意一个把是一个射影平面.

%@see: 《解析几何》（丘维声） P260
与\(\mathcal{P}(\mathbb{R}^2)\)是射影平面的理由一样，
任给域\(F\)上的一个3维线性空间\(V\)，
把\(V\)的一维子空间作为“点”，二维子空间作为“直线”，集合的包含关系作为关联关系，
那么这个关联结构也是一个射影平面，记作\(\mathcal{P}(F^2)\).
特别地，
当\(F\)是实数域\(\mathbb{R}\)时，
把\(\mathcal{P}(\mathbb{R}^2)\)称为\DefineConcept{实射影平面}；
当\(F\)是复数域\(\mathbb{C}\)时，
把\(\mathcal{P}(\mathbb{C}^2)\)称为\DefineConcept{复射影平面}；
当\(F\)是有限域\(F_q\)时，
把\(\mathcal{P}(F_q^2)\)称为\DefineConcept{有限射影平面}.

\begin{example}
%@see: 《解析几何》（丘维声） P260
取有限域\(F_2 \defeq \mathbb{Z}_2 = \{\EquivalenceClassO{0},\EquivalenceClassO{1}\}\)，
其中\(\EquivalenceClassO{0}\)表示偶数类，\(\EquivalenceClassO{1}\)表示奇数类.
令\(V \defeq F_2^3\)，
即\(V\)是\(F_2\)上的3维线性空间.
显然\(\card V = 8\).
\(V\)的每个非零向量\(\alpha\)生成一个1维子空间\(\Span\{\alpha\} = \{0,\alpha\}\)，
因此\(\mathcal{P}(V)\)中有7个点.
\(V\)的2维子空间\(\Span\{\alpha,\beta\}\)的个数为\(
	\frac{7\cdot6}{3\cdot2} = 7
\)，
即\(\mathcal{P}(V)\)中有7条直线.
由于\(
	\Span\{\alpha,\beta\}
	= \{0,\alpha,\beta,\alpha+\beta\}
\)，
因此每条直线\(\Span\{\alpha,\beta\}\)上恰好有3个点：\(
	\Span\{\alpha\},
	\Span\{\beta\},
	\Span\{\alpha+beta\}
\).
任取\(\alpha \in V\)，
把它扩充成\(V\)的一个基\(\alpha,\beta,\gamma\)，
则\(
	\Span\{\alpha,\beta\},
	\Span\{\alpha,\gamma\},
	\Span\{\alpha,\beta+\gamma\}
\)都是2维子空间.
由于\(
	\Span\{\alpha\} \subseteq \Span\{\alpha,\beta\},
	\Span\{\alpha\} \subseteq \Span\{\alpha,\gamma\},
	\Span\{\alpha\} \subseteq \Span\{\alpha,\beta+\gamma\}
\)，
因此点\(\Span\{\alpha\}\)在三条直线\(
	\Span\{\alpha,\beta\},
	\Span\{\alpha,\gamma\},
	\Span\{\alpha,\beta+\gamma\}
\)上.
假如点\(\Span\{\alpha\}\)还在第四条直线\(\Span\{\alpha,\delta\}\)上，
由于\(\delta\)可以由\(\alpha,\beta,\gamma\)线性表出
（不妨设\(\delta = k_1 \alpha + k_2 \beta + k_3 \gamma\)），
那么\begin{equation*}
	\Span\{\alpha,\delta\}
	= \Span\{\alpha,k_1 \alpha + k_2 \beta + k_3 \gamma\}
	= \Span\{\alpha,k_2 \beta\} + \Span\{\alpha,k_3 \gamma\},
\end{equation*}
从而\(
	\Span\{\alpha,\delta\}
	\in
	\{
		\Span\{\alpha,\beta\},
		\Span\{\alpha,\gamma\},
		\Span\{\alpha,\beta+\gamma\}
	\}
\).
这证明了点\(\Span\{\alpha\}\)恰好在三条线上.
我们可以用\cref{figure:射影平面.有限射影平面}
形象地表现出\(\mathcal{P}(V)\)上的7个点、7条直线，以及它们之间的关联关系.
\begin{figure}[hbt]
%@see: 《解析几何》（丘维声） P261 图7.4
	\centering
	\begin{tikzpicture}
		\pgfmathsetmacro{\sf}{2}  % 放缩图形大小
		\coordinate(pttt)at(0,0);
		\coordinate(ptff)at(0,2*\sf);
		\coordinate(pftt)at(0,-\sf);
		\coordinate(pfft)at({sqrt(3)*\sf},-\sf);
		\coordinate(pftf)at({-sqrt(3)*\sf},-\sf);
		\coordinate(pttf)at($.5*(pftf)+.5*(ptff)$);
		\coordinate(ptft)at($.5*(pfft)+.5*(ptff)$);
		\fill(pttt)circle(2pt)node[above]{$(\EquivalenceClassO{1},\EquivalenceClassO{1},\EquivalenceClassO{1})$};
		\fill(ptff)circle(2pt)node[above]{$(\EquivalenceClassO{1},\EquivalenceClassO{0},\EquivalenceClassO{0})$};
		\fill(pftt)circle(2pt)node[below]{$(\EquivalenceClassO{0},\EquivalenceClassO{1},\EquivalenceClassO{1})$};
		\fill(pfft)circle(2pt)node[below right]{$(\EquivalenceClassO{0},\EquivalenceClassO{0},\EquivalenceClassO{1})$};
		\fill(pftf)circle(2pt)node[below left]{$(\EquivalenceClassO{0},\EquivalenceClassO{1},\EquivalenceClassO{0})$};
		\fill(pttf)circle(2pt)node[left]{$(\EquivalenceClassO{1},\EquivalenceClassO{1},\EquivalenceClassO{0})$};
		\fill(ptft)circle(2pt)node[right]{$(\EquivalenceClassO{1},\EquivalenceClassO{0},\EquivalenceClassO{1})$};
		\draw(pttt)circle(\sf);
		\draw(ptff)--(pftf)--(pfft)--(ptff);
		\draw(ptff)--(pftt);
		\draw(pftf)--(ptft);
		\draw(pttf)--(pfft);
	\end{tikzpicture}
	\caption{}
	\label{figure:射影平面.有限射影平面}
\end{figure}
\end{example}

从射影平面\(\mathcal{P}(F^2)\)的构造受到启发，我们引出下述概念.
\begin{definition}
%@see: 《解析几何》（丘维声） P260 定义1.4
设\(F\)是一个域，\(V\)是域\(F\)上的一个\(n+1\)维线性空间，
\(\mathscr{W}\)是\(V\)的所有子空间构成的集合，
则把关联结构\((V,\mathscr{W},\subseteq)\)
称为“域\(F\)上的一个\(n\)维\DefineConcept{射影空间}”，
记作\(\mathcal{P}(V)\).
把\(\mathscr{W}\)中一维子空间称为\DefineConcept{点}.
把\(\mathscr{W}\)中二维子空间称为\DefineConcept{直线}.
把\(\mathscr{W}\)中三维子空间称为\DefineConcept{平面}.
把\(\mathscr{W}\)中\(n\)维子空间称为\DefineConcept{超平面}.
把\(\mathscr{W}\)中\(k+1\)维子空间称为\(k\) \DefineConcept{层}.
\end{definition}

设\(V\)是有限域\(F_q\)上的一个\(n\)维线性空间，
\(\mathscr{W}\)是\(V\)的所有向量、所有\(d\ (d>1)\)维子空间组成的集合，
关联结构\((V,\mathscr{W},\subseteq)\)
就是域\(F_q\)上的\(n\)维射影空间，
记作\(\mathcal{P}_d(V)\).

\subsection{点的齐次坐标}
%@see: 《解析几何》（丘维声） P261
解析几何的基本方法是坐标法，
因此我们自然会想到在射影平面上建立某种坐标系，
使得每一个点都有坐标.
以前所讲的仿射坐标或直角坐标
只能表示表示射影平面上的通常点，不能表示无穷远点，
因此我们需要推广坐标的概念，
使它既能表示通常点也能表示无穷远点.

取扩充欧氏平面\(\overline{\pi_0}\)作为射影平面的代表.
为了给\(\overline{\pi_0}\)上的每一个点建立坐标，
考虑到\(\overline{\pi_0}\)上的全体点
与把\(O\)中的全体直线
在射影和截影下有一一对应关系，
而把\(O\)中的每一条直线又由该直线的方向完全决定，
因此自然有如下方法.

对于扩充欧氏平面\(\overline{\pi_0}\)，
在平面\(\pi_0\)上取一个仿射标架\([O_1;\AutoTuple{d}{2}]\)，
再在\(\pi_0\)外取一点\(O\)（如\cref{figure:解析几何.射影平面和射影变换.齐次仿射坐标}），
令\(d_3 \defeq \vec{OO_1}\).
对于\(\overline{\pi_0}\)上任意一点\(M\)，
将\(M\)在把\(O\)中所对应的直线\(l \defeq OM\)的任一方向向量\(v\)
在空间仿射标架\([O;\AutoTuple{d}{3}]\)下的坐标\((\AutoTuple{x}{3})\)
称为“点\(M\)在\([O_1;\AutoTuple{d}{2}]\)下的一个\DefineConcept{齐次仿射坐标}”，
简称\DefineConcept{齐次坐标}.

\begin{figure}[hbt]
%@see: 《解析几何》（丘维声） P261 图7.5
	\centering
	\begin{tikzpicture}
		\draw(0,0)--(5,0)node[above left]{$\overline{\pi_0}$}
			--++(1,2)--++(-5,0)--(0,0);
		\coordinate(O)at(2,-1);
		\coordinate(O1)at(1.4,1);
		\coordinate(M)at(4,1.3);
		\filldraw(O)node[left]{$O$}--(M)circle(2pt)node[right]{$M$}node[pos=.8,below right]{$l$};
		\begin{scope}[-{Latex[length=3mm,width=0pt 10]}]
			\draw(O)--+(1,.5)coordinate(d2)node[right]{$d_2$};
			\draw(O)--+(1,-.2)coordinate(d1)node[right]{$d_1$};
			\draw(O)--(O1)node[pos=.3,left]{$d_3$}node[left]{$O_1$};
			\draw(O1)--($(O1)+(d2)-(O)$)coordinate(d2')node[right]{$d_2$};
			\draw(O1)--($(O1)+(d1)-(O)$)coordinate(d1')node[right]{$d_1$};
		\end{scope}
		\draw[dashed](d1)--(d1') (d2)--(d2');
	\end{tikzpicture}
	\caption{}
	\label{figure:解析几何.射影平面和射影变换.齐次仿射坐标}
\end{figure}

在“坐标”之前加上“齐次”两个字的原因是：
对于任一非零实数\(\lambda\)，
以\((\AutoTuple{\lambda x}{3})\)与\((\AutoTuple{x}{3})\)为坐标的向量表示把\(O\)中同一条直线，
从而它们表示\(\overline{\pi_0}\)上的同一个点.
因此，若\((\AutoTuple{x}{3})\)是\(\overline{\pi_0}\)上点\(M\)的齐次坐标，
那么\((\AutoTuple{\lambda x}{3})\ (\lambda\neq0)\)也是点\(M\)的齐次坐标.
这说明，\(\overline{\pi_0}\)上每一个点的齐次坐标不唯一，但是它们成比例.
如果两个向量的坐标不成比例，
则它们表示把\(O\)中不同的直线，
从而它们表示\(\overline{\pi_0}\)上不同的点.
因此\(\overline{\pi_0}\)上不同点的齐次坐标不成比例.

显然，平面\(\pi_0\)在标架\([O;\AutoTuple{d}{3}]\)下的方程是\(x_3 = 1\)，
向量\(v = (\AutoTuple{x}{3})^T\)与\(\pi_0\)平行的充分必要条件是\(x_3 = 0\).
由于\(\overline{\pi_0}\)上的通常点\(M\)对应于把\(O\)中与\(\pi_0\)相交的直线，
因此它的齐次坐标\((\AutoTuple{x}{3})\)满足\(x_3\neq0\).
由于无穷远点对应于把\(O\)中与\(\pi_0\)平行的直线，
因此无穷远点的齐次坐标必形如\((x_1,x_2,0)\)，
其中\(x_1,x_2\)不全为零.

现在我们来说明齐次坐标与仿射坐标的关系.
设点\(M\)是平面\(\overline{\pi_0}\)上的通常点，
\((x,y)\)是它对于仿射标架\([O_1;\AutoTuple{d}{2}]\)的仿射坐标，
则\(\vec{OM}\)对于仿射标架\([O;\AutoTuple{d}{3}]\)的坐标就是\((x,y,1)\).
于是，点\(M\)的齐次坐标\((\AutoTuple{x}{3})\)与\((x,y,1)\)成比例，
即存在非零实数\(\lambda\)，
使得\begin{equation*}
	(\AutoTuple{x}{3}) = \lambda (x,y,1).
\end{equation*}
因为\(M\)是通常点，
所以\(x_3\neq0\)，
从而有\begin{equation*}
	x = \frac{x_1}{x_3},
	\qquad
	y = \frac{x_2}{x_3}.
\end{equation*}
因此，通常点的齐次坐标和仿射坐标可以互相确定.
现在考虑\(\overline{\pi_0}\)上的一个无穷远点\(P_\infty\)，
假设它的齐次坐标为\((x_1,x_2,0)\)，
这时在平面\(\pi_0\)上对于仿射标架\([O_1;\AutoTuple{d}{2}]\)
具有坐标\((x,y) = (x_1,x_2)\)的向量
显然平行于\(P_\infty\)所对应的把\(O\)中的直线
（因为这条直线的方向向量是\((x_1,x_2,0)\)）；
反过来，平面\(\pi_0\)上的每一个方向\((x,y)\)，
在它的两个坐标\(x,y\)之后再添上一个\(0\)，
我们就可以得到这个方向上的无穷远点\(P_\infty\)的齐次坐标\((x,y,0)\).
因此，无穷远点\(P_\infty\)的齐次坐标与它所对应的方向的仿射坐标
（对于仿射标架\([O_1;\AutoTuple{d}{2}]\)）可以互相确定.
综上所述，我们看到\(\overline{\pi_0}\)上每一个点的齐次坐标
都由仿射标架\([O_1;\AutoTuple{d}{2}]\)完全决定，
而与点\(O\)的选取无关.

有时我们把通常点\(M\)的仿射坐标称为它的\DefineConcept{非齐次仿射坐标}，
简称\DefineConcept{非齐次坐标}.

\subsection{直线的齐次坐标方程}
\(\overline{\pi_0}\)上每个点都有齐次坐标，
从而\(\overline{\pi_0}\)上每条直线都可以用关于齐次坐标的方程来表示.

考虑\(\overline{\pi_0}\)上的一条直线\(AB\).
设点\(A\)、\(B\)在标架\([O_1;\AutoTuple{d}{2}]\)中的齐次坐标
分别是\((\AutoTuple{a}{3})\)、\((\AutoTuple{b}{3})\).
又设点\(A\)、\(B\)分别对应于
把\(O\)中的直线\(l_1\)、\(l_2\)，
则在标架\([O;\AutoTuple{d}{3}]\)中
以\((\AutoTuple{a}{3})\)、\((\AutoTuple{b}{3})\)为坐标的向量\(v_1\)、\(v_2\)
分别是\(l_1\)、\(l_2\)的方向向量.
设\(\overline{\pi_0}\)上任意一点\(M\)的齐次坐标为\((\AutoTuple{x}{3})\)，
则\(M\)所对应的把\(O\)中的直线\(l\)的一个方向向量\(v\)的仿射坐标为\((\AutoTuple{x}{3})\).
记\begin{equation*}
	\vb{U} \defeq \begin{bmatrix}
		a_1 & b_1 \\
		a_2 & b_2 \\
		a_3 & b_3
	\end{bmatrix},
	\qquad
	\vb{X} \defeq \begin{bmatrix}
		x_1 \\ x_2 \\ x_3
	\end{bmatrix}.
\end{equation*}
假设\(A,B\)是不同两点，\((\AutoTuple{a}{3})\)与\((\AutoTuple{b}{3})\)不成比例，
则\(
	\rank\vb{U} = 2
\).
点\(M\)在直线\(AB\)上的充分必要条件是
\(l\)在\(l_1\)、\(l_2\)这两条相交直线决定的平面\(OAB\)上，
即\(v,v_1,v_2\)共面，
那么由\cref{theorem:解析几何.三向量共面的必要条件1} 可知，
存在不全为零的数\(\lambda,\mu\)，
使得\begin{equation}\label{equation:射影平面.直线的齐次坐标方程1}
%@see: 《解析几何》（丘维声） P263 (1.1)
	\begin{cases}
		x_1 = \lambda a_1 + \mu b_1, \\
		x_2 = \lambda a_2 + \mu b_2, \\
		x_3 = \lambda a_3 + \mu b_3,
	\end{cases}
\end{equation}
即关于\(\lambda,\mu\)的方程\(
	\vb{U}
	(\lambda,\mu)^T
	= \vb{X}
\)有非零解，
即\(\rank\vb{U} = \rank(\vb{X},\vb{U})\)，
即\(\DeterminantA{(\vb{X},\vb{U})} = 0\)，
也即\begin{equation}\label{equation:射影平面.直线的齐次坐标方程2}
%@see: 《解析几何》（丘维声） P263 (1.2)
	\eta_1 x_1 + \eta_2 x_2 + \eta_3 x_3 = 0,
\end{equation}
其中\begin{equation*}
	\eta_1 \defeq \begin{vmatrix}
		a_2 & b_2 \\
		a_3 & b_3
	\end{vmatrix},
	\qquad
	\eta_2 \defeq \begin{vmatrix}
		a_3 & b_3 \\
		a_1 & b_1
	\end{vmatrix},
	\qquad
	\eta_3 \defeq \begin{vmatrix}
		a_1 & b_1 \\
		a_2 & b_2
	\end{vmatrix}.
\end{equation*}
由于\(\rank\vb{U} = 2\)，
矩阵\(\vb{U}\)的最高阶非零子式的阶数是\(2\)，
所以\(\AutoTuple{\eta}{3}\)作为矩阵\(\vb{U}\)的二阶子式，
其中至少有一个不等于零，
也就是说\(\AutoTuple{\eta}{3}\)不全为零.
这说明，直线\(AB\)的齐次坐标方程 \labelcref{equation:射影平面.直线的齐次坐标方程2} 是一个三元一次齐次方程.
反过来，任意一个三元一次齐次方程都表示射影平面上的一条直线.

我们把\cref{equation:射影平面.直线的齐次坐标方程1}
称为“直线\(AB\)的\DefineConcept{齐次（仿射）坐标参数方程}”.

由于无穷远直线是由所有无穷远点组成的，
而无穷远点的齐次坐标都形如\((x_1,x_2,0)\)，
因此无穷远直线的方程是\begin{equation*}
	x_3 = 0.
\end{equation*}
射影直线的齐次方程中，\(x_1\)、\(x_2\)的系数\(\eta_1\)、\(\eta_2\)一定不全为零
（若\(\eta_1 = \eta_2 = 0\)，
则方程 \labelcref{equation:射影平面.直线的齐次坐标方程2}
表示仿射标架\([O_1;d_1,d_2]\)的原点\(O_1\)）.

从上面的推导过程还看到：\begin{enumerate}
	\item 平面\(\overline{\pi_0}\)上三点
	\(A(\AutoTuple{a}{3})\)、
	\(B(\AutoTuple{b}{3})\)、
	\(C(\AutoTuple{c}{3})\)共线的充分必要条件是\begin{equation*}
		\begin{vmatrix}
			a_1 & b_1 & c_1 \\
			a_2 & b_2 & c_2 \\
			a_3 & b_3 & c_3
		\end{vmatrix}
		= 0;
	\end{equation*}

	\item 齐次方程\(\mu_1 x_1 + \mu_2 x_2 + \mu_3 x_3 = 0\)
	与\(\eta_1 x_1 + \eta_2 x_2 + \eta_3 x_3 = 0\)
	表示\(\overline{\pi_0}\)上的同一条直线
	（对应于把\(O\)中的同一个平面）的充分必要条件是
	\((\AutoTuple{\mu}{3})\)与\((\AutoTuple{\eta}{3})\)成比例.
	因此，我们可以把齐次方程的系数\((\AutoTuple{\eta}{3})\)看成直线的坐标，
	称之为直线的\DefineConcept{齐次坐标}.
	显然，无穷远直线的齐次坐标为\((0,0,1)\)；
	射影直线的齐次坐标形如\((\AutoTuple{\eta}{3})\)，
	其中\(\eta_1,\eta_2\)不全为零.
	容易看出，同一条直线的齐次坐标不唯一，但是它们成比例；不同直线的齐次坐标不成比例.
\end{enumerate}

既然直线也有齐次坐标，那么从齐次坐标来看，射影平面上的点和直线的地位是对等的，
点和直线对于关联关系而言也是对等的.
我们可以得出如下结论：
点\((\AutoTuple{x}{3})\)与直线\((\AutoTuple{\eta}{3})\)关联的充分必要条件是\begin{equation*}
	\eta_1 x_1 + \eta_2 x_2 + \eta_3 x_3 = 0.
\end{equation*}
因此，对于固定的直线\((\AutoTuple{\eta}{3})\)，
方程 \labelcref{equation:射影平面.直线的齐次坐标方程2}
就是该直线上的所有点所适合的方程，
于是我们又将其称为“直线\((\AutoTuple{\eta}{3})\)的\DefineConcept{点方程}”.
反过来，对于固定的点\((\AutoTuple{x}{3})\)，
方程 \labelcref{equation:射影平面.直线的齐次坐标方程2}
还是与点\((\AutoTuple{x}{3})\)关联的全体直线所适合的方程，
于是我们将其称为“点\((\AutoTuple{x}{3})\)的\DefineConcept{线方程}”.

从上面的讨论可以看到，在射影平面上，基本的几何元素是点和直线，基本的关系是关联关系.
点和直线在射影平面上的地位是对称的.

\begin{example}
%@see: 《解析几何》（丘维声） P265 习题7.1 5.
取一个球面，用经过球心\(O\)的一个平面\(\pi\)截得一个半球面，
把这个半球面上的每一个点垂直投影到平面\(\pi\)上，得到一个圆盘.
若投影点在圆盘内部，则把这个投影点看成一个“点”；
若投影点在圆盘的边界圆上，则把圆的直径的两个端点看成一个“点”.
半球面上的大半圆的投影点组成的半椭圆或直径看成“直线”.
证明：上述圆盘是一个实射影平面.
%TODO
\end{example}
