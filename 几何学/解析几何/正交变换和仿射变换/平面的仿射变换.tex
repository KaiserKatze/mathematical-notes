\section{平面的仿射变换}

\begin{definition}
%@see: 《解析几何》（丘维声） P207 定义3.1
如果平面上的一个点变换\(\tau\)使得对应线段之比为一个非零常数\(k\)，
那么称“\(\tau\)是一个\DefineConcept{相似变换}”，
其中\(k\)称为\DefineConcept{相似比}.
\end{definition}

容易看出，相似变换把线段映成线段，
把直线映成直线，
把射线映成射线.
相似变换保持任意两条线段的比值不变.

\begin{definition}
%@see: 《解析几何》（丘维声） P208 定义3.2
如果有一个相似比为\(k\)的相似变换\(\tau\)，
使得一个图形\(E\)的像是图形\(E'\)，
那么称“\(E\)和\(E'\)是\DefineConcept{相似图形}”，
其中\(k\)称为这两个图形的\DefineConcept{相似比}.
\end{definition}

\begin{definition}
%@see: 《解析几何》（丘维声） P208 定义3.3
平面上取定一个点\(O\)，
把平面上每一个点\(P\)对应到点\(P'\)，
使得\(\vec{OP'} = k \vec{OP}\)，
其中\(k\)是一个非零常数，
点\(O\)对应到它自身，
平面上的这个点变换称为\DefineConcept{位似变换}，
其中点\(O\)称为\DefineConcept{位似中心}，
\(k\)称为\DefineConcept{位似比}.
\end{definition}

\begin{definition}
%@see: 《解析几何》（丘维声） P208 定义3.4
如果有一个位似比为\(k\)的位似变换，
使得图形\(E\)的像是图形\(E'\)，
那么称“\(E\)和\(E'\)是\DefineConcept{位似图形}”，
其中\(k\)称为这两个图形的\DefineConcept{位似比}.
\end{definition}

\begin{proposition}
%@see: 《解析几何》（丘维声） P208 命题3.1
位似比为\(k\)的位似变换
把线段映成线段，
且像线段与原线段的长度之比等于\(\abs{k}\).
\end{proposition}

\begin{corollary}
%@see: 《解析几何》（丘维声） P209 推论3.1
位似比为\(k\)的位似变换是相似比为\(\abs{k}\)的相似变换.
\end{corollary}

\begin{proposition}
%@see: 《解析几何》（丘维声） P209 命题3.2
位似变换是可逆变换.
位似比为\(k\)、位似中心为\(O\)的位似变换\(\tau\)的逆变换
是位似比为\(k^{-1}\)、位似中心为\(O\)的位似变换.
\end{proposition}

\begin{proposition}
%@see: 《解析几何》（丘维声） P210 命题3.3
相似变换可以分解成一个位似变换与一个正交点变换的乘积.
\end{proposition}

\begin{proposition}
%@see: 《解析几何》（丘维声） P210 命题3.4
相似变换是可逆变换.
\end{proposition}

\begin{definition}
%@see: 《解析几何》（丘维声） P211 定义3.5
平面上给定一条直线\(l\)和一个非零向量\(\vb{d}\)，
其中\(\vb{d}\)不是\(l\)的方向向量.
如果平面上的一个变换\(\tau\)
把每一个点\(P\)对应到点\(P'\)，
使得\begin{itemize}
	\item \(\vec{PP'}\)与\(\vb{d}\)共线；
	\item 点\(P'\)与点\(P\)在\(l\)的同侧；
	\item \(\LineSegmentLength{AP'} = k \LineSegmentLength{AP}\)，
	其中\(A\)是直线\(PP'\)与\(l\)的交点，
	\(k\)是非零常数，
\end{itemize}
那么称变换\(\tau\)是沿方向\(\vb{d}\)（或\(-\vb{d}\)）向着直线\(l\)的\DefineConcept{压缩变换}，
其中\(l\)称为\DefineConcept{压缩轴}，
\(\vb{d}\)称为\DefineConcept{压缩方向}，
\(k\)称为\DefineConcept{压缩系数}.
当\(\vb{d}\)与\(l\)垂直时，称\(\tau\)是\DefineConcept{正压缩变换}.
当\(k>1\)时，也称\(\tau\)是\DefineConcept{拉伸变换}.
\end{definition}

\begin{proposition}
%@see: 《解析几何》（丘维声） P211 命题3.5
在向着\(y\)轴且压缩系数为\(k\)的正压缩变换下，
平面上曲线\(F(x,y) = 0\)的像是曲线\(F(k^{-1}x,y) = 0\).
\end{proposition}

\begin{corollary}
%@see: 《解析几何》（丘维声） P212 推论3.2
在向着\(y\)轴且压缩系数为\(k\)的正压缩变换下，
函数\(y = f(x)\)的图像的像是\(y = f(k^{-1} x)\)的图像.
\end{corollary}

\begin{proposition}
%@see: 《解析几何》（丘维声） P212 命题3.6
压缩变换把共线三点映成共线三点，
把不共线三点映成不共线三点.
\end{proposition}

\begin{proposition}
%@see: 《解析几何》（丘维声） P213 命题3.7
压缩变换是可逆变换.
\end{proposition}

\begin{definition}
%@see: 《解析几何》（丘维声） P213 定义3.6
平面上给定一条直线\(l\)和\(l\)的一个方向向量\(\vb{v}\).
如果平面上的一个变换\(\sigma\)
把\(l\)上的每一点映成它自身，
把不在\(l\)上的点映成点\(P'\)，
使得\begin{itemize}
	\item \(PP'\)与\(l\)平行；
	\item 对在\(l\)的一侧的点\(P\)，有\(\vec{PP'}\)与\(\vec{v}\)同向；
	对在\(l\)的另一侧的点\(Q\)，有\(\vec{QQ'}\)与\(\vec{v}\)反向；
	\item 从点\(P\)向直线\(l\)作垂线，垂足为\(M\)，
	有\(\LineSegmentLength{PP'} = k \LineSegmentLength{PM}\)，
	其中\(k\)是非零常数，
\end{itemize}
那么称变换\(\sigma\)是\DefineConcept{错切变换}，
其中\(l\)称为\DefineConcept{错切轴}，
\(k\)称为\DefineConcept{错切系数}.
\end{definition}

\begin{proposition}
%@see: 《解析几何》（丘维声） P213 命题3.8
错切变换把共线三点映成共线三点，
把不共线三点映成不共线三点.
\end{proposition}

\begin{proposition}
%@see: 《解析几何》（丘维声） P214 命题3.9
错切变换是可逆变换.
\end{proposition}

相似变换、位似变换、压缩变换和错切变换
都把共线三点映成共线三点，
并且它们都是可逆变换.
抓住它们的共同特征，我们抽象出下述概念.
\begin{definition}
%@see: 《解析几何》（丘维声） P215 定义3.7
如果平面到自身的双射\(\sigma\)把共线三点映成共线三点，
则称\(\sigma\)是平面上的一个\DefineConcept{仿射变换}.
\end{definition}

相似变换、位似变换、压缩变换和错切变换都是平面上的仿射变换.

\subsection{仿射变换的性质}
\begin{property}
%@see: 《解析几何》（丘维声） P215 性质1
仿射变换\(\sigma\)把不共线三点映成不共线三点.
\end{property}

\begin{property}
%@see: 《解析几何》（丘维声） P215 性质2
仿射变换\(\sigma\)的逆变换\(\sigma^{-1}\)也是仿射变换.
\end{property}

\begin{property}
%@see: 《解析几何》（丘维声） P216 性质3
仿射变换的乘积还是仿射变换.
\end{property}

\begin{property}
%@see: 《解析几何》（丘维声） P216 性质4
仿射变换\(\sigma\)把直线映成直线.
\end{property}

\begin{property}
%@see: 《解析几何》（丘维声） P216 性质5
仿射变换\(\sigma\)把平行直线映成平行直线.
\end{property}

\begin{lemma}
%@see: 《解析几何》（丘维声） P220 引理3.1
设映射\(f\colon \mathbb{R} \to \mathbb{R}\)满足\begin{equation*}
	f(x+y) = f(x) + f(y), \\
	f(xy) = f(x) f(y),
\end{equation*}
且\(f\)不是零映射，
那么\(f(x) = x\).
\end{lemma}

\begin{property}
%@see: 《解析几何》（丘维声） P222 性质8
仿射变换\(\sigma\)把线段映成线段.
\end{property}

\begin{property}
%@see: 《解析几何》（丘维声） P223 性质11
仿射变换\(\sigma\)保持线段的分比不变.
\end{property}

\begin{theorem}
%@see: 《解析几何》（丘维声） P223 定理3.1（仿射变换基本定理）
设\(\sigma\)是平面上的一个变换，
I \([O;\vb{d}_1,\vb{d}_2]\)是仿射坐标系，
\(
	\sigma(O) = O',
	\sigma(\vb{d}_1) = \vb{d}'_1,
	\sigma(\vb{d}_2) = \vb{d}'_2
\)，
则\(\sigma\)是仿射变换，
当且仅当 II \([O';\vb{d}'_1,\vb{d}'_2]\)也是仿射坐标系，
且点\(P\)的 I 坐标等于它的像点\(P'\)的 II 坐标.
\end{theorem}

\begin{corollary}
%@see: 《解析几何》（丘维声） P223 推论3.3
如果平面上的仿射变换\(\sigma_1,\sigma_2\)把仿射坐标系 I 映成同一个仿射坐标系 II，
那么\(\sigma_1 = \sigma_2\).
\end{corollary}

\begin{corollary}
%@see: 《解析几何》（丘维声） P224 推论3.4
平面上任给两组不共线三点\(\AutoTuple{A}{3}\)和\(\AutoTuple{B}{3}\)，
则存在唯一的仿射变换\(\sigma\)，
使得\(
	\sigma(A_i) = B_i
	\ (i=1,2,3)
\).
\end{corollary}

\begin{corollary}
%@see: 《解析几何》（丘维声） P224 推论3.5
对平面上任给的两个仿射坐标系 I 和 II，
存在唯一的仿射变换把 I 映成 II.
\end{corollary}

\begin{theorem}
%@see: 《解析几何》（丘维声） P224 定理3.2
设\(\sigma\)是平面上的一个变换，
I \([O;\vb{d}_1,\vb{d}_2]\)是仿射坐标系，
\(
	\sigma(O) = O',
	\sigma(\vb{d}_1) = \vb{d}'_1,
	\sigma(\vb{d}_2) = \vb{d}'_2
\)，
\(O',\vb{d}'_1,\vb{d}'_2\)的 I 坐标分别为\begin{equation*}
	(x_0,y_0),
	\qquad
	(a_{11},a_{21}),
	\qquad
	(a_{12},a_{22}),
\end{equation*}
点\(P\)和像点\(P'\)的 I 坐标分别为\begin{equation*}
	(x,y),
	\qquad
	(x',y'),
\end{equation*}
则\(\sigma\)是仿射变换的充分必要条件是\begin{equation*}
%@see: 《解析几何》（丘维声） P224 (3.7)
	\begin{bmatrix}
		x' \\ y'
	\end{bmatrix}
	= \begin{bmatrix}
		a_{11} & a_{12} \\
		a_{21} & a_{22}
	\end{bmatrix}
	\begin{bmatrix}
		x \\ y
	\end{bmatrix}
	+ \begin{bmatrix}
		x_0 \\ y_0
	\end{bmatrix},
\end{equation*}
且矩阵\begin{equation*}
	\begin{bmatrix}
		a_{11} & a_{12} \\
		a_{21} & a_{22}
	\end{bmatrix}
\end{equation*}
是可逆矩阵.
\end{theorem}

\subsection{仿射变换的变积系数}
正交变换保持点之间的距离不变，保持向量之间的夹角不变，从而保持图形的面积不变.
而一般的仿射变换会改变点之间的距离，会改变向量之间的夹角，从而也会改变图形的面积.
下面我们来讨论仿射变换改变图形面积的规律.

设在平面上规定了一个定向，用平面的单位法向量\(\vb{e}\)表示.
