\section{实数}
古希腊毕达哥拉斯学派的数学家发现，
对于一个等腰直角三角形，
假设它的直角边都是单位长度，
要想求出它的斜边长，
仅凭有理数，显然不足以表示它.
因此我们要将有理数系进一步扩张为实数系，
这也是我们本节要着重学习的内容.

实数理论的构建可归结为完成以下三件事：\begin{enumerate}
	\item 定义无理数，将其与有理数一起组成实数系\(\mathbb{R}\).
	\item 在\(\mathbb{R}\)中定义序关系，验证这种序关系保持有理数序关系的相应性质.
	\item 在\(\mathbb{R}\)中定义四则运算，验证这些运算具有与有理数运算同样的性质.
\end{enumerate}

\subsection{实数的构造}
实际上，我们已经有了好几种方法，可以用来构造实数.
一种方式是利用十进制展开，
用一个整数和一串无限的数字序列
（相当于从\(\omega\)到\(\{0,1,2,3,4,5,6,7,8,9\}\)的映射）
来确定一个实数.

\subsubsection*{第一种途径：利用柯西列构造实数}
一种更常用的实数构造方法是
利用有理数列（即从\(\omega\)到\(\mathbb{Q}\)的映射）
去逼近一个实数，
然后把所有收敛的有理数列收集在一起，
取这个集合对一个等价关系（我们把收敛到同一个实数的两个有理数列看成是等价的）的商集.
这就是柯西用来构造实数的技巧.

\begin{definition}
%@see: 《Elements of Set Theory》 P112
设映射\(s\colon \omega\to\mathbb{Q}\)满足\begin{equation*}
	(\forall\epsilon\in\mathbb{Q}^+)(\exists k\in\omega)(\forall m>k)(\forall n>k)
	[\abs{s(m) - s(n)}<\epsilon],
\end{equation*}
则称“\(s\)是一个\DefineConcept{柯西列}（Cauchy sequence）”.
\end{definition}

\begin{definition}
%@see: 《Elements of Set Theory》 P112
我们把全体柯西列的集合记为\(S\).
定义关系\(\sim\)：\begin{equation*}
	r \sim s
	\defiff
	(\forall\epsilon\in\mathbb{Q}^+)(\exists k\in\omega)(\forall n>k)
	[\abs{r(n)-s(n)}<\epsilon],
\end{equation*}
称“柯西列\(r\)和\(s\)等价”.
\end{definition}

可以证明关系\(\sim\)是柯西列集\(S\)上的等价关系，
以此为基础我们可以确定一个等价类划分，把它定义为实数.
\begin{definition}
%@see: 《Elements of Set Theory》 P112
称“\(S\)对\(\sim\)的商集”为\DefineConcept{实数集}（the set of real numbers），
记作\(\mathbb{R}\)，即\begin{equation*}
	\mathbb{R} \defeq S/\kern-2pt\sim.
\end{equation*}
\end{definition}
这种构造实数集的方法归功于康托.

\subsubsection*{第二种途径：利用戴德金分割构造实数}
还有一种构造实数系的方法，叫做戴德金分割.

\begin{definition}
%@see: 《数学分析（第二版 上册）》（陈纪修） P30 定义1
设有理数集\(\mathbb{Q}\)的两个非空子集\(A\)和\(B\)满足\(A \cup B = \mathbb{Q}\)，
且\((\forall a\in A)(\forall b\in B)[a<b]\)，
则称“\(A\)和\(B\)构成\(\mathbb{Q}\)的一个\DefineConcept{分割}”.
\end{definition}

那么从逻辑上讲，下述四种情况有且仅有一种出现：
\begin{enumerate}
	\item \(A\)有最大数\(a_0\)，\(B\)没有最小数；
	\item \(A\)没有最大数，\(B\)有最小数\(b_0\)；
	\item \(A\)没有最大数，\(B\)没有最小数；
	\item \(A\)有最大数\(a_0\)，\(B\)有最小数\(b_0\).
\end{enumerate}
我们首先断言第四种情况是不可能发生的.
因为\(\frac{a_0+b_0}2\in\mathbb{Q}\)，
且\(a_0 < \frac{a_0+b_0}2 < b_0\)，
所以\(\frac{a_0+b_0}2\)既不属于\(A\)，也不属于\(B\)，
这就与\(\mathbb{Q}=A \cup B\)的前提矛盾.

对于第一种情况，我们称分割确定了有理数\(a_0\)；
对于第二种情况，我们称分割确定了有理数\(b_0\)；
对于第三种情况，分割没有确定任何有理数，在\(A\)和\(B\)之间存在一个“空隙”，
因此有必要引入“无理数”，作为这种情况下分割确定的对象.

\begin{definition}
%@see: 《Elements of Set Theory》 P113 Definition
设集合\(x \subseteq \mathbb{Q}\).
如果\begin{enumerate}
	\item \(x\)是\(\mathbb{Q}\)的非空真子集，
	即\(\emptyset \neq x \neq \mathbb{Q}\)；

	\item \(x\)向下封闭（\(x\) is closed downward），
	即\begin{equation*}
		q \in x \land r < q \implies r \in x;
	\end{equation*}

	\item \(x\)没有最大元素，
\end{enumerate}
那么称“\(x\)是一个\DefineConcept{戴德金分割}（Dedekind cut）”.
\end{definition}

应该注意到，这里没有提到等价关系，实数也不是戴德金分割的等价类，
相反地，每个戴德金分割都是一个\DefineConcept{实数}（real number）.
最终，全体戴德金分割的集合就是实数集.

在戴德金分割途径下，对实数的序的定义非常简洁.
对于任意两个实数\(x\)和\(y\)，定义“小于”关系\(<\)：\begin{equation*}
	x < y \defiff x \subset y.
\end{equation*}
换句话说，\begin{equation*}
	<\ \defeq \Set*{ \opair{x,y}\in\mathbb{R}\times\mathbb{R} \given x \subset y }.
\end{equation*}

柯西法与戴德金法这两种构造实数的方法各有其优劣.
戴德金分割的优点在于：
它可以简单明了地定义实数和实数的序.
但戴德金分割的乘法却差强人意，
验证戴德金分割的乘法运算律甚是无趣.
利用柯西列构造的实数则胜在它的通用性，
这是因为它不仅仅可以用在有理数系中，
还可以用在任意的度量空间中.

“戴德金分割就是实数”
这一想法根源在于：
一个实数\(x\)可以将数轴分割为两部分，
在它左边的有理数，全都比它小.

\begin{theorem}
%@see: 《Elements of Set Theory》 P113 Theorem 5RA
关系\(<\)是实数集\(\mathbb{R}\)上的线性序.
\begin{proof}
显然关系\(<\)是传递的，于是我们只需证它满足三一律.
任取\(x,y\in\mathbb{R}\).
显然以下三个命题最多有一个成立：\begin{equation*}
	x \subset y, \qquad
	x = y, \qquad
	y \subset x.
\end{equation*}
现在我们需要证明这三个命题中至少有一个成立.

假设前两个命题不成立，即\(x \nsubseteq y\)，现在来证\(y \subset x\)必定成立.
显然\begin{equation*}
	x \nsubseteq y
	\implies
	(\exists r)[r \in x-y].
\end{equation*}
任取\(q \in y\).
如果\(r \leq q\)，
那么由定义，\(y\)向下封闭，易得\(r \in y\).
如果\(r \notin y\)，
那么必有\(q < r\).
又由于\(x\)向下封闭，便得\(q \in x\).
因为\(q\)是任意取定的，而\(x \neq y\)，于是可得\(y \subset x\).
\end{proof}
%@see: 《Real Analysis Modern Techniques and Their Applications Second Edition》 P5
% 我们把\(<\)和\(>\)统称为
% “\(\mathbb{R}\)的\DefineConcept{通常排序}（usual ordering）”.
% 通常排序是\(\mathbb{R}\)上的线性序.
\end{theorem}

考虑集合\(A \subseteq \mathbb{R}\).
如果实数\(x\)满足\begin{equation*}
	(\forall y \in A)[y \leq x],
\end{equation*}
那么称“\(x\)是\(A\)的\DefineConcept{上界}（\(x\) is an \emph{upper bound} of \(A\)）”.
相对地，如果实数\(x\)满足\begin{equation*}
	(\forall y \in A)[y \geq x],
\end{equation*}
那么称“\(x\)是\(A\)的\DefineConcept{下界}（\(x\) is an \emph{lower bound} of \(A\)）”.

需要注意到，\(x\)本身可能不是\(A\)的元素.

如果\begin{equation*}
	(\exists y\in\mathbb{R})
	[\text{\(y\)是\(A\)的上界}],
\end{equation*}
那么称“\(A\)~\DefineConcept{有上界}（the set \(A\) is \emph{bounded above}）”.
如果\begin{equation*}
	(\exists y\in\mathbb{R})
	[\text{\(y\)是\(A\)的下界}],
\end{equation*}
那么称“\(A\)~\DefineConcept{有下界}（the set \(A\) is \emph{bounded below}）”.

如果\(A\)的上界\(z\)比其他任何上界都要小，
即\begin{equation*}
	(\forall y \in \Set{ x \given \text{$x$是$A$的上界} })
	[z \leq y],
\end{equation*}
那么称“\(z\)是\(A\)的\DefineConcept{最小上界}（least upper bound）”.

如果\(A\)的下界\(z\)比其他任何下界都要大，
即\begin{equation*}
	(\forall y \in \Set{ x \given \text{$x$是$A$的下界} })
	[z \geq y],
\end{equation*}
那么称“\(z\)是\(A\)的\DefineConcept{最大下界}（greatest lower bound）”.

\begin{theorem}\label{theorem:实数.实数存在最小上界}
%@see: 《Elements of Set Theory》 P114 Theorem 5RB
实数集的任意一个有上界的非空子集总有一个实最小上界.
\end{theorem}
\cref{theorem:实数.实数存在最小上界}
指出的“实数系存在最小上界”这一性质，
是将实数域与其他有序域区分开来的重要特征.

这个定理在数学分析中也非常重要.
它可以用来证明在闭区间上的连续函数一定能取得最值.

\begin{definition}
设\(X\)是一个数系，\(<\)是\(X\)上的线性序，
\(Y\)是\(X\)的一个非空子集.
若\begin{equation*}
	(\forall x_1,x_2 \in X)
	(\exists y \in Y)
	[x_1 < x_2 \implies x_1 < y < x_2],
\end{equation*}
则称“\(Y\)在\(X\)中是\DefineConcept{稠密的}”.
\end{definition}

\begin{proposition}
\(\mathbb{Q}\)在\(\mathbb{R}\)中是稠密的.
%@see: https://math.stackexchange.com/questions/1027970/what-does-it-mean-for-rational-numbers-to-be-dense-in-the-reals
\end{proposition}

\begin{definition}
对于\(\forall x,y\in\mathbb{R}\)，
我们定义实数集上的加法运算：
\begin{equation}
	x + y \defeq \Set{
		q + r \given q \in x \land r \in y
	}.
\end{equation}
\end{definition}

\begin{lemma}
%@see: 《Elements of Set Theory》 P114 Lemma 5RC
若\(x,y\in\mathbb{R}\)，那么\(x+y\in\mathbb{R}\).
\end{lemma}

\begin{theorem}
%@see: 《Elements of Set Theory》 P115 Theorem 5RD
以下命题恒成立：
\begin{enumerate}
	\item 加法交换律
	\begin{equation}
		(\forall x,y\in\mathbb{R})[x+y=y+x].
	\end{equation}
	\item 加法结合律
	\begin{equation}
		(\forall x,y,z\in\mathbb{R})[(x+y)+z=x+(y+z)].
	\end{equation}
\end{enumerate}
\end{theorem}

\begin{definition}
定义：\(0\defeq\Set{ r\in\mathbb{Q} \given r<0 }\).
\end{definition}

\begin{theorem}
%@see: 《Elements of Set Theory》 P116 Theorem 5RE
以下命题恒成立：
\begin{enumerate}
	\item \(0\)是实数.
	\item 任意实数加上实数\(0\)不变
	\begin{equation}
		(\forall x\in\mathbb{R})[x+0=x].
	\end{equation}
\end{enumerate}
\end{theorem}

\begin{definition}
%@see: 《Elements of Set Theory》 P117
设\(x\in\mathbb{R}\).
那么称集合\begin{equation*}
	\Set{ r \in \mathbb{Q} \given (\exists s>r) -s \notin x }
\end{equation*}为“\(x\)的负元”，记作\((-x)\).
\end{definition}

\begin{theorem}
%@see: 《Elements of Set Theory》 P117 Theorem 5RF
设\(x\in\mathbb{R}\)，那么\begin{enumerate}
	\item \(-x\in\mathbb{R}\).
	\item \(x+(-x)=0\).
\end{enumerate}
\end{theorem}

\begin{corollary}\label{theorem:集合论.实数的消去律}
%@see: 《Elements of Set Theory》 P118 Corollary 5RG
\((\forall x,y,z\in\mathbb{R})[
	x+z=y+z \implies x=y
]\).
\end{corollary}

\begin{theorem}\label{theorem:集合论.实数的加法的保序性}
%@see: 《Elements of Set Theory》 P118 Theorem 5RH
\((\forall x,y,z\in\mathbb{R})[
	x<y \iff x+z<y+z
]\).
\end{theorem}

\begin{definition}
%@see: 《Elements of Set Theory》 P118
设\(x\in\mathbb{R}\).
把\(x \cup -x\)称为“\(x\)的\DefineConcept{绝对值}（absolute value），
记作\(\abs{x}\)，即\begin{equation*}
	\abs{x} \defeq x \cup -x.
\end{equation*}
\end{definition}

\begin{definition}
定义：
\begin{enumerate}
	\item 如果\(x,y\)都是非负实数，那么\begin{equation*}
		x \cdot y
		\defeq
		0 \cup \Set{ r \cdot s \given 0 \leq r \in x \land 0 \leq s \in y }.
	\end{equation*}

	\item 如果\(x,y\)都是负实数，那么\begin{equation*}
		x \cdot y \defeq \abs{x} \cdot \abs{y}.
	\end{equation*}

	\item 如果\(x,y\)中一个是负实数一个是非负实数，那么\begin{equation*}
		x \cdot y \defeq -(\abs{x} \cdot \abs{y}).
	\end{equation*}
\end{enumerate}
\end{definition}

\begin{definition}
定义：\(1\defeq\Set{ r\in\mathbb{Q} \given r < 1 }\).
\end{definition}

\begin{theorem}
%@see: 《Elements of Set Theory》 P119 Theorem 5RI
以下命题恒成立：
\begin{enumerate}
	\item 实数集对乘法封闭\begin{equation}
		(\forall x,y\in\mathbb{R})[x \cdot y \in \mathbb{R}].
	\end{equation}
	\item 乘法结合律\begin{equation}
		(\forall x,y,z\in\mathbb{R})[(x+y)+z=x+(y+z)].
	\end{equation}
	\item 乘法交换律\begin{equation}
		(\forall x,y\in\mathbb{R})[x+y=y+z].
	\end{equation}
	\item 乘法分配律\begin{equation}
		(\forall x,y,z\in\mathbb{R})[x\cdot(y+z)=x \cdot y+x \cdot z].
	\end{equation}
	\item \(0\neq1\).
	\item \(x\cdot1=x\).
	\item \((\forall x\in\mathbb{R}^*)(\exists y\in\mathbb{R}^*)[x \cdot y=1]\).
	\item \(0<z \implies [x<y \iff x \cdot z<y \cdot z]\).
\end{enumerate}
\end{theorem}

\subsection{区间}
定义：\begin{gather}
	(a,b) \defeq \Set{ x\in\mathbb{R} \given a<x<b }, \\
	[a,b] \defeq \Set{ x\in\mathbb{R} \given a \leq x \leq b }, \\
	(a,b] \defeq \Set{ x\in\mathbb{R} \given a < x \leq b }, \\
	[a,b) \defeq \Set{ x\in\mathbb{R} \given a \leq x < b }.
\end{gather}
我们把\([a,b]\)称为一个闭区间（closed interval），
把\((a,b)\)称为一个开区间（open interval），
把\((a,b]\)称为一个左开右闭区间，
把\([a,b)\)称为一个左闭右开区间.
%@see: https://mathworld.wolfram.com/Interval.html
%@see: https://mathworld.wolfram.com/OpenInterval.html
%@see: https://mathworld.wolfram.com/ClosedInterval.html

\subsection{确界}
\begin{definition}
%@see: 《数学分析教程（第3版 上册）》（史济怀） P40 定义1.8.1
设\(X\)是一个非空的有上界的实数的子集，
\(\beta\)是一个实数.
若\begin{itemize}
	\item \(\beta\)是\(X\)的上界，
	即\((\forall x \in X)[x \leq \beta]\)，

	\item \((\forall \epsilon>0)(\exists x \in X)[x>\beta-\epsilon]\)，
\end{itemize}
则称“\(\beta\)是\(X\)的\DefineConcept{上确界}（supremum）”，
记\(\sup X = \beta\).
%@see: https://mathworld.wolfram.com/Supremum.html
%@see: https://mathworld.wolfram.com/SupremumLimit.html
\end{definition}

\begin{definition}
%@see: 《数学分析教程（第3版 上册）》（史济怀） P40 定义1.8.2
设\(X\)是一个非空的有下界的实数的子集，
\(\alpha\)是一个实数.
若\begin{itemize}
	\item \(\alpha\)是\(X\)的下界，
	即\((\forall x \in X)[x \geq \alpha]\)，

	\item \((\forall \epsilon>0)(\exists x \in X)[x<\alpha+\epsilon]\)，
\end{itemize}
则称“\(\alpha\)是\(X\)的\DefineConcept{下确界}（infimum）”，
记\(\inf X = \alpha\).
%@see: https://mathworld.wolfram.com/Infimum.html
%@see: https://mathworld.wolfram.com/InfimumLimit.html
\end{definition}

\begin{proposition}
设\(X\)是一个非空的有上界的实数的子集，
则\(X\)的上确界就是\(X\)的最小上界.
\end{proposition}

\begin{proposition}
设\(X\)是一个非空的有下界的实数的子集，
则\(X\)的下确界就是\(X\)的最大下界.
\end{proposition}

% 如果集合\(X\)下方无界，则记\begin{equation*}
% 	\inf X = -\infty.
% \end{equation*}
% 如果集合\(X\)上方无界，则记\begin{equation*}
% 	\sup X = +\infty.
% \end{equation*}

\begin{theorem}[确界原理]\label{theorem:实数.确界原理}
%@see: 《数学分析教程（第3版 上册）》（史济怀） P41 定理1.8.1
%@see: 《数学分析（第二版 上册）》（陈纪修） P28 定理2.1.1（确界存在定理-实数系连续性定理）
非空的有上界的实数的子集必有上确界.
非空的有下界的实数的子集必有下确界.
\end{theorem}

\begin{theorem}
%@see: 《数学分析（第二版 上册）》（陈纪修） P29 定理2.1.2
非空的有界的实数的子集的上、下确界是唯一的.
\end{theorem}

\begin{example}\label{example:实数.确界的序}
%
证明：\begin{gather}
	\inf_{n\to\infty} a_n
	+ \inf_{n\to\infty} b_n
	\leq \inf_{n\to\infty} (a_n + b_n)
	\leq \inf_{n\to\infty} a_n
	+ \sup_{n\to\infty} b_n. \\
	\inf_{n\to\infty} a_n
	+ \sup_{n\to\infty} b_n
	\leq \sup_{n\to\infty} (a_n + b_n)
	\leq \sup_{n\to\infty} a_n
	+ \sup_{n\to\infty} b_n.
\end{gather}
%TODO
\end{example}

\subsection{有限覆盖定理}
\begingroup
\def\J{\mathscr{J}}%开区间族
\begin{definition}
%@see: 《数学分析教程（第3版 上册）》（史济怀） P43 定义1.9.1
设\(A\)是一个实数的子集，
\(\J\)是一个开区间族.
如果\begin{equation*}
	A \subset \bigcup \J,
\end{equation*}
那么称“开区间族\(\J\)是\(A\)的一个\DefineConcept{开覆盖}”.
\end{definition}

\begin{theorem}[紧致性定理]\label{theorem:实数.紧致性定理}
%@see: 《数学分析教程（第3版 上册）》（史济怀） P43 定理1.9.1
设\([a,b]\)是一个有限闭区间，
并且它有一个开覆盖\(\J\)，
那么\begin{equation*}
	(\exists \J')
	[
		\text{\(\J'\)是\(\J\)的有限子集}
		\land
		\text{\(\J'\)是\([a,b]\)的开覆盖}
	].
\end{equation*}
\end{theorem}
\cref{theorem:实数.紧致性定理} 常被称为\DefineConcept{有限覆盖定理}，
也称为\DefineConcept{海涅--波莱尔定理}.

\endgroup%end of subsection{有限覆盖定理}
