\section{微分中值定理}
\subsection{费马引理}
\begin{lemma}[费马引理]\label{theorem:微分中值定理.费马引理}
%@see: 《高等数学（第六版 上册）》 P128 费马引理
%@see: 《数学分析（第二版 上册）》（陈纪修） P167 定理5.1.1（Fermat引理）
%@see: 《数学分析教程（第3版 上册）》（史济怀） P144 定理3.4.1（Fermat）
设函数\(f\colon D\to\mathbb{R}\)在点\(x_0\)的某邻域\(U(x_0)\)内有定义，
并且在\(x_0\)可导.
如果\(\exists\delta>0\)，
\(\forall x \in U(x_0,\delta)\)，
有\(f(x) \leq f(x_0)\)
或\(f(x) \geq f(x_0)\)，
那么\(f'(x_0) = 0\).
\begin{proof}
不妨设\(x \in U(x_0)\)时，
\(f(x) \leq f(x_0)\)，
于是，对于\(x_0 + \increment x \in U(x_0)\)，有\begin{equation*}
    f(x_0 + \increment x) \leq f(x_0),
\end{equation*}
从而当\(\increment x > 0\)时，\begin{equation*}
    \frac{f(x_0 + \increment x) - f(x_0)}{\increment x} \leq 0;
\end{equation*}
当\(\increment x < 0\)时，\begin{equation*}
    \frac{f(x_0 + \increment x) - f(x_0)}{\increment x} \geq 0.
\end{equation*}
根据函数\(f(x)\)在\(x_0\)可导的条件及极限的保号性，便得到\begin{equation*}
    f'(x_0) = f'_+(x_0)
    = \lim_{\increment x\to0^+}
    \frac{f(x_0 + \increment x) - f(x_0)}{\increment x} \leq 0,
\end{equation*}\begin{equation*}
    f'(x_0) = f'_-(x_0)
    = \lim_{\increment x\to0^-}
    \frac{f(x_0 + \increment x) - f(x_0)}{\increment x} \geq 0.
\end{equation*}
所以，\(f'(x_0) = 0\).

同理，对于当\(x \in U(x_0)\)时，
\(f(x) \geq f(x_0)\)的情形，可以类似地证明.
\end{proof}
\end{lemma}

\subsection{罗尔定理}
\begin{figure}[htb]
	\centering
	\begin{tikzpicture}
		\begin{axis}[
			xmin=0,xmax=8,
			ymin=0,ymax=3,
			axis lines=middle,
			xlabel=$x$,
			ylabel=$y$,
			enlarge x limits=0.1,
			enlarge y limits=0.1,
			ticks=none,
		]
			\addplot[domain=1:7.283,color=blue]{.5*sin(deg(x-1))+2};
			\draw(1,2)coordinate(A)node[left]{$A$}
				(1,0)coordinate(a)node[below]{$a$}
				(2.571,2.5)coordinate(C)node[above]{$C$}
				(2.571,0)coordinate(c)node[below]{$\xi$}
				(5.713,1.5)node[below]{$D$}
				(7.283,2)coordinate(B)node[right]{$B$}
				(7.283,0)coordinate(b)node[below]{$b$};
			\draw[dashed,black!30](1,2)--(7.283,2)
				(A)--(a) (C)--(c) (B)--(b);
		\end{axis}
	\end{tikzpicture}
	\caption{}
	\label{figure:微分中值定理.罗尔定理的几何意义}
\end{figure}

观察\cref{figure:微分中值定理.罗尔定理的几何意义}，
设曲线弧\(\Arc{AB}\)是函数\(y=f(x)\ (a\leq x\leq b)\)的图形.
这是一条连续的曲线弧，除端点外，处处有不垂直于\(x\)的切线，
且两个端点的纵坐标相等，即\(f(a)=f(b)\).
可以发现在曲线弧的最高点\(C\)处或最低点\(D\)处，曲线有水平的切线.
如果记\(C\)的横坐标为\(\xi\)，那么就有\(f'(\xi)=0\).
现在用分析语言把这个几何现象描述出来，就可得下面的罗尔定理.

\begin{theorem}[罗尔定理]\label{theorem:微分中值定理.罗尔定理}
%@see: 《高等数学（第六版 上册）》 P129 罗尔定理
%@see: 《数学分析（第二版 上册）》（陈纪修） P168 定理5.1.2（Rolle定理）
%@see: 《数学分析教程（第3版 上册）》（史济怀） P144 定理3.4.2（Rolle）
如果函数\(f\colon [a,b]\to\mathbb{R}\)
在闭区间\([a,b]\)上连续，在开区间\((a,b)\)内可导，
即\(f \in C[a,b] \cap D(a,b)\)，
并且\(f(a)=f(b)\)，
那么\(\exists \xi \in (a,b)\)，
使得\(f'(\xi) = 0\).
\begin{proof}
由于\(f\)在闭区间\([a,b]\)上连续，
根据闭区间上连续函数的最大值最小值定理，
\(f\)在闭区间\([a,b]\)上必定取得它的最大值\(M\)和最小值\(m\).
这样，只有两种可能情形：
\begin{enumerate}
	\item[情况一] \(M=m\).
		这时\(f\)在区间\([a,b]\)上是常数函数，即\(f(x)=M\).
		由此，\(\forall x\in(a,b)\)，有\(f'(x)=0\).
		因此，任取\(\xi\in(a,b)\)，有\(f'(\xi)=0\).

	\item[情况二] \(M>m\).
		因为\(f(a)=f(b)\)，
		所以\(M\)和\(m\)这两个数中，
		至少有一个不等于\(f(x)\)在区间\([a,b]\)的端点处的函数值.
		不妨设\(M \neq f(a)\)，
		那么必定在开区间\((a,b)\)内有一点\(\xi\)使\(f(\xi)=M\).
		因此，\(\forall x\in[a,b]\)，
		有\(f(x) \leq f(\xi)\)，从而由费马引理可知\(f'(\xi)=0\).
		\qedhere
\end{enumerate}
\end{proof}
\end{theorem}

\begin{example}
% \hyperref[theorem:微分中值定理.罗尔定理]{罗尔定理}的第三个条件是必需的.
设函数\(f\colon[a,b]\to\mathbb{R}\)
满足\(f\in C[a,b]\cap D(a,b)\)
且\((\exists\xi\in(a,b))[f'(\xi)=0]\)，
却不一定有\((\exists x_1,x_2\in[a,b])[f(x_1)=f(x_2)]\).
例如，取\(f(x)=x^5\)，
它满足\(f\in C[-1,1]\cap D(-1,1)\)和\(f'(0)=0\)，
但是它在\([-1,1]\)上函数值处处不相等.
\end{example}

\begin{example}
设函数\(f\colon[a,b]\to\mathbb{R}\)
满足\(f\in C[a,b]\)，
\(f(a)=f(b)\)，
以及\(f\)在\((a,b)\)内除一点外处处可导，
但是\((\nexists\xi\in(a,b))[f'(\xi)=0]\).
例如，取\begin{equation*}
	f(x) = \left\{ \begin{array}{cl}
		x, & 0\leq x<1, \\
		2-x, & 1\leq x\leq 2.
	\end{array} \right.
\end{equation*}
它满足\(f\in C[0,2]\)，\(f(0)=f(2)=0\).
显然除点\(x=1\)以外，\(f\)处处可导，
且\begin{equation*}
	f'(x) = \left\{ \begin{array}{rl}
		1, & 0<x<1, \\
		-1, & 1<x<2.
	\end{array} \right.
\end{equation*}
所以在\((0,2)\)内不存在导数为零的点.
\end{example}

\begin{example}
%@see: 《数学分析（第五版 上册）》（华东师范大学） P112 例1
设\(f \in D(-\infty,+\infty)\).
证明：若方程\(f'(x) = 0\)没有实根，
则方程\(f(x) = 0\)至多只有一个实根.
\begin{proof}
用反证法.
假设方程\(f(x) = 0\)由两个相异实根\(x_1,x_2\)（不妨设\(x_1 < x_2\)），
则函数\(f\)在\([x_1,x_2]\)上满足\hyperref[theorem:微分中值定理.罗尔定理]{罗尔定理}的三个条件，
从而存在\(\xi\in(x_1,x_2)\)，使得\(f'(\xi) = 0\)，
这与\(f'(x) \neq 0\)的题设矛盾，
因此方程\(f(x) = 0\)至多只有一个实根.
\end{proof}
\end{example}

\begin{corollary}
设函数\(f \in D(a,b)\)，且\begin{equation*}
	\lim_{x \to a^+} f(x)
	= \lim_{x \to b^-} f(x),
\end{equation*}
则\(\exists\xi\in(a,b)\)，
使得\(f'(\xi) = 0\).
\begin{proof}
令\begin{equation*}
	g(x) = \left\{ \begin{array}{cl}
		f(x), & a < x < b, \\
		A, & x = a \lor x = b,
	\end{array} \right.
\end{equation*}
其中\(A = \lim_{x \to a^+} f(x)\)，
那么函数\(g\)在\([a,b]\)上连续，在\((a,b)\)内可导.

由\hyperref[theorem:微分中值定理.罗尔定理]{罗尔定理}可知，
存在\(\xi\in(a,b)\)使得\(g'(\xi) = f'(\xi) = 0\).
\end{proof}
\end{corollary}

\begin{example}\label{example:微分中值定理.一元高次方程的根的存在性}
%@see: 《高等数学（第六版 上册）》 P134 习题3-1 7.
若方程\(a_0 x^n + a_1 x^{n-1} + \dotsb + a_{n-1} x = 0\)有一个正根\(x = x_0\).
证明：方程\begin{equation*}
	a_0 n x^{n-1} + a_1 (n-1) x^{n-2} + \dotsb + a_{n-1} = 0
\end{equation*}必有一个小于\(x_0\)的正根.
\begin{proof}
设\(f(x) = a_0 x^n + a_1 x^{n-1} + \dotsb + a_{n-1} x\)，
则\(f(0) = f(x_0) = 0\)，
而\begin{equation*}
	f'(x) = a_0 n x^{n-1} + a_1 (n-1) x^{n-2} + \dotsb + a_{n-1}.
\end{equation*}
根据\hyperref[theorem:微分中值定理.罗尔定理]{罗尔定理}，
\(\exists \xi \in (0,x_0)\)使得\(f'(\xi) = 0\)，
即\(\xi\)就是小于\(x_0\)的正根.
\end{proof}
\end{example}
\begin{example}
%@see: 《高等数学（第六版 上册）》 P134 习题3-1 8.
设函数\(f \in D^2(a,b)\)，且\(f(x_1) = f(x_2) = f(x_3)\)，其中\(a < x_1 < x_2 < x_3 < b\).
证明：在\(x_1,x_3\)内至少有一点\(\xi\)，使得\(f''(\xi) = 0\).
\begin{proof}
由\hyperref[theorem:微分中值定理.罗尔定理]{罗尔定理}可知，
\(\exists y_1\in(x_1,x_2)\)使得\(f'(y_1) = 0\)，
\(\exists y_2\in(x_2,x_3)\)使得\(f'(y_2) = 0\).
再次应用\hyperref[theorem:微分中值定理.罗尔定理]{罗尔定理}可知
\(\exists \xi\in(y_1,y_2)\subseteq(x_1,x_3)\)
使得\(f''(\xi) = 0\).
\end{proof}
\end{example}
\begin{example}
%@see: 《数学分析（第二版 上册）》（陈纪修） P183 习题 14.
证明对于每个正整数\(n\ (n\geq2)\)，方程\begin{equation*}
	x^n + x^{n-1} + \dotsb + x^2 + x = 1
\end{equation*}在\((0,1)\)内必有唯一的实根\(x_n\)，
并计算极限\(\lim_{n\to\infty} x_n\).
%TODO proof
\end{example}

\begin{example}
%@see: 《数学分析（第二版 上册）》（陈纪修） P169 例5.1.1
证明：\(n\)次\DefineConcept{拉格朗日多项式}\begin{equation*}
	p_n(x) = \frac1{2^n n!} \dv[n]{x} (x^2-1)^n
	\quad(n=0,1,2,\dotsc)
\end{equation*}在\((-1,1)\)上恰有\(n\)个不同的根.
%TODO proof
% \begin{proof}
% 由高阶导数的莱布尼茨公式，容易知道
% \end{proof}
\end{example}

\begin{example}
%@see: https://www.bilibili.com/video/BV1XWxreZEGP/
设函数\(f \in C[0,3] \cap D(0,3)\)，
且\begin{equation*}
	f(0) + f(1) + f(2) = 3,
	\qquad
	f(3) = 1.
\end{equation*}
证明：存在\(\xi\in(0,3)\)使得\(f'(\xi) = 0\).
\begin{proof}
因为\(f \in C[0,2]\)，
所以由\hyperref[theorem:极限.最值定理]{最值定理}可知
函数\(f\)在区间\([0,2]\)上有界，
即\begin{equation*}
	(\forall x\in[0,2])
	[m \leq f(x) \leq M],
\end{equation*}
其中\begin{equation*}
	m = \min\Set{ f(x) \given x\in[0,2] },
	\qquad
	M = \max\Set{ f(x) \given x\in[0,2] },
\end{equation*}
于是\begin{equation*}
	m = \frac{m+m+m}3 \leq \frac{f(0) + f(1) + f(2)}3 = 1 \leq \frac{M+M+M}3 = M,
\end{equation*}
再由\hyperref[theorem:极限.闭区间上连续函数的性质.介值定理2]{介值定理}可知
存在\(c\in[0,2]\)使得\(f(c) = 1\)，
那么由\hyperref[theorem:微分中值定理.罗尔定理]{罗尔定理}可知
存在\(\xi\in(c,3)\subseteq(0,3)\)使得\(f'(\xi) = 0\).
\end{proof}
\end{example}

\begin{example}
%@see: https://www.bilibili.com/video/BV1ty4y1w74x/
%@see: https://www.bilibili.com/video/BV1GX4y1R7p9/
在函数\(f\)在\([0,1]\)上二阶可导，
且\(f(0) = f'(0) = 0\).
证明：存在\(\xi\in(0,1)\)，
使得\begin{equation*}
	f''(\xi) = \frac{2 f(\xi)}{(1-\xi)^2}.
\end{equation*}
\begin{proof}
注意到\begin{align*}
	&f''(x) = \frac{2 f(x)}{(1-x)^2} \\
	&\iff
	(x-1)^2 f''(x) - 2 f(x) = 0 \\
	&\iff
	(x-1)^2 f''(x) + 2 (x-1) f'(x) - 2 (x-1) f'(x) - 2 f(x) = 0 \\
	&\iff
	[(x-1)^2 f'(x)]' - [2 (x-1) f(x)]' = 0,
\end{align*}
构造辅助函数\(F(x) = (x-1)^2 f'(x) - 2 (x-1) f(x)\)，
那么\begin{equation*}
	F(0) = F(1) = 0.
\end{equation*}
由\hyperref[theorem:微分中值定理.罗尔定理]{罗尔定理}可知
\(\exists\xi\in(0,1)\)使得\(F'(\xi) = 0\).
\end{proof}
\end{example}
\begin{remark}
这个例子启发我们，当遇到形如\begin{equation*}
	f(x) g''(x) - f''(x) g(x) = 0
\end{equation*}的关系式时，
可以构造辅助函数\begin{equation*}
	F(x) = f(x) g'(x) - f'(x) g(x).
\end{equation*}
\end{remark}

\begin{example}
%@see: 《2007年全国硕士研究生入学统一考试（数学一）》三解答题/第19题
%@see: https://www.bilibili.com/video/BV1bmyGYvEBc/
设\(f,g \in C[a,b] \cap D^2(a,b)\)且在\((a,b)\)内具有相等的最大值，
而\begin{equation*}
	f(a) = g(a),
	\qquad
	f(b) = g(b).
\end{equation*}
证明：存在\(\xi\in(a,b)\)使得\(f''(\xi) = g''(\xi)\).
\begin{proof}
设\(x_1,x_2\in(a,b)\)满足\begin{equation*}
	f(x_1) = \max_{a<x<b} f(x) = M = \max_{a<x<b} g(x) = g(x_2).
\end{equation*}
令\(F(x) = f(x) - g(x)\)，
由题意有\(F(a) = F(b) = 0\).

当\(x_1 = x_2\)时，有\begin{equation*}
	F(x_1) = f(x_1) - g(x_1) = M - M = 0.
	\eqno(1)
\end{equation*}
当\(x_1 \neq x_2\)时，有\begin{equation*}
	F(x_1) = f(x_1) - g(x_1)
	= M - g(x_1)
	\geq 0,
	\qquad
	F(x_2) = f(x_2) - g(x_2)
	= f(x_2) - M
	\leq 0,
\end{equation*}
记\(x_1' = \min\{x_1,x_2\},
x_2' = \max\{x_1,x_2\}\)，
那么由\hyperref[theorem:极限.零点定理]{零点定理}可知，
存在\(x_3\in[x_1',x_2']\)使得\begin{equation*}
	F(x_3) = 0.
	\eqno(2)
\end{equation*}
记\begin{equation*}
	c = \left\{ \begin{array}{cl}
		x_1, & x_1 = x_2, \\
		x_3, & x_1 \neq x_2.
	\end{array} \right.
\end{equation*}
由\hyperref[theorem:微分中值定理.罗尔定理]{罗尔定理}可知，
存在\(\xi_1\in(a,c)\)，存在\(\xi_2\in(c,b)\)，
使得\begin{equation*}
	F'(\xi_1) = F'(\xi_2) = 0.
\end{equation*}
再由\hyperref[theorem:微分中值定理.罗尔定理]{罗尔定理}可知，
存在\(\xi\in(\xi_1,\xi_2)\subseteq(a,b)\)使得\begin{equation*}
	F''(\xi) = f''(\xi) - g''(\xi) = 0.
	\qedhere
\end{equation*}
\end{proof}
\end{example}
\begin{example}
%@see: 《2017年全国硕士研究生入学统一考试（数学一）》三解答题/第18题
设函数\(f\)在区间\([0,1]\)上具有\(2\)阶导数，
且\(f(1) > 0,
\lim_{x\to0^+} \frac{f(x)}{x} < 0\).
证明：\begin{itemize}
	\item 方程\(f(x) = 0\)在区间\((0,1)\)内至少存在一个实根；
	\item 方程\(f(x) f''(x) + (f'(x))^2 = 0\)在区间\((0,1)\)内至少存在两个不同实根.
\end{itemize}
\begin{solution}
因为\(\lim_{x\to0^+} \frac{f(x)}{x} < 0\)，
所以\begin{equation*}
	\lim_{x\to0^+} f(x)
	= \lim_{x\to0^+} \frac{f(x)}{x} \cdot x
	= \lim_{x\to0^+} \frac{f(x)}{x} \cdot \lim_{x\to0^+} x
	= 0,
\end{equation*}
从而有\begin{equation*}
	f(0) = \lim_{x\to0^+} f(x) = 0;
	\eqno(1)
\end{equation*}
另外由\hyperref[theorem:极限.函数极限的局部保号性1]{函数极限的局部保号性}可知，
存在\(\delta\in(0,1)\)，
当\(0<x<\delta\)时，
成立\begin{equation*}
	\frac{f(x)}{x} < 0.
\end{equation*}
那么，只要任意取定\(x_1\in(0,\delta)\subset(0,1)\)，
就有\begin{equation*}
	f(x_1) < 0.
	\eqno(2)
\end{equation*}
因为\(f\)在区间\([0,1]\)上具有\(2\)阶导数，
所以\(f\)在\([0,1]\)上连续.
又因为\(f(1) > 0\)，
所以由\hyperref[theorem:极限.零点定理]{零点定理}可知，
存在\(x_2\in(x_1,1)\subset(0,1)\)，
使得\begin{equation*}
	f(x_2) = 0.
	\eqno(3)
\end{equation*}
这就是说，点\(x_2\)是方程\(f(x) = 0\)在区间\((0,1)\)内的一个实根.

令\(F(x) = f(x) f'(x)\)，
则\(F'(x) = f(x) f''(x) + (f'(x))^2\).
由于\(f(0) = f(x_2) = 0\)，
所以由\hyperref[theorem:微分中值定理.罗尔定理]{罗尔定理}可知，
存在\(x_3\in(0,x_2)\)，
使得\begin{equation*}
	f'(x_3) = 0.
	\eqno(4)
\end{equation*}
于是\begin{equation*}
	F(0) = F(x_3) = F(x_2) = 0.
	\eqno(5)
\end{equation*}
又由\hyperref[theorem:微分中值定理.罗尔定理]{罗尔定理}可知，
存在\(\xi_1\in(0,x_3)\subset(0,1)\)，
存在\(\xi_2\in(x_3,x_2)\subset(0,1)\)，
使得\begin{equation*}
	F'(\xi_1) = F'(\xi_2) = 0.
	\qedhere
\end{equation*}
\end{solution}
\end{example}

\subsection{拉格朗日中值定理}
\begin{theorem}[拉格朗日中值定理]\label{theorem:微分中值定理.拉格朗日中值定理}
%@see: 《高等数学（第六版 上册）》 P129 拉格朗日中值定理
%@see: 《数学分析（第二版 上册）》（陈纪修） P170 定理5.1.3（Lagrange中值定理）
%@see: 《数学分析教程（第3版 上册）》（史济怀） P146 定理3.4.3（Lagrange）
如果函数\(f\colon[a,b]\to\mathbb{R}\)
在闭区间\([a,b]\)上连续，在开区间\((a,b)\)内可导，
即\(f \in C[a,b] \cap D(a,b)\)，
那么\(\exists \xi \in (a,b)\)，
使得\begin{equation}\label{equation:微分中值定理.拉格朗日中值公式}
	f(b) - f(a) = f'(\xi) \cdot (b-a).
\end{equation}
\begin{proof}
令\begin{equation*}
	\phi(x)=f(x)-f(a)-\frac{f(b)-f(a)}{b-a}(x-a).
\end{equation*}
不难得\(\phi(a)=\phi(b)=0\)，
\(\phi\in C[a,b]\cap D(a,b)\)，
且\begin{equation*}
	\phi'(x)=f'(x)-\frac{f(b)-f(a)}{b-a}.
\end{equation*}
根据\hyperref[theorem:微分中值定理.罗尔定理]{罗尔定理}可知，
在\(\exists\xi\in(a,b)\)使得\(\phi'(\xi)=0\)，
即\begin{equation*}
	f'(\xi)-\frac{f(b)-f(a)}{b-a}=0,
	\quad\text{或}\quad
	\frac{f(b)-f(a)}{b-a}=f'(\xi),
\end{equation*}
亦即\begin{equation*}
	f(b)-f(a)=f'(\xi)(b-a).
	\qedhere
\end{equation*}
\end{proof}
\end{theorem}
\cref{equation:微分中值定理.拉格朗日中值公式} 叫做\DefineConcept{拉格朗日中值公式}.

设\(x\)为区间\([a,b]\)内一点，
\(x+\increment x\)为这区间内的另一点（\(\increment x \gtrless 0\)），
则\cref{equation:微分中值定理.拉格朗日中值公式}
在区间\([x,x+\increment x]\)（当\(\increment x>0\)时）
或在区间\([x+\increment x,x]\)（当\(\increment x<0\)时）上
就成为\begin{equation}
	f(x+\increment x) - f(x)
	= f'(x+\theta \increment x) \cdot \increment x
	\quad(0<\theta<1).
\end{equation}

如果记\(f(x)\)为\(y\)，\(\increment y = f(x+\increment x) - f(x)\)，
则上式又可写成
\begin{equation}\label{equation:微分中值定理.有限增量公式}
	\increment y = f'(x+\theta \increment x) \cdot \increment x
	\quad(0<\theta<1).
\end{equation}
我们知道，函数的微分\(\dd{y} = f'(x) \cdot \increment x\)是
函数的增量\(\increment y\)的近似表达式.
一般说来，以\(\dd{y}\)近似代替\(\increment y\)时所产生的误差
只有当\(\increment x\to0\)时才趋于零；
而\cref{equation:微分中值定理.有限增量公式}
却给出了自变量取得有限增量\(\increment x\)（\(\abs{\increment x}\)不一定很小）时，
函数增量\(\increment y\)的准确表达式.
因此，这个定理也叫做\DefineConcept{有限增量定理}，
\cref{equation:微分中值定理.有限增量公式} 称为\DefineConcept{有限增量公式}.

\begin{remark}
对于\hyperref[theorem:微分中值定理.拉格朗日中值定理]{拉格朗日中值定理}，
我们需要注意到：
通常来说\(\xi\)不是唯一的.
只有当函数\(f\)是严格单调函数时，\(\xi\)是\(x\)的函数，
例如：\begin{itemize}
	\item 由\(e^x - e^0 = x e^\xi\)可得\(\xi = \ln\frac{e^x-1}{x}\)，
	而\(\lim_{x\to0} \frac{\xi}{x} = \frac12\).
	\item 由\(\ln x - \ln1 = (x-1) \frac1\xi\)可得\(\xi = \frac{x-1}{\ln x}\)，
	而\(\lim_{x\to0} \frac{\xi}{x} = \infty\).
\end{itemize}
\end{remark}

\begin{example}\label{example:微分中值定理.拉格朗日中值定理.重要不等式1}
证明：当\(x>0\)时，成立不等式\begin{equation*}
	\frac{x}{1+x} < \ln(1+x) < x.
\end{equation*}
\begin{proof}
设\(f(t) = \ln(1+t)\)，
显然\(f(t)\)在区间\([0,x]\)上满足拉格朗日中值定理的条件，
那么存在\(\xi\in(0,x)\)
使得\begin{equation*}
	f(x)-f(0)=f'(\xi)\cdot(x-0).
\end{equation*}
由于\(f(0)=0\)，
\(f'(\xi)=\frac1{1+\xi}\)，
故\begin{equation*}
	\ln(1+x) = \frac{x}{1+\xi}.
\end{equation*}
又由\(0<\xi<x\)，
有\begin{equation*}
	\frac{x}{1+x}<\frac{x}{1+\xi}<x,
\end{equation*}
所以\begin{equation*}
	\frac{x}{1+x}<\ln(1+x)<x, \quad x > 0.
	\qedhere
\end{equation*}
\end{proof}
\end{example}
\begin{remark}
同理可证：当\(-1<x<0\)时，
仍有\(\frac{x}{1+x}<\ln(1+x)<x\)成立.
于是\cref{example:微分中值定理.拉格朗日中值定理.重要不等式1} 中
不等式的成立条件可以扩大为\(x>-1\).
\end{remark}

\begin{example}\label{example:微分中值定理.拉格朗日中值定理.欧拉--马歇罗尼常数}
证明：极限\(\lim_{n\to\infty} \left(\sum_{k=1}^n \frac{1}{k} - \ln n\right)\)收敛.
\begin{proof}
记\(x_n = \sum_{k=1}^n \frac{1}{k} - \ln n\).

利用\cref{example:微分中值定理.拉格朗日中值定理.重要不等式1} 的结论，
任取\(n\in\mathbb{N}^+\)，
令\(x=\frac{1}{n}\)，
则有\begin{equation*}
	\frac{1}{n+1} < \ln(1+\frac{1}{n}) < \frac{1}{n}.
\end{equation*}
因此\begin{equation*}
	x_{n+1} - x_n = \frac{1}{n+1} - \ln\frac{n+1}{n}
	= \frac{1}{n+1} - \ln(1+\frac{1}{n}) < 0,
\end{equation*}
可知\(\{x_n\}\)是单调减少数列.
又因为\begin{align*}
	x_n &= 1 + \frac{1}{2} + \dotsb + \frac{1}{n} - \ln n \\
	&> \ln(1+1) + \ln(1+\frac{1}{2}) + \dotsb + \ln(1+\frac{1}{n}) - \ln n \\
	&= (\ln2-\ln1)+(\ln3-\ln2)+\dotsb+[\ln(n+1)-\ln n] - \ln n \\
	&= \ln(n+1) - \ln n
	= \ln(1+\frac{1}{n})
	> \frac{1}{n+1} > 0,
\end{align*}
可知\(\{x_n\}\)有界.
综上，根据\hyperref[theorem:极限.函数的单调有界定理]{单调有界定理}可知，
数列\(\{x_n\}\)收敛于有限值.
\end{proof}
\end{example}
\begin{remark}
我们把极限\(\lim_{n\to\infty} \left(\sum_{k=1}^n \frac{1}{k} - \ln n\right)\)
称为\DefineConcept{欧拉--马歇罗尼常数}（Euler--Mascheroni Constant），
记作\(\gamma\)，
其在数值上近似等于{0.577~216}.
%@Mathematica: N[EulerGamma, 6]
%@see: https://mathworld.wolfram.com/Euler-MascheroniConstant.html
\end{remark}

我们知道，如果函数\(f\)在某一区间上是一个常数，
那么\(f\)在该区间上的导数恒为零.作为拉格朗日中值定理的一个应用，
可以推出以上命题的逆命题也是成立的，即：
\begin{theorem}
%@see: 《高等数学（第六版 上册）》 P131 定理
%@see: 《数学分析（第二版 上册）》（陈纪修） P171 定理5.1.4
如果函数\(f\colon(a,b)\to\mathbb{R}\)在\((a,b)\)上的导数恒为零，
那么\(f\)在\((a,b)\)上恒为常数.
\begin{proof}
设\(x_1,x_2\in(a,b)\)且\(x_1<x_2\)，
在\([x_1,x_2]\)上应用\hyperref[theorem:微分中值定理.拉格朗日中值定理]{拉格朗日中值定理}，
便知\begin{equation*}
	(\exists\xi\in(x_1,x_2)\subseteq(a,b))
	[f(x_2) - f(x_1) = f'(\xi) (x_2 - x_1)].
\end{equation*}
因为\(f'(\xi) = 0\)，
所以\(f(x_1) = f(x_2)\).
考虑到\(x_1,x_2\)的任意性，就知道\(f\)在\((a,b)\)上恒为常数.
\end{proof}
\end{theorem}

\begin{example}
证明恒等式：\begin{equation*}
	\arcsin x + \arccos x = \frac{\pi}{2},
	\quad -1 \leq x \leq 1.
\end{equation*}
\begin{proof}
设\(f(t) = \arcsin t + \arccos t\ (-1 \leq t \leq 1)\)，求导得\begin{equation*}
	f'(t) = \dv{t} \arcsin t + \dv{t} \arccos t
	= \frac{1}{\sqrt{1-t^2}} - \frac{1}{\sqrt{1-t^2}} = 0.
\end{equation*}
这说明\(f(t)\)在区间\([-1,1]\)上是常数.

代入\(x=0\)得\(\arcsin 0 = 0\)，\(\arccos 0 = \pi/2\)，那么\begin{equation*}
	f(x) = f(0) \equiv \arcsin 0 + \arccos 0 = \frac{\pi}{2},
	\quad -1 \leq x \leq 1.
	\qedhere
\end{equation*}
\end{proof}
\end{example}

\begin{example}
计算极限\(\lim_{x\to0} \left[\sin x - \sin(\sin x)\right]\).
\begin{solution}
由\hyperref[theorem:微分中值定理.拉格朗日中值定理]{拉格朗日中值定理}，
% 当\(x>0\)时，有\(0 < \sin x < x\)；
% 当\(x<0\)是，有\(x < \sin x < 0\).
存在\(\xi\)在\(x\)和\(\sin x\)之间，
使得\begin{equation*}
	\sin x - \sin(\sin x)
	= \cos\xi (x-\sin x).
\end{equation*}
当\(x\to0\)时，\(\sin x\to0\)，
故\(\xi\to0\)，\(\cos\xi\to1\)，那么\begin{equation*}
	\lim_{x\to0} \left[\sin x - \sin(\sin x)\right]
	= \lim_{x\to0} \cos\xi \cdot
		\left(\lim_{x\to0} x - \lim_{x\to0} \sin x\right)
	= 1 \cdot (0-0) = 0.
\end{equation*}
\end{solution}
\end{example}
\begin{remark}
上例也可直接根据\cref{theorem:极限.连续函数的极限3} 得到，
即直接将\(x=0\)代入函数\(f(x) = \sin x - \sin(\sin x)\)中.
\end{remark}
\begin{example}%武忠祥
计算极限\(\lim_{x\to+\infty} x \left( \frac\pi4 - \arctan\frac{x}{x+1} \right)\).
\begin{solution}
注意到\(\arctan1 = \frac\pi4\)，
并且当\(x>0\)时，\(\frac{x}{x+1} < 1\)恒成立.
因为\(\arctan\)在\((-\infty,+\infty)\)连续且可导，
所以由\hyperref[theorem:微分中值定理.拉格朗日中值定理]{拉格朗日中值定理}可知
存在\(\xi\in\left( \frac{x}{x+1},1 \right)\)使得\begin{equation*}
	\arctan1 - \arctan\frac{x}{x+1}
	= \eval{(\arctan x)'}_{x=\xi} \cdot \left( 1 - \frac{x}{x+1} \right)
	= \frac1{1+\xi^2} \cdot \left( 1 - \frac{x}{x+1} \right).
\end{equation*}
因为当\(x\to+\infty\)时，有\(\frac{x}{x+1} \to 1\)，所以\(\xi \to 1\).
于是\begin{align*}
	\lim_{x\to+\infty} x \left( \frac\pi4 - \arctan\frac{x}{x+1} \right)
	&= \lim_{x\to+\infty} x
		\cdot \frac1{1+\xi^2}
		\cdot \left( 1 - \frac{x}{x+1} \right) \\
	&= \lim_{x\to+\infty} \frac1{1+\xi^2}
		\cdot \lim_{x\to+\infty} \frac{x}{x+1}
	= \frac12.
\end{align*}
\end{solution}
\end{example}
\begin{example}
%@see: https://www.bilibili.com/video/BV1DZ421K7XU/
计算极限\(\lim_{x\to0^+} \frac{(1+x)^{\frac1x} - e}{x}\).
\begin{solution}
我们已经知道\begin{equation*}
	(1+x)^{\frac1x}
	= e^{\frac1x \ln(1+x)}
	\to e^1
	\quad(x\to0^+).
\end{equation*}
因为函数\(x \mapsto e^x\)在\((-\infty,+\infty)\)连续且可导，
所以由\hyperref[theorem:微分中值定理.拉格朗日中值定理]{拉格朗日中值定理}可知，
在\(1\)与\(\frac1x \ln(1+x)\)之间存在\(\xi\)，
使得\begin{equation*}
	\frac{(1+x)^{\frac1x} - e}{x}
	= \frac{e^\xi}{x} \left[ \frac{\ln(1+x)}{x} - 1 \right]
	= e^\xi \frac{\ln(1+x) - x}{x^2}.
\end{equation*}
当\(x\to0^+\)时，\(\xi\to1\)，从而\(e^\xi \to e\)，
另外有\begin{equation*}
	\lim_{x\to0^+} \frac{\ln(1+x) - x}{x^2}
	= \lim_{x\to0^+} \frac{-\frac12 x^2}{x^2}
	= -\frac12.
\end{equation*}
\end{solution}
\end{example}

\begin{example}
%@see: 《高等数学（第六版 上册）》 P134 习题3-1 9.
设\(a>b>0,n>1\).
证明：\begin{equation*}
	n b^{n-1} (a-b) < a^n-b^n < n a^{n-1} (a-b).
\end{equation*}
\begin{proof}
\begin{proof}[证法一]
注意到\begin{equation*}
	a^n-b^n
	= (a-b)(a^{n-1} + a^{n-2} b + \dotsb + a b^{n-2} + b^{n-1}).
\end{equation*}
由于\(a>b>0\)，
所以\begin{equation*}
	n b^{n-1} < a^{n-1} + a^{n-2} b + \dotsb + a b^{n-2} + b^{n-1} < n a^{n-1},
\end{equation*}
于是\begin{equation*}
	n b^{n-1} (a-b) < a^n-b^n < n a^{n-1} (a-b).
	\qedhere
\end{equation*}
\end{proof}
\begin{proof}[证法二]
令\(f(x) = x^n\)，
显然\(f\)在\((-\infty,+\infty)\)内具有任意阶导数，
并且\begin{equation*}
	f'(x) = n x^{n-1},
	\qquad
	f''(x) = n(n-1) x^{n-2},
\end{equation*}
由拉格朗日中值定理可知\(\exists\xi\in(b,a)\)使得\begin{equation*}
	\frac{a^n-b^n}{a-b}
	= \frac{f(a)-f(b)}{a-b}
	= f'(\xi).
\end{equation*}
注意到当\(x>0\)时\(f''(x)>0\)，即\(f'\)在\((0,+\infty)\)上严格单调增加，
于是\begin{equation*}
	n b^{n-1} = f'(b) < f'(\xi) < f'(a) = n a^{n-1}.
\end{equation*}
因此\begin{equation*}
	n b^{n-1} (a-b) < a^n-b^n < n a^{n-1} (a-b).
	\qedhere
\end{equation*}
\end{proof}\let\qed\relax
\end{proof}
\end{example}
\begin{example}
%@see: 《高等数学（第六版 上册）》 P134 习题3-1 10.
设\(a>b>0\).
证明：\begin{equation*}
	\frac{a-b}{a} < \ln\frac{a}{b} < \frac{a-b}{b}.
\end{equation*}
\begin{proof}
由拉格朗日中值定理可知\(\exists\xi\in(b,a)\)使得\begin{equation*}
	\ln\frac{a}{b}
	= \ln a - \ln b
	= \frac1\xi (a-b).
\end{equation*}
又因为函数\(x \mapsto \frac1x\)在\((0,+\infty)\)上严格单调减少，
所以\(\frac1a < \frac1\xi < \frac1b\)，
因此\begin{equation*}
	\frac{a-b}{a} < \ln\frac{a}{b} < \frac{a-b}{b}.
	\qedhere
\end{equation*}
\end{proof}
\end{example}
\begin{example}
%@see: 《高等数学（第六版 上册）》 P134 习题3-1 13.
设\(f,g \in C[a,b] \cap D(a,b)\).
证明：\(\exists\xi\in(a,b)\)使得\begin{equation*}
	\begin{vmatrix}
		f(a) & f(b) \\
		g(a) & g(b)
	\end{vmatrix}
	= (b-a) \begin{vmatrix}
		f(a) & f'(\xi) \\
		g(a) & g'(\xi)
	\end{vmatrix}.
\end{equation*}
\begin{proof}
令\begin{equation*}
	F(x) = \begin{vmatrix}
		f(a) & f(x) \\
		g(a) & g(x)
	\end{vmatrix}.
\end{equation*}
显然\(F(a) = 0\).
求导得\begin{equation*}
	F'(x) = \begin{vmatrix}
		f(a) & f'(x) \\
		g(a) & g'(x)
	\end{vmatrix}.
\end{equation*}
由拉格朗日中值定理可知\begin{equation*}
	F(b) - F(a) = F'(\xi) (b-a)
	\quad(a<\xi<b).
	\qedhere
\end{equation*}
\end{proof}
\end{example}
\begin{example}
%@see: 《高等数学（第六版 上册）》 P134 习题3-1 14.
证明：若函数\(f\)在\((-\infty,+\infty)\)内满足关系式\(f'(x) = f(x)\)，
且\(f(0) = 1\)，则\(f(x) = e^x\).
\begin{proof}
记\(F(x) = e^{-x} f(x)\)，
求导得\begin{equation*}
	F'(x) = e^{-x} (f'(x) - f(x))
	= 0.
\end{equation*}
于是由拉格朗日中值定理可知，
如果\(-\infty<a<b<+\infty\)，那么\begin{equation*}
	F(b) - F(a)
	= (b-a) F'(\xi)
	= 0
	\quad(a<\xi<b).
\end{equation*}
由此可见\(F\)是常数函数，
那么\begin{equation*}
	f(x) = F(x)~e^x = C~e^x,
\end{equation*}
其中\(C\)是常数.
又因为\(f(0) = C = 1\)，
所以\(f(x) = e^x\).
\end{proof}
\end{example}

\begin{example}
%@see: 《2020年全国硕士研究生入学统一考试（数学一）》三解答题/第19题
设函数\(f\)在区间\([0,2]\)上具有连续导数，
\(f(0) = f(2) = 0,
M = \max_{0 \leq x \leq 2} \abs{f(x)}\).
证明：\begin{itemize}
	\item 存在\(\xi\in(0,2)\)使得\(\abs{f'(\xi)} \geq M\)；
	\item 若对任意\(x\in(0,2)\)有\(\abs{f'(x)} \leq M\)，则\(M = 0\).
\end{itemize}
\begin{proof}
假设\(M = 0\)，
则\(f(x)\)恒等于\(0\)，\(f'(x)\)也恒等于\(0\)，
于是对于任意\(\xi\in(0,2)\)，总是成立\(\abs{f'(\xi)} \geq M\).

假设\(M > 0\)，
且点\(c\in(0,2)\)满足\(\abs{f(c)} = M\).
% 这里之所以假设\(c\in(0,2)\)，是因为\(f(0) = f(2) = 0 < M\)
由拉格朗日中值定理，
存在\(\xi_1\in(0,c)\)，
存在\(\xi_2\in(c,2)\)，
使得\begin{equation*}
	\abs{f(c)}
	% \(f(0) = f(2) = 0\)
	= \abs{f(c) - f(0)}
	= \abs{f'(\xi_1) \cdot (c - 0)},
	\qquad
	\abs{f(c)}
	% \(f(0) = f(2) = 0\)
	= \abs{f(2) - f(c)}
	= \abs{f'(\xi_2) \cdot (2 - c)},
\end{equation*}
于是\begin{equation*}
	% 代入\(\abs{f(c)} = M\)
	\abs{f'(\xi_1)} = \frac{M}{c},
	\qquad
	\abs{f'(\xi_2)} = \frac{M}{2-c}.
\end{equation*}
当\(0<c<1\)时，\(\abs{f'(\xi_1)} > M\)，取\(\xi=\xi_1\)；
当\(c=1\)时，\(\abs{f'(\xi_1)} = \abs{f'(\xi_2)} = M\)，取\(\xi=\xi_1\)；
当\(1<c<2\)时，\(\abs{f'(\xi_2)} > M\)，取\(\xi=\xi_2\)；
总而言之，\(\abs{f'(\xi)} \geq M\).

假设对任意\(x\in(0,2)\)有\(\abs{f'(x)} \leq M\).
因为当\(c\in(0,1)\cup(1,2)\)时，由上可知，
存在\(\xi\in(0,1)\)使得\(\abs{f'(\xi)} > M\)，与假设矛盾，
所以\(c\)只可能等于\(1\)，即有\(\abs{f(1)} = M\)，
或者说\(x=1\)是\(f\)的极值点，
那么由费马引理可知\(f'(1) = 0\).
\begin{itemize}
	\item 假设\(f(1) = M\).
	令\(g(x) = f(x) - M x\)，
	则\begin{equation*}
		g(0) = f(0) - 0 = 0,
		\qquad
		g(1) = f(1) - M = 0,
		\qquad
		g'(x) = f'(x) - M \leq 0,
	\end{equation*}
	所以\(g\)在\((0,1)\)内单调不增，
	可以用反证法证明\(g\)在\((0,1)\)内只能恒等于\(0\).
	于是\(f(x) = M x\)，
	那么\(f'_-(1) = M = 0\).

	\item 假设\(f(1) = -M\).
	令\(g(x) = f(x) + M x\)，
	则\begin{equation*}
		g(0) = f(0) + 0 = 0,
		\qquad
		g(1) = f(1) + M = 0,
		\qquad
		g'(x) = f'(x) + M \geq 0,
	\end{equation*}
	所以\(g\)在\((0,1)\)内单调不减，
	可以用反证法证明\(g\)在\((0,1)\)内只能恒等于\(0\).
	于是\(f(x) = -M x\)，
	那么\(f'_-(1) = -M = 0\)，
	即\(M = 0\).
\end{itemize}
综上所述，若对任意\(x\in(0,2)\)有\(\abs{f'(x)} \leq M\)，则\(M = 0\).
\end{proof}
\end{example}

\subsection{柯西中值定理}
\begin{theorem}[柯西中值定理]\label{theorem:微分中值定理.柯西中值定理}
%@see: 《高等数学（第六版 上册）》 P133 柯西中值定理
%@see: 《数学分析（第二版 上册）》（陈纪修） P179 定理5.1.9（Cauchy中值定理）
%@see: 《数学分析教程（第3版 上册）》（史济怀） P149 定理3.4.4（Cauchy）
如果函数\(f\colon[a,b]\to\mathbb{R}\)和\(g\colon[a,b]\to\mathbb{R}\)
都在闭区间\([a,b]\)上连续，都在开区间\((a,b)\)内可导，
即\(f,g \in C[a,b] \cap D(a,b)\)，
并且\((\forall x\in(a,b))[g'(x) \neq 0]\)，
那么\(\exists\xi\in(a,b)\)，
使得\begin{equation}
	\frac{f(b)-f(a)}{g(b)-g(a)}=\frac{f'(\xi)}{g'(\xi)}.
\end{equation}
\begin{proof}
因为\(g(b)-g(a)=g'(\eta)(b-a)\ (a<\eta<b)\)，
根据假定\(g'(\eta)\neq0\)，
又\(b-a\neq0\)，
所以\(g(b)-g(a)\neq0\).
令\begin{equation*}
	\phi(x)=f(x)-f(a)-\frac{f(b)-f(a)}{g(b)-g(a)}[g(x)-g(a)].
\end{equation*}
不难得\(\phi(a)=\phi(b)=0\)，
\(\phi\in C[a,b]\cap D(a,b)\)，
且\begin{equation*}
	\phi'(x)=f'(x)-\frac{f(b)-f(a)}{g(b)-g(a)}\cdot g'(x).
\end{equation*}
根据\hyperref[theorem:微分中值定理.罗尔定理]{罗尔定理}可知，
在\(\exists\xi\in(a,b)\)使得\(\phi'(\xi)=0\)，
即\begin{equation*}
	f'(\xi)-\frac{f(b)-f(a)}{g(b)-g(a)}\cdot g'(\xi)=0,
\end{equation*}
亦即\begin{equation*}
	\frac{f(b)-f(a)}{g(b)-g(a)}=\frac{f'(\xi)}{g'(\xi)}.
	\qedhere
\end{equation*}
\end{proof}
\end{theorem}

我们把\hyperref[theorem:微分中值定理.罗尔定理]{罗尔定理}、
\hyperref[theorem:微分中值定理.拉格朗日中值定理]{拉格朗日中值定理}%
和\hyperref[theorem:微分中值定理.柯西中值定理]{柯西中值定理}%
统称为\DefineConcept{微分中值定理}（mean-value theorem）.
%@see: https://mathworld.wolfram.com/Mean-ValueTheorem.html
%@see: https://mathworld.wolfram.com/ExtendedMean-ValueTheorem.html

\begin{example}
%@see: 《高等数学（第六版 上册）》 P134 习题3-1 15.
设函数\(f\)在点\(x=0\)的某邻域内具有\(n\)阶导数，
且\begin{equation*}
	f(0) = f'(0) = \dotsb = f^{(n-1)}(0) = 0.
\end{equation*}
利用柯西中值定理证明：\begin{equation*}
	\frac{f(x)}{x^n} = \frac{f^{(n)}(\theta x)}{n!}
	\quad(0<\theta<1).
\end{equation*}
\begin{proof}
记\(g(x) = x^n\).
由柯西中值定理可知\begin{equation*}
	\frac{f(x) - f(0)}{g(x) - g(0)}
	= \frac{f(x)}{g(x)}
	= \frac{f'(\xi_1)}{g'(\xi_1)}
	\quad(\text{$\xi_1$在$0$与$x$之间}),
\end{equation*}
归纳可知\begin{equation*}
	\frac{f^{(k)}(\xi_k)}{g^{(k)}(\xi_k)}
	= \frac{f^{(k+1)}(\xi_{k+1})}{g^{(k+1)}(\xi_{k+1})}
	\quad(\text{$\xi_{k+1}$在$0$与$\xi_k$之间};k=0,1,2,\dotsc,n-1).
\end{equation*}
因此\begin{equation*}
	\frac{f(x)}{g(x)}
	= \frac{f'(\xi_1)}{g'(\xi_1)}
	= \dotsb
	= \frac{f^{(n)}(\xi_n)}{g^{(n)}(\xi_n)},
\end{equation*}
即\begin{equation*}
	\frac{f(x)}{x^n}
	= \frac{f^{(n)}(\xi_n)}{n!}.
	\qedhere
\end{equation*}
\end{proof}
\end{example}

\subsection{达布定理}
一般来说，一个可微函数的导数并不一定连续，
但是导函数却像闭区间上的连续函数一样，
服从自己的“零点定理”和“介值定理”.

\begin{theorem}[达布零点定理]\label{theorem:微分中值定理.达布定理1}
%@see: 《数学分析教程（第3版 上册）》（史济怀） P150 定理3.4.5(1)
设函数\(f \in D(a,b)\)，\(a<x_1<x_2<b\).
如果\(f'(x_1) \cdot f'(x_2) < 0\)，
那么\begin{equation*}
	(\exists\xi\in(x_1,x_2))
	[f'(\xi) = 0].
\end{equation*}
\begin{proof}
不妨设\(f'(x_1)<0,f'(x_2)>0\).
那么根据\hyperref[theorem:极限.函数极限的局部保号性1]{函数极限的局部保号性}，
存在正数\(\delta_1,\delta_2\)，
使得\(x_1\)的\(\delta_1\)邻域\(U(x_1,\delta_1)\)
和\(x_2\)的\(\delta_2\)邻域\(U(x_2,\delta_2)\)
都是区间\((a,b)\)的真子集，
且对任意\(x \in U(x_1,\delta_1)\)成立\(\frac{f(x)-f(x_1)}{x-x_1}<0\)
以及对任意\(x \in U(x_2,\delta_2)\)成立\(\frac{f(x)-f(x_2)}{x-x_2}>0\).

任取实数\(\alpha \in U(x_1,\delta_1)\)和\(\beta \in U(x_2,\delta_2)\)，
使得\(x_1<\alpha<\beta<x_2\)，
由上可知\begin{equation*}
	\begin{split}
		\frac{f(\alpha)-f(x_1)}{\alpha-x_1}<0
		\iff
		f(\alpha)-f(x_1)<0
		\iff
		f(\alpha)<f(x_1), \\
		\frac{f(\beta)-f(x_2)}{\beta-x_2}>0
		\iff
		f(\beta)-f(x_2)<0
		\iff
		f(\beta)<f(x_2).
	\end{split}
\end{equation*}
这就是说\(f(x_1)\)和\(f(x_2)\)都不是\(f\)在\([x_1,x_2]\)上的最小值.

由于\(f \in D(a,b)\)而\([x_1,x_2]\subset(a,b)\)，
所以\(f \in D[x_1,x_2]\)，
那么根据\cref{theorem:导数与微分.函数可导性与连续性的关系}
有\(f \in C[x_1,x_2]\).
根据\hyperref[theorem:极限.最值定理]{魏尔斯特拉斯最值定理}，
有\begin{equation*}
	(\exists\xi\in(x_1,x_2))
	(\forall x\in(x_1,x_2))
	[f(\xi) \leq f(x)].
\end{equation*}
那么利用\hyperref[theorem:微分中值定理.费马引理]{费马引理}可知\(f'(\xi)=0\).
\end{proof}
\end{theorem}

我们可以将\cref{theorem:微分中值定理.达布定理1} 作一番推广.
\begin{theorem}[达布介值定理]\label{theorem:微分中值定理.达布定理2}
%@see: 《数学分析教程（第3版 上册）》（史济怀） P150 定理3.4.5(1)
%@see: 《数学分析（第五版 上册）》（华东师范大学） P115 定理6.5（达布定理，Darboux定理）
设函数\(f \in D[a,b]\)，且\(f'(a) < f'(b)\).
那么\(\forall\lambda\in(f'(a),f'(b))\)，\(\exists\xi\in(a,b)\)，
使得\begin{equation*}
	f'(\xi) = \lambda.
\end{equation*}
\begin{proof}
令\(F(x) = f(x) - \lambda x\ (a \leq x \leq b)\).
那么\(F \in D[a,b]\)，且\begin{equation*}
	F'(a) = f'(a) - \lambda < 0, \qquad
	F'(b) = f'(b) - \lambda > 0.
\end{equation*}
根据\cref{theorem:微分中值定理.达布定理1} 就有\(\exists\xi\in[a,b]\)使得\begin{equation*}
	F'(\xi)=0,
\end{equation*}
即\(f'(x) = \lambda\).
\end{proof}
\end{theorem}

\begin{theorem}
%@see: 《数学分析教程（第3版 上册）》（史济怀） P150 定理3.4.5(2)
设\(f \in D[a,b]\)，那么导函数\(f'\)没有第一类间断点.
\begin{proof}
用反证法.
设\(x_0\)是\(f'\)的一个第一类间断点，
那么\(f'(x_0^+)\)和\(f'(x_0^-)\)都存在.

因为\(f \in D[a,b]\)，
由\hyperref[theorem:微分中值定理.拉格朗日中值定理]{拉格朗日中值定理}，
可得\begin{equation*}
	f'(x_0)
	= f'_+(x_0)
	= \lim_{x \to x_0^+} \frac{f(x)-f(x_0)}{x-x_0}
	= \lim_{x \to x_0^+} \frac{f'(\xi) (x-x_0)}{x-x_0}
	= \lim_{x \to x_0^+} f'(\xi)
	\quad(x_0<\xi<x).
\end{equation*}
由于当\(x \to x_0^+\)时，\(\xi \to x_0^+\)，
且已知\(f'(x_0^+)\)存在，
所以有\begin{equation*}
	f'(x_0)=f'(x_0^+).
\end{equation*}
同理可证\(f'(x_0)=f'(x_0^-)\).
由此可知\(f'\)在点\(x_0\)连续，
而这与\(x_0\)是\(f'\)的间断点矛盾！
\end{proof}
\end{theorem}
\begin{remark}
%@see: 《数学分析教程（第3版 上册）》（史济怀） P151
如果\(f'\)是\([a,b]\)上的连续函数，
它当然具有\hyperref[theorem:极限.闭区间上连续函数的性质.介值定理1]{介值性}.
达布介值定理的意义在于，即使\(f'\)在\([a,b]\)上不连续，\(f'\)仍然具有介值性，
这是导函数所特有的性质.
从这个性质出发，马上可以断言，不存在可导函数\(f\)，使得\begin{equation*}
	f'(x) = D(x)
	\quad\text{或}\quad
	f'(x) = R(x),
\end{equation*}
其中\(D\)是狄利克雷函数，\(R\)是黎曼函数.
\end{remark}

\subsection{导数极限定理}
\begin{theorem}[导数极限定理]\label{theorem:微分中值定理.导数极限定理}
%@see: 《数学分析讲义（第1册）》（程艺） P102 定理3.19
%@see: 《数学分析（第五版 上册）》（华东师范大学） P113 推论3（导数极限定理）
设函数\(f \in C[a,b] \cap D(a,b)\)，\(f'\)是\(f\)的导函数.
\begin{itemize}
	\item 若\(f'\)在点\(a\)的右极限\(f'(a^+)\)存在，
	则\(f\)在点\(a\)的右导数\(f'_+(a)\)也存在，
	且\begin{equation*}
		f'_+(a) = f'(a^+).
	\end{equation*}
	\item 若\(f'\)在点\(b\)的左极限\(f'(b^-)\)存在，
	则\(f\)在点\(b\)的左导数\(f'_-(b)\)也存在，
	且\begin{equation*}
		f'_-(b) = f'(b^-).
	\end{equation*}
\end{itemize}
\begin{proof}
对\(\forall x\in(a,b)\)，
由\hyperref[theorem:微分中值定理.拉格朗日中值定理]{拉格朗日中值定理}可知，
\(\exists\xi\in(a,x)\)，
使得\begin{equation*}
	f'(\xi) = \frac{f(x)-f(a)}{x-a}.
\end{equation*}
令\(x \to a^+\)，则\(\xi \to a^+\)，
于是\begin{equation*}
	f'_+(a)
	= \lim_{x \to a^+} \frac{f(x)-f(a)}{x-a}
	= \lim_{\xi \to a^+} f'(\xi)
	= f'(a^+).
\end{equation*}

同理，\(\exists\zeta\in(x,b)\)，
使得\begin{equation*}
	f'(\zeta) = \frac{f(b)-f(x)}{b-x}.
\end{equation*}
令\(x \to b^-\)，则\(\xi \to b^-\)，
于是\begin{equation*}
	f'_-(b)
	= \lim_{x \to b^-} \frac{f(x)-f(b)}{x-b}
	= \lim_{\xi \to b^-} f'(\xi)
	= f'(b^-).
	\qedhere
\end{equation*}
\end{proof}
\end{theorem}

%TODO 需要证明、例子
% \cref{theorem:微分中值定理.导数极限定理} 说明：
% 如果函数在区间内处处可导，
% 则在区间内的每一点处，导函数\(f'\)要么连续，要么有第二类间断点，绝不可能有第一类间断点.
% 由此推出，具有第一类间断点的函数（如符号函数\(\sgn\)）不能作为某个函数的导函数.

%TODO 需要证明、例子
% 还应该指出：
% 如果函数\(f\)在区间\((a,b)\)内可导，
% 那么\(f\)的导函数\(f'\)在\((a,b)\)内
% 不可能存在可去间断点、跳跃间断点和无穷间断点，
% 只可能存在振荡间断点.
