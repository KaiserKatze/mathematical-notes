\section{换元积分法}
利用基本积分表与积分的性质，我们可以计算的不定积分是非常有限的.
因此，有必要进一步来研究不定积分的求法.
本节把复合函数的微分法反过来用于求解不定积分，
利用中间变量的代换，得到复合函数的积分法，
称为\DefineConcept{换元积分法}，简称\DefineConcept{换元法}.

\subsection{第一类换元法}
\begin{theorem}
设\(f(u)\)具有原函数，\(u=\phi(x)\)可导，则有换元公式\begin{equation*}
	\int f\bigl[\phi(x)\bigr] \phi'(x) \dd{x}
	= \left[ \int f(u) \dd{u} \right]_{u=\phi(x)}.
\end{equation*}
\begin{proof}
设\(f(u)\)的原函数是\(F(u)\)，即\begin{equation*}
	F'(u) = f(u),
	\qquad
	\int f(u) \dd{u} = F(u) + C.
\end{equation*}
因为\(u = \phi(x)\)可导，
那么，根据复合函数微分法，
有\begin{equation*}
	\dd{F\left[\phi(x)\right]} = f\left[\phi(x)\right] \phi'(x) \dd{x},
\end{equation*}
从而根据不定积分的定义有\begin{equation*}
	\int f\bigl[\phi(x)\bigr] \phi'(x) \dd{x}
	= F\bigl[\phi(x)\bigr] + C
	= \left[ \int f(u) \dd{u} \right]_{u=\phi(x)}.
	\qedhere
\end{equation*}
\end{proof}
\end{theorem}

由此定理可见，虽然\(\int f[\phi(x)] \phi'(x) \dd{x}\)是一个整体的记号，
但是从形式上看，被积表达式中的\(\dd{x}\)也可当作\(x\)的微分对待，
从而微分等式\(\phi'(x) \dd{x} = \dd{u}\)可以方便地应用到被积表达式中来，
就像我们把\(\int F'(x) \dd{x}\)记作\(\int \dd{F(x)}\)一样，
就是按微分\(F'(x) \dd{x} = \dd{F(x)}\)，
把被积表达式\(F'(x) \dd{x}\)记作\(\dd{F(x)}\).

\begin{example}
求\(\int \frac{\dd{x}}{3+2x}\).
\begin{solution}
令\(u = 3+2x\)，
那么被积函数\(\frac{1}{3+2x} = \frac{1}{u}\).
这里缺少\(\displaystyle\dv{u}{x}=2\)这样一个因子，
但由于\(\displaystyle\dv{u}{x}\)是个常数，
故可改变系数凑出这个因子：\begin{equation*}
	\frac{1}{3+2x}
	= \frac{1}{2} \cdot \frac{1}{3+2x} \cdot 2
	= \frac{1}{2} \cdot \frac{1}{3+2x} (3+2x)',
\end{equation*}
从而\begin{align*}
	\int \frac{\dd{x}}{3+2x}
	&= \frac{1}{2} \int \frac{1}{3+2x} (3+2x)' \dd{x}
	= \frac{1}{2} \int \frac{\dd{u}}{u} \\
	&= \frac{1}{2} \ln\abs{u} + C
	= \frac{1}{2} \ln\abs{3+2x} + C.
\end{align*}
\end{solution}
\end{example}

\begin{remark}
%@see: 《高等数学（第六版 上册）》 P195
一般地，对于积分\(\int f(ax+b) \dd{x}\)，
总可作变换\(u=ax+b\)，
把它化为\begin{align*}
	\int f(ax+b) \dd{x}
	&= \int \frac{1}{a} f(ax+b) \dd(ax+b) \\
	&= \frac{1}{a} \left[ \int f(u) \dd{u} \right]_{u=ax+b}.
\end{align*}
\end{remark}

\begin{example}
求\(\int 2x e^{x^2} \dd{x}\).
\begin{solution}
令\(u=x^2\)，
则被积函数\(2x e^{x^2} = e^{x^2} (x^2)' = e^u u'\)，
于是\begin{equation*}
	\int 2x e^{x^2} \dd{x}
	= \int e^u \dd{u}
	= e^u + C
	= e^{x^2} + C.
\end{equation*}
\end{solution}
\end{example}

\begin{example}
求\(\int x \sqrt{1-x^2} \dd{x}\).
\begin{solution}
令\(u=1-x^2\)，
则\(\dd{u} = -2x\dd{x}\)，
\(-\frac{1}{2}\dd{u} = x\dd{x}\)，
因此\begin{align*}
	\int x \sqrt{1-x^2} \dd{x}
	&= \int u^{\frac{1}{2}} \left(-\frac{1}{2}\right) \dd{u}
	= -\frac{1}{2} \frac{u^{\frac{3}{2}}}{\frac{3}{2}} + C \\
	&= -\frac{1}{3} u^{\frac{3}{2}} + C
	= -\frac{1}{3} (1-x^2)^{\frac{3}{2}} + C.
\end{align*}
\end{solution}
\end{example}

\begin{example}
求\(\int \frac{\dd{x}}{a^2+x^2}\).
\begin{solution}
令\(u=\frac{x}{a}\)，
\(\dd{x}=a\dd{u}\)，
\(\frac{1}{a^2+x^2}
= \frac{1}{a^2(1+u^2)}\)，
于是\begin{align}
	\int \frac{\dd{x}}{a^2+x^2}
	&= \int \frac{1}{a^2(1+u^2)} \cdot a\dd{u}
		\nonumber \\
	&= \frac{1}{a} \int \frac{\dd{u}}{1+u^2}
		\nonumber \\
	&= \frac{1}{a} \arctan u + C
		\nonumber \\
	&= \frac{1}{a} \arctan\frac{x}{a} + C.
\end{align}
\end{solution}
\end{example}

\begin{example}
求\(\int \frac{\dd{x}}{\sqrt{a^2-x^2}}\ (a>0)\).
\begin{solution}
令\(u=\frac{x}{a}\)，
\(\dd{x}=a\dd{u}\)，
\(\frac{1}{\sqrt{a^2-x^2}}
= \frac{1}{a\sqrt{1-u^2}}\)，
于是\begin{align}
	\int \frac{\dd{x}}{\sqrt{a^2-x^2}}
	&= \int \frac{1}{a\sqrt{1-u^2}} \cdot a\dd{u}
		\nonumber \\
	&= \int \frac{\dd{u}}{\sqrt{1-u^2}}
		\nonumber \\
	&= \arcsin u + C
		\nonumber \\
	&= \arcsin\frac{x}{a} + C.
\end{align}
\end{solution}
\end{example}

\begin{example}
求\(\int \frac{\dd{x}}{x^2 - a^2}\).
\begin{solution}
因为\begin{equation*}
	\frac{1}{x^2 - a^2}
	= \frac{1}{2a} \left(\frac{1}{x-a} - \frac{1}{x+a}\right),
\end{equation*}
所以\begin{align}
	\int \frac{\dd{x}}{x^2 - a^2}
	&= \frac{1}{2a} \int \left(\frac{1}{x-a} - \frac{1}{x+a}\right) \dd{x}
		\nonumber \\
	&= \frac{1}{2a} \left[ \int \frac{\dd(x-a)}{x-a} - \int \frac{\dd(x+a)}{x+a} \right]
		\nonumber \\
	&= \frac{1}{2a} ( \ln\abs{x-a} - \ln\abs{x+a} ) + C
		\nonumber \\
	&= \frac{1}{2a} \ln\abs{\frac{x-a}{x+a}} + C.
\end{align}
\end{solution}
\end{example}

\begin{example}
求\(\int \sin mx \cos nx \dd{x}\ (m \neq n)\).
\begin{solution}
由\cref{equation:函数.三角函数.和积互化公式7}，
\begin{equation*}
	\sin mx \cos nx
	= \frac12 [\sin(m+n)x + \sin(m-n)x],
\end{equation*}
于是\begin{align}
	\int \sin mx \cos nx \dd{x}
	&= \frac12 \left[
		\int \sin(m+n)x \dd{x}
		+ \int \sin(m-n)x \dd{x}
	\right]
	\nonumber \\
	&= -\frac{\cos(m+n)x}{2(m+n)}
		- \frac{\cos(m-n)x}{2(m-n)}
		+ C.
\end{align}
\end{solution}
\end{example}

\begin{example}
求\(\int \sin mx \sin nx \dd{x}\ (m \neq n)\).
\begin{solution}
由\cref{equation:函数.三角函数.和积互化公式10}，
\begin{equation*}
	\sin mx \sin nx
	= -\frac12 [\cos(m+n)x - \cos(m-n)x],
\end{equation*}
于是\begin{align}
	\int \sin mx \sin nx \dd{x}
	&= -\frac12 \left[
		\int \cos(m+n)x \dd{x}
		- \int \cos(m-n)x \dd{x}
	\right]
	\nonumber \\
	&= \frac{\sin(m-n)x}{2(m-n)}
		- \frac{\sin(m+n)x}{2(m+n)}
		+ C.
\end{align}
\end{solution}
\end{example}

\begin{example}
求\(\int \cos mx \cos nx \dd{x}\ (m \neq n)\).
\begin{solution}
由\cref{equation:函数.三角函数.和积互化公式9}，
\begin{equation*}
	\cos mx \cos nx
	= \frac12 [\cos(m+n)x + \cos(m-n)x],
\end{equation*}
于是\begin{align}
	\int \cos mx \cos nx \dd{x}
	&= \frac12 \left[
		\int \cos(m+n)x \dd{x}
		+ \int \cos(m-n)x \dd{x}
	\right]
	\nonumber \\
	&= \frac{\sin(m+n)x}{2(m+n)}
		+ \frac{\sin(m-n)x}{2(m-n)}
		+ C.
\end{align}
\end{solution}
\end{example}

\begin{example}
求\(\int \sin^3 x \dd{x}\).
\begin{solution}
\(\int \sin^3 x \dd{x}
= \int \sin^2 x \cdot \sin x \dd{x}
= -\int (1 - \cos^2 x) \dd(\cos x)
= -\cos x + \frac{1}{3} \cos^3 x + C\).
\end{solution}
\end{example}

\begin{remark}
%@see: 《高等数学（第六版 上册）》 P197
一般地，对于\(\sin^{2k+1} x \cos^n x\)或\(\sin^n x \cos^{2k+1} x\)
（其中\(k\in\mathbb{N}\)）型函数的积分，
总可依次作变换\(u = \cos x\)或\(u = \sin x\)，求得结果.
\end{remark}

\begin{example}
%@see: 《高等数学（第六版 上册）》 P197 例13
求\(\int \tan x \dd{x}\).
\begin{solution}
由\cref{equation:三角函数.正切与正余弦的关系}
有\(\tan x = \frac{\sin x}{\cos x}\)，
所以\begin{align*}
	\int \tan x \dd{x}
	&= \int \frac{\sin x}{\cos x} \dd{x}
	= - \int \frac{1}{\cos x} \dd(\cos x) \\
	&= - \ln\abs{\cos x} + C.
\end{align*}
\end{solution}
\end{example}

%@see: 《高等数学（第六版 上册）》 P198
类似地可得\(\int \cot x \dd{x} = \ln\abs{\sin x} + C\).

\begin{example}
%@see: 《高等数学（第六版 上册）》 P198 例14
求\(\int \cos^2 x \dd{x}\).
\begin{solution}
\(\begin{aligned}[t]
	\int \cos^2 x \dd{x}
	&= \int \frac{1 + \cos 2x}{2} \dd{x}
	= \frac{1}{2} \left( \int \dd{x} + \int \cos 2x \dd{x} \right) \\
	&= \frac{1}{2} \int \dd{x} + \frac{1}{4} \int \cos 2x \dd(2x) \\
	&= \frac{x}{2} + \frac{\sin 2x}{4} + C.
\end{aligned}\)
\end{solution}
\end{example}

\begin{example}
%@see: 《高等数学（第六版 上册）》 P198 例15
求\(\int \sin^2 x \cos^4 x \dd{x}\).
\begin{solution}
\(\begin{aligned}[t]
	\int \sin^2 x \cos^4 x \dd{x}
	&= \frac{1}{8} \int (1 - \cos 2x) (1 + \cos 2x)^2 \dd{x} \\
	&= \frac{1}{8} \int (1 + \cos 2x - \cos^2 2x - \cos^3 2x) \dd{x} \\
	&= \frac{1}{8} \int (\cos 2x - \cos^3 2x) \dd{x}
		+ \frac{1}{8} \int (1 - \cos^2 2x) \dd{x} \\
	&= \frac{1}{8} \int \sin^2 2x \frac{1}{2} \dd(\sin 2x)
		+ \frac{1}{8} \int \frac{1}{2} (1 - \cos 4x) \dd{x} \\
	&= \frac{1}{48} \sin^3 2x + \frac{1}{16} x - \frac{1}{64} \sin 4x + C.
\end{aligned}\)
\end{solution}
\end{example}

\begin{remark}
%@see: 《高等数学（第六版 上册）》 P198
一般地，对于\(\sin^{2k} x \cos^{2l} x\ (k,l\in\mathbb{N})\)型函数，
总可利用\hyperref[equation:三角函数.余弦的二倍角公式1]{三角恒等式}\begin{equation*}
	\sin^2 x = \frac{1}{2} (1 - \cos 2x)
	\quad\text{和}\quad
	\cos^2 x = \frac{1}{2} (1 + \cos 2x)
\end{equation*}把积分函数化为\(\cos 2x\)的多项式.
\end{remark}

\begin{example}
%@see: 《高等数学（第六版 上册）》 P198 例16
求\(\int \sec^6x \dd{x}\).
\begin{solution}
\(\begin{aligned}[t]
	\int \sec^6x \dd{x}
	&= \int (\sec^2x)^2 \sec^2x \dd{x} \\
	&= \int (1+\tan^2x)^2 \dd(\tan x) \\
	&= \int (1+2\tan^2x+\tan^4x) \dd(\tan x) \\
	&= \tan x + \frac23 \tan^3x + \frac15 \tan^5x + C.
\end{aligned}\)
\end{solution}
\end{example}

\begin{remark}
一般的，对于\(\tan^n x \sec^{2k} x\)
或\(\tan^{2k+1} x \sec^n x\ (k \in \mathbb{N}^+)\)型函数的积分，
可依次作变换\(u=\tan x\)或\(u=\sec x\)，
利用\hyperref[equation:三角函数.毕达哥拉斯三角恒等式2]{三角恒等式}
\(\sec^2 x = \tan^2 x + 1\)
和微分公式\(\dd(\tan x) = \sec^2 x \dd{x}\)，
\(\dd(\sec x) = \sec x \tan x \dd{x}\)，
求得结果.
\end{remark}

\begin{example}
%@see: 《高等数学（第六版 上册）》 P199 例18
求\(\int \csc x \dd{x}\).
\begin{solution}
直接计算得
\begin{align*}
	\int \csc x \dd{x}
	&= \int \frac{\dd{x}}{\sin x}
	= \int \frac{\dd{x}}{2 \sin\frac{x}{2} \cos\frac{x}{2}} \\
	&= \int \frac{\dd(\frac{x}{2})}{\tan\frac{x}{2} \cos^2\frac{x}{2}}
	= \int \frac{\dd(\tan\frac{x}{2})}{\tan\frac{x}{2}} \\
	&= \ln\abs{\tan\frac{x}{2}} + C.
\end{align*}
\end{solution}
\end{example}

\begin{example}
%@see: 《高等数学（第六版 上册）》 P199 例19
求\(\int \sec x \dd{x}\).
\begin{solution}
直接计算得\begin{align*}
	\int \sec x \dd{x}
	&= \int \csc\left(x+\frac\pi2\right) \dd(x+\frac\pi2) \\
	&= \ln\abs{\csc\left(x+\frac\pi2\right)-\cot\left(x+\frac\pi2\right)} + C \\
	&= \ln\abs{\sec x+\tan x} + C.
\end{align*}
\end{solution}
\end{example}
\begin{remark}
不定积分\(\int \sec x \dd{x}\)还有其他计算方式：
\begin{itemize}
	\item \(\begin{aligned}[t]
		\int \sec x \dd{x}
		= \int \frac{\sec x (\sec x + \tan x)}{\sec x + \tan x} \dd{x}
		= \int \frac{\dd(\sec x + \tan x)}{\sec x + \tan x}
		= \ln\abs{\sec x + \tan x} + C.
	\end{aligned}\)

	\item \(\begin{aligned}[t]
		\int \sec x \dd{x}
		= \int \frac{\dd{x}}{\cos x}
		= \int \frac{\cos x \dd{x}}{\cos^2x}
		= \int \frac{\dd(\sin x)}{1 - \sin^2x}
		= \frac12 \ln\abs{\frac{1+\sin x}{1-\sin x}} + C.
	\end{aligned}\)
\end{itemize}
\end{remark}

\subsection{第二类换元法}
\begin{theorem}
%@see: 《高等数学（第六版 上册）》 P201 定理2
设\(x = \psi(t)\)是单调的、可导的函数，
并且\(\psi'(t) \neq 0\).又设\(f[\psi(t)] \psi'(t)\)具有原函数，
则有换元公式\begin{equation*}
	\int f(x) \dd{x}
	= \left[ \int f[\psi(t)] \psi'(t) \dd{t} \right]_{t=\psi^{-1}(x)},
\end{equation*}
其中\(t=\psi^{-1}(x)\)是\(x=\psi(t)\)的反函数.
\begin{proof}
设\(f[\psi(t)] \psi'(t)\)的原函数为\(\Phi(t)\)，
记\(\Phi[\psi^{-1}(x)] = F(x)\)，
利用复合函数及反函数的求导法则，
得到\begin{equation*}
	F'(x) = \dv{\Phi}{t} \cdot \dv{t}{x}
	= f[\psi(t)] \psi'(t) \cdot \frac{1}{\psi'(t)}
	= f[\psi(t)] = f(x),
\end{equation*}
即\(F(x)\)是\(f(x)\)的原函数，
所以有\begin{align*}
	\int f(x) \dd{x} &= F(x) + C
	= \Phi[\psi^{-1}(x)] + C \\
	&= \left[ \int f[\psi(t)] \psi'(t) \dd{t} \right]_{t=\psi^{-1}(x)}.
	\qedhere
\end{align*}
\end{proof}
\end{theorem}

\begin{example}
%@see: 《高等数学（第六版 上册）》 P201 例21
求\(\int \sqrt{a^2 - x^2} \dd{x}\).
\begin{solution}
求这个积分的困难在于根式\(\sqrt{a^2-x^2}\)，
但我们可以利用\hyperref[equation:三角函数.毕达哥拉斯三角恒等式1]{三角恒等式}\begin{equation*}
	\sin^2 t + \cos^2 t = 1
\end{equation*}来化去根式.
设\(x = a \sin t\ (-\frac\pi2 < x < \frac\pi2)\)，
那么\begin{equation*}
	\sqrt{a^2 - x^2}
	= \sqrt{a^2 - a^2 \sin^2 t}
	= a \cos t,
\end{equation*}\begin{equation*}
	\dd{x}
	= a \cos t \dd{t},
\end{equation*}
于是根式化成了三角式，
所求积分化为\begin{align*}
	\int \sqrt{a^2 - x^2} \dd{x}
	&= \int a \cos t \cdot a \cos t \dd{t}
	= a^2 \int \cos^2 t \dd{t} \\
	&= a^2 \left( \frac{t}{2} + \frac{\sin 2t}{4} \right) + C \\
	&= \frac{1}{2} a^2 t + \frac{1}{2} a^2 \sin t \cos t + C.
\end{align*}
因为\(t = \arcsin\frac{x}{a}\)，
\(\cos t
= \sqrt{1-\sin^2 t}
= \sqrt{1-\left(\frac{x}{a}\right)^2}
= \frac{\sqrt{a^2-x^2}}{a}\)，
于是所求积分为\begin{equation*}
	\int \sqrt{a^2 - x^2} \dd{x}
	= \frac{1}{2} a^2 \arcsin\frac{x}{a} + \frac{1}{2} x \sqrt{a^2 - x^2} + C.
\end{equation*}
\end{solution}
\end{example}

\begin{example}
%@see: 《高等数学（第六版 上册）》 P202 例22
求\(\int \frac{\dd{x}}{\sqrt{x^2 + a^2}}\ (a>0)\).
\begin{solution}
和上例类似，这里我们可以利用\hyperref[equation:三角函数.毕达哥拉斯三角恒等式2]{三角恒等式}\begin{equation*}
	\tan^2 t + 1 = \sec^2 t
\end{equation*}来化去根式.
注意到被积函数的定义域为\((-\infty,+\infty)\)，
故可设\(x = a \tan t\ (-\frac\pi2 < t < \frac\pi2)\)，
这时\(\sec t > 0\)，
那么\begin{equation*}
	\sqrt{x^2 + a^2}
	= \sqrt{a^2 \tan^2 t + a^2}
	= a \sqrt{\tan^2 t + 1}
	= a \sec t,
\end{equation*}\begin{equation*}
	\dd{x} = a \sec^2 t \dd{t},
\end{equation*}
于是\begin{equation*}
	\int \frac{\dd{x}}{\sqrt{x^2 + a^2}}
	= \int \frac{a \sec^2 t}{a \sec t} \dd{t}
	= \int \sec t \dd{t}
	= \ln\abs{\sec t + \tan t} + C_1.
\end{equation*}
将\(\tan t = \frac{x}{a}\)和\(\sec t = \frac{\sqrt{x^2+a^2}}{a}\)代回上式，
考虑到当\(-\frac\pi2 < t < \frac\pi2\)时有\(\sec t + \tan t > 0\)，
所以\begin{align}
	\int \frac{\dd{x}}{\sqrt{x^2 + a^2}}
	&= \ln( \frac{x}{a} + \frac{\sqrt{x^2 + a^2}}{a} ) + C_1 \notag \\
	&= \ln(x + \sqrt{x^2 + a^2}) + C,
\end{align}
其中\(C = C_1 - \ln a\).
\end{solution}
\end{example}
\begin{remark}
%@see: 《高等数学（第六版 上册）》 P204
不定积分\(\int \frac{\dd{x}}{\sqrt{x^2 + a^2}}\ (a>0)\)还有其他计算方式：
设\(x = a \sinh t\)，
那么\(\sqrt{x^2+a^2}
=\sqrt{a^2\sinh^2t+a^2}
=a\cosh t\)，
\(\dd{x}=a\cosh t\dd{t}\)，
于是\begin{align*}
	\int\frac{\dd{x}}{\sqrt{x^2+a^2}}
	&= \int\frac{a\cosh t}{a\cosh t}\dd{t}
	= \int\dd{t}
	= t+C_1 \\
	&= \arsinh\frac{x}{a} + C_1
	= \ln\left[\frac{x}{a}+\sqrt{\left(\frac{x}{a}\right)^2+1}\right] + C_1 \\
	&= \ln(x+\sqrt{x^2+a^2})+C,
\end{align*}
其中\(C=C_1-\ln a\).
\end{remark}

\begin{example}
%@see: 《高等数学（第六版 上册）》 P202 例23
求\(\int \frac{\dd{x}}{\sqrt{x^2 - a^2}}\ (a>0)\).
\begin{solution}
首先要注意被积函数的定义域是\(\Set{ x \given x^2-a^2\geq0 }=(-\infty,-a)\cup(a,+\infty)\)，
故须分别在这两个区间求解不定积分.

\begin{itemize}
	\item 当\(x > a\)时，
	设\(x = a \sec t\ (0 < t < \frac\pi2)\)，
	那么\begin{equation*}
		\sqrt{x^2 - a^2} = \sqrt{a^2 \sec^2 t - a^2} = a \sqrt{\sec^2 t - 1} = a \tan t,
	\end{equation*}\begin{equation*}
		\dd{x} = a \sec t \tan t \dd{t},
	\end{equation*}
	于是\begin{equation*}
		\int \frac{\dd{x}}{\sqrt{x^2 - a^2}}
		= \int \frac{a \sec t \tan t \dd{t}}{a \tan t}
		= \int \sec t \dd{t}
		= \ln\abs{\sec t + \tan t} + C_3.
	\end{equation*}
	将\(\sec t = \frac{x}{a}\)和\(\tan t = \frac{\sqrt{x^2-a^2}}{a}\)代回上式，
	考虑到当\(0<t<\frac\pi2\)时有\(\sec t + \tan t > 0\)，
	所以\begin{equation*}
		\int \frac{\dd{x}}{\sqrt{x^2 - a^2}}
		= \ln( \frac{x}{a} + \frac{\sqrt{x^2 - a^2}}{a} ) + C_3
		= \ln( x + \sqrt{x^2 - a^2} ) + C_1,
	\end{equation*}
	其中\(C_1 = C_3 - \ln a\).

	\item 当\(x < -a\)时，
	令\(x = -u\)，
	可得\(u > a\)，
	如此便把问题归结为上述第一种情形：\begin{align*}
		\int \frac{\dd{x}}{\sqrt{x^2 - a^2}}
		&= -\int \frac{\dd{u}}{\sqrt{u^2 - a^2}}
		= -\ln(u + \sqrt{u^2 - a^2}) + C_4 \\
		&= -\ln(-x + \sqrt{x^2 - a^2}) + C_4
		= \ln\frac1{-x + \sqrt{x^2 - a^2}} + C_4 \\
		&= \ln\frac{-x - \sqrt{x^2 - a^2}}{a^2} + C_4
		= \ln(-x - \sqrt{x^2 - a^2}) + C_2,
	\end{align*}
	其中\(C_2 = C_4 - 2 \ln a\).
\end{itemize}
综上所述，\begin{equation}
	\int \frac{\dd{x}}{\sqrt{x^2 - a^2}}
	= \left\{ \def\arraystretch{1.2} \begin{array}{cl}
		\ln(x+\sqrt{x^2-a^2}) + C_1, & x>a, \\
		\ln(-x-\sqrt{x^2-a^2}) + C_2, & x<-a.
	\end{array} \right.
\end{equation}
为了方便记忆，我们通常把上面的分段函数简记为\begin{equation}
	\int \frac{\dd{x}}{\sqrt{x^2 - a^2}}
	= \ln\abs{x + \sqrt{x^2 - a^2}} + C.
\end{equation}
\end{solution}
\end{example}

\begin{remark}
%@see: 《高等数学（第六版 上册）》 P202
如果被积函数含有\(\sqrt{a^2 - x^2}\)，可以作代换\(x = a \sin t\)化去根式；
如果被积函数含有\(\sqrt{x^2 + a^2}\)，可以作代换\(x=a \tan t\)化去根式；
如果被积函数含有\(\sqrt{x^2 - a^2}\)，可以作代换\(x=\pm a \sec t\)化去根式.
\end{remark}

\begin{example}
求\(\int \frac{\sqrt{a^2 - x^2}}{x^4} \dd{x}\).
\begin{solution}
令\(x = \frac{1}{t}\)，
那么\(\dd{x} = -\frac{\dd{t}}{t^2}\)，
于是\begin{align*}
	\int \frac{\sqrt{a^2 - x^2}}{x^4} \dd{x}
	&= \int \frac{\sqrt{a^2 - \frac{1}{t^2}}}{\frac{1}{t^4}}
		\left( -\frac{\dd{t}}{t^2} \right) \\
	&= -\int t^2 \sqrt{a^2 - \frac{1}{t^2}} \dd{t} \\
	&= -\int \abs{t} \sqrt{a^2 t^2 - 1} \dd{t}.
\end{align*}
当\(x > 0\)时，\(t > 0\)，
那么\begin{align*}
	\int \frac{\sqrt{a^2 - x^2}}{x^4} \dd{x}
	&= -\frac{1}{2a^2} \int \sqrt{a^2 t^2 - 1} \dd(a^2 t^2 - 1) \\
	&= -\frac{(a^2 t^2 - 1)^{\frac32}}{3 a^2} + C \\
	&= -\frac{(a^2 - x^2)^{\frac32}}{3 a^2 x^3} + C,
\end{align*}
同理，当\(x < 0\)时，有相同的结果.
\end{solution}
\end{example}
